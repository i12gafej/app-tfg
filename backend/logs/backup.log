2025-05-01 20:27:38,722 - app.api.endpoints.backup - ERROR - Error al crear el backup: 'TokenData' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 45, in create_backup
    logger.info(f"Iniciando creaci蚤 de backup por usuario: {current_user.get('email', 'unknown')}")
  File "C:\Users\USUARIO\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\pydantic\main.py", line 761, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'TokenData' object has no attribute 'get'
2025-05-01 20:29:11,595 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-01 20:29:11,596 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-01 20:29:11,597 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250501_202911.sql
2025-05-01 20:29:11,597 - app.api.endpoints.backup - INFO - Ejecutando comando de backup
2025-05-01 20:29:11,707 - app.api.endpoints.backup - ERROR - Error al crear el backup: Command 'docker exec mysql-container sh -c 'exec mysqldump -u root -p root sustainability_db' > C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups\backup_20250501_202911.sql' returned non-zero exit status 2.
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 64, in create_backup
    subprocess.run(command, shell=True, check=True)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker exec mysql-container sh -c 'exec mysqldump -u root -p root sustainability_db' > C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups\backup_20250501_202911.sql' returned non-zero exit status 2.
2025-05-01 20:29:44,124 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-01 20:29:44,125 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-01 20:29:44,126 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250501_202944.sql
2025-05-01 20:29:44,126 - app.api.endpoints.backup - INFO - Ejecutando comando de backup
2025-05-01 20:29:44,228 - app.api.endpoints.backup - INFO - Backup creado exitosamente
2025-05-01 20:42:46,163 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-01 20:42:46,164 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-01 20:42:46,164 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250501_204246.sql
2025-05-01 20:42:46,165 - app.api.endpoints.backup - INFO - Ejecutando comando de backup
2025-05-01 20:42:46,301 - app.api.endpoints.backup - ERROR - Error al crear el backup: Command 'docker exec mysql-container mysqldump -u root -proot sustainability_db > C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups\backup_20250501_204246.sql' returned non-zero exit status 6.
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 64, in create_backup
    subprocess.run(command, shell=True, check=True)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker exec mysql-container mysqldump -u root -proot sustainability_db > C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups\backup_20250501_204246.sql' returned non-zero exit status 6.
2025-05-01 20:44:01,760 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-01 20:44:01,761 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-01 20:44:01,762 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250501_204401.sql
2025-05-01 20:44:01,763 - app.api.endpoints.backup - INFO - Ejecutando comando de backup
2025-05-01 20:44:01,876 - app.api.endpoints.backup - ERROR - Error al crear el backup: Command 'docker exec mysql-container sh -c 'mysqldump -u root -proot sustainability_db' > C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups\backup_20250501_204401.sql' returned non-zero exit status 2.
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 64, in create_backup
    subprocess.run(command, shell=True, check=True)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker exec mysql-container sh -c 'mysqldump -u root -proot sustainability_db' > C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups\backup_20250501_204401.sql' returned non-zero exit status 2.
2025-05-01 20:46:03,548 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-01 20:46:03,549 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-01 20:46:03,550 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250501_204603.sql
2025-05-01 20:46:03,550 - app.api.endpoints.backup - INFO - Ejecutando comando de backup
2025-05-01 20:46:03,807 - app.api.endpoints.backup - INFO - Backup creado exitosamente
2025-05-19 21:40:34,305 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-19 21:40:34,310 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-19 21:40:34,313 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250519_214034.sql
2025-05-19 21:40:34,314 - app.api.endpoints.backup - INFO - Ejecutando comando de backup
2025-05-19 21:40:34,539 - app.api.endpoints.backup - INFO - Backup creado exitosamente
2025-05-23 22:03:07,987 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-23 22:03:07,988 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-23 22:03:07,990 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250523_220307.sql
2025-05-23 22:03:08,010 - app.api.endpoints.backup - INFO - Intentando backup con: mysqldump -h localhost -P 3306 -u root -proot sustainability_db
2025-05-23 22:03:08,024 - app.api.endpoints.backup - WARNING - mysqldump directo fall悌 [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-23 22:03:08,088 - app.api.endpoints.backup - INFO - Intentando backup con Docker: docker exec mysql-container mysqldump -u root -proot sustainability_db
2025-05-23 22:03:08,458 - app.api.endpoints.backup - INFO - Backup creado exitosamente con Docker
2025-05-24 09:07:12,493 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-24 09:07:12,494 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-24 09:07:12,496 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250524_090712.sql
2025-05-24 09:07:12,520 - app.api.endpoints.backup - INFO - Intentando backup con: mysqldump -h localhost -P 3306 -u root -proot sustainability_db
2025-05-24 09:07:12,535 - app.api.endpoints.backup - WARNING - mysqldump directo fall悌 [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-24 09:07:12,599 - app.api.endpoints.backup - INFO - Intentando backup con Docker: docker exec mysql-container mysqldump -u root -proot sustainability_db
2025-05-24 09:07:12,950 - app.api.endpoints.backup - INFO - Backup creado exitosamente con Docker
2025-05-24 09:07:30,259 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-24 09:07:30,262 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-24 09:07:30,264 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250524_090730.sql
2025-05-24 09:07:30,288 - app.api.endpoints.backup - INFO - Intentando backup con: mysqldump -h localhost -P 3306 -u root -proot sustainability_db
2025-05-24 09:07:30,303 - app.api.endpoints.backup - WARNING - mysqldump directo fall悌 [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-24 09:07:30,368 - app.api.endpoints.backup - INFO - Intentando backup con Docker: docker exec mysql-container mysqldump -u root -proot sustainability_db
2025-05-24 09:07:30,567 - app.api.endpoints.backup - INFO - Backup creado exitosamente con Docker
2025-05-24 09:07:48,035 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-24 09:07:48,036 - app.api.endpoints.backup - INFO - Directorio de backup verificado/creado: C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\backups
2025-05-24 09:07:48,036 - app.api.endpoints.backup - INFO - Archivo de backup a crear: backup_20250524_090748.sql
2025-05-24 09:07:48,055 - app.api.endpoints.backup - INFO - Intentando backup con: mysqldump -h localhost -P 3306 -u root -proot sustainability_db
2025-05-24 09:07:48,070 - app.api.endpoints.backup - WARNING - mysqldump directo fall悌 [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-24 09:07:48,140 - app.api.endpoints.backup - INFO - Intentando backup con Docker: docker exec mysql-container mysqldump -u root -proot sustainability_db
2025-05-24 09:07:48,354 - app.api.endpoints.backup - INFO - Backup creado exitosamente con Docker
2025-05-24 09:17:47,193 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-24 09:17:47,214 - app.api.endpoints.backup - INFO - Intentando backup con: mysqldump -h localhost -P 3306 -u root -proot sustainability_db
2025-05-24 09:17:47,228 - app.api.endpoints.backup - WARNING - mysqldump directo fall悌 [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-24 09:17:47,296 - app.api.endpoints.backup - INFO - Intentando backup con Docker: docker exec mysql-container mysqldump -u root -proot sustainability_db
2025-05-24 09:17:47,532 - app.api.endpoints.backup - INFO - Backup creado exitosamente con Docker
2025-05-24 09:29:03,236 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:29:03,240 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqldump -h db -P 3306 -u root -pcontrasenaprueba sustainability_db
2025-05-24 09:29:03,436 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-24 09:29:27,931 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:29:27,931 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 09:29:27,932 - app.api.endpoints.backup - INFO - Ejecutando comando de restauraci칩n: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db
2025-05-24 09:29:27,934 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: local variable 'content' referenced before assignment
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 207, in restore_backup
    stdout, stderr = await process.communicate(input=content)
UnboundLocalError: local variable 'content' referenced before assignment
2025-05-24 09:33:25,769 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:33:25,770 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 09:33:25,772 - app.api.endpoints.backup - INFO - Ejecutando comando de restauraci칩n: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db
2025-05-24 09:37:46,086 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:37:46,086 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 09:37:46,091 - app.api.endpoints.backup - INFO - Ejecutando comando de restauraci칩n: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db -e source /tmp/restore_20250524_093746.sql
2025-05-24 09:47:04,513 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:47:04,514 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 09:47:04,521 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: No se pudo obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'
2025-05-24 09:47:04,522 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 55, in get_mysql_container_name
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 503, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/usr/local/lib/python3.10/subprocess.py", line 971, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/local/lib/python3.10/subprocess.py", line 1863, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'docker'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 161, in _do_restore
    mysql_container = get_mysql_container_name()
  File "/app/app/api/endpoints/backup.py", line 80, in get_mysql_container_name
    raise Exception(f"No se pudo obtener el nombre del contenedor: {e}")
Exception: No se pudo obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 226, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 192, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: No se pudo obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 245, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 09:51:28,432 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:51:28,433 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 09:51:28,436 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: flush of closed file
2025-05-24 09:51:28,437 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 193, in _do_restore
    stdout, stderr = proc.communicate()
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1973, in _communicate
    self.stdin.flush()
ValueError: flush of closed file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 233, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 199, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: flush of closed file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 252, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 09:53:53,969 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 09:53:53,970 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:00:27,458 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 10:00:27,459 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:00:27,462 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 10:00:27,464 - app.api.endpoints.backup - INFO - Comandos de optimizaci칩n enviados
2025-05-24 10:03:43,586 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 10:03:43,587 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:03:43,588 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 10:03:43,589 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_100343.sql
2025-05-24 10:03:43,590 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 10:03:43,591 - app.api.endpoints.backup - INFO - Ejecutando comando: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db -v --show-warnings -e source /tmp/restore_20250524_100343.sql
2025-05-24 10:11:03,996 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 10:11:03,996 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:11:03,998 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 10:11:03,998 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_101103.sql
2025-05-24 10:11:04,000 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 10:11:04,000 - app.api.endpoints.backup - INFO - Ejecutando comando: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_101103.sql
2025-05-24 10:11:04,007 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: 
2025-05-24 10:11:04,008 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error en la restauraci칩n: 
2025-05-24 10:11:04,008 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 10:11:04,009 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error en la restauraci칩n: 
2025-05-24 10:11:04,009 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 190, in _do_restore
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['/usr/bin/mysql', '-h', 'db', '-P', '3306', '-u', 'root', '-pcontrasenaprueba', 'sustainability_db', '<', '/tmp/restore_20250524_101103.sql']' returned non-zero exit status 1.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 213, in _do_restore
    raise Exception(error_msg)
Exception: Error en la restauraci칩n: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 260, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 217, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error en la restauraci칩n: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 278, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 10:14:35,236 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 10:14:35,236 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:14:35,237 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 10:14:35,237 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_101435.sql
2025-05-24 10:14:35,239 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 10:14:35,239 - app.api.endpoints.backup - INFO - Ejecutando comando: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_101435.sql
2025-05-24 10:19:35,325 - app.api.endpoints.backup - ERROR - La restauraci칩n excedi칩 el tiempo m치ximo de espera (5 minutos)
2025-05-24 10:19:35,326 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (5 minutos)
2025-05-24 10:19:35,326 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 10:19:35,327 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (5 minutos)
2025-05-24 10:19:35,327 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 182, in _do_restore
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 505, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command '/usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_101435.sql' timed out after 300 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 201, in _do_restore
    raise Exception("La restauraci칩n excedi칩 el tiempo m치ximo de espera (5 minutos)")
Exception: La restauraci칩n excedi칩 el tiempo m치ximo de espera (5 minutos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 253, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 210, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (5 minutos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 271, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 10:41:49,903 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 10:41:49,904 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:41:49,904 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 10:41:49,905 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_104149.sql
2025-05-24 10:41:49,905 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 10:41:49,906 - app.api.endpoints.backup - INFO - Ejecutando comando: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db -e 'SET autocommit=0; SET unique_checks=0; SET foreign_key_checks=0; source /tmp/restore_20250524_104149.sql; COMMIT;'
2025-05-24 10:41:49,906 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 10:41:49.906338
2025-05-24 10:42:19,936 - app.api.endpoints.backup - ERROR - La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 10:42:19,937 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 10:42:19,937 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 10:42:19,937 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 10:42:19,938 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 505, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command '/usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db -e 'SET autocommit=0; SET unique_checks=0; SET foreign_key_checks=0; source /tmp/restore_20250524_104149.sql; COMMIT;'' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 208, in _do_restore
    raise Exception("La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)")
Exception: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 260, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 217, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 278, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 10:44:35,817 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 10:44:35,817 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 10:44:35,819 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 10:44:35,819 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_104435.sql
2025-05-24 10:44:35,820 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 10:44:35,820 - app.api.endpoints.backup - INFO - Ejecutando comando: echo 'SET autocommit=0; SET unique_checks=0; SET foreign_key_checks=0;' | cat - /tmp/restore_20250524_104435.sql | /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db
2025-05-24 10:44:35,821 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 10:44:35.821126
2025-05-24 10:45:05,839 - app.api.endpoints.backup - ERROR - La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 10:45:05,840 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 10:45:05,841 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 10:45:05,841 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 10:45:05,841 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 505, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command 'echo 'SET autocommit=0; SET unique_checks=0; SET foreign_key_checks=0;' | cat - /tmp/restore_20250524_104435.sql | /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 208, in _do_restore
    raise Exception("La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)")
Exception: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 260, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 217, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 278, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:19:02,757 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:19:02,758 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:19:02,759 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:19:02,759 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_171902.sql
2025-05-24 17:19:02,760 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:19:02,761 - app.api.endpoints.backup - ERROR - Error al obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'
2025-05-24 17:19:02,761 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error al obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'
2025-05-24 17:19:02,762 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:19:02,762 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error al obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'
2025-05-24 17:19:02,762 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 174, in _do_restore
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 503, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/usr/local/lib/python3.10/subprocess.py", line 971, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/local/lib/python3.10/subprocess.py", line 1863, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'docker'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    raise Exception(f"Error al obtener el nombre del contenedor: {e}")
Exception: Error al obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 287, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 244, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error al obtener el nombre del contenedor: [Errno 2] No such file or directory: 'docker'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 305, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:23:05,879 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:23:05,880 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:23:05,881 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:23:05,881 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_172305.sql
2025-05-24 17:23:05,882 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:23:05,882 - app.api.endpoints.backup - INFO - Ejecutando comando: /usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_172305.sql
2025-05-24 17:23:05,883 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 17:23:05.883139
2025-05-24 17:23:35,885 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 17:23:35,886 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:23:35,887 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 17:23:35,887 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 196, in _do_restore
    stdout, stderr = process.communicate(timeout=30)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command '/usr/bin/mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_172305.sql' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 201, in _do_restore
    raise Exception("La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)")
Exception: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 265, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 222, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 283, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:29:56,930 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:29:56,931 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:29:56,932 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:29:56,933 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_172956.sql
2025-05-24 17:29:56,933 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:29:56,950 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:29:56,954 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:29:56,967 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: 500 Server Error for http+docker://localhost/v1.47/containers/744205b064f6d76efc923da05d0a36255247df6879e5be22002ef7de749cec46/archive?path=%2Ftmp%2F: Internal Server Error ("archive/tar: invalid tar header")
2025-05-24 17:29:56,968 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:29:56,969 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: 500 Server Error for http+docker://localhost/v1.47/containers/744205b064f6d76efc923da05d0a36255247df6879e5be22002ef7de749cec46/archive?path=%2Ftmp%2F: Internal Server Error ("archive/tar: invalid tar header")
2025-05-24 17:29:56,969 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/docker/api/client.py", line 275, in _raise_for_status
    response.raise_for_status()
  File "/usr/local/lib/python3.10/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http+docker://localhost/v1.47/containers/744205b064f6d76efc923da05d0a36255247df6879e5be22002ef7de749cec46/archive?path=%2Ftmp%2F

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 183, in _do_restore
    db_container.put_archive('/tmp/', f.read())
  File "/usr/local/lib/python3.10/site-packages/docker/models/containers.py", line 350, in put_archive
    return self.client.api.put_archive(self.id, path, data)
  File "/usr/local/lib/python3.10/site-packages/docker/utils/decorators.py", line 19, in wrapped
    return f(self, resource_id, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/docker/api/container.py", line 991, in put_archive
    self._raise_for_status(res)
  File "/usr/local/lib/python3.10/site-packages/docker/api/client.py", line 277, in _raise_for_status
    raise create_api_error_from_http_exception(e) from e
  File "/usr/local/lib/python3.10/site-packages/docker/errors.py", line 39, in create_api_error_from_http_exception
    raise cls(e, response=response, explanation=explanation) from e
docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.47/containers/744205b064f6d76efc923da05d0a36255247df6879e5be22002ef7de749cec46/archive?path=%2Ftmp%2F: Internal Server Error ("archive/tar: invalid tar header")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 259, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 216, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: 500 Server Error for http+docker://localhost/v1.47/containers/744205b064f6d76efc923da05d0a36255247df6879e5be22002ef7de749cec46/archive?path=%2Ftmp%2F: Internal Server Error ("archive/tar: invalid tar header")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 277, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:31:43,569 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:31:43,570 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:31:43,571 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:31:43,572 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_173143.sql
2025-05-24 17:31:43,572 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:31:43,586 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:31:43,590 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:31:43,613 - app.api.endpoints.backup - INFO - Archivo copiado al contenedor de base de datos
2025-05-24 17:31:43,613 - app.api.endpoints.backup - INFO - Ejecutando comando en el contenedor: mysql -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_173143.sql
2025-05-24 17:31:43,614 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 17:31:43.614067
2025-05-24 17:31:43,679 - app.api.endpoints.backup - INFO - Restauraci칩n completada en 0.065339 segundos
2025-05-24 17:31:43,680 - app.api.endpoints.backup - INFO - Salida de MySQL: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE

2025-05-24 17:31:43,680 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE

2025-05-24 17:31:43,681 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error en la restauraci칩n: Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE

2025-05-24 17:31:43,682 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:31:43,683 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE

2025-05-24 17:31:43,683 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 216, in _do_restore
    raise Exception(f"Error en la restauraci칩n: {result.output.decode()}")
Exception: Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 223, in _do_restore
    raise Exception(error_msg)
Exception: Error en la restauraci칩n: Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 270, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 227, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
mysql  Ver 8.0.42 for Linux on x86_64 (MySQL Community Server - GPL)
Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash 
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output 
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.)
  --bind-address=name IP address to bind to.
  --binary-as-hex     Print binary data as hex. Enabled by default for
                      interactive terminals.
  --character-sets-dir=name 
                      Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                      default is --skip-comments (discard comments), enable
                      with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       This is a non-debug version. Catch this and exit.
  -T, --debug-info    This is a non-debug version. Catch this and exit.
  -D, --database=name Database to use.
  --default-character-set=name 
                      Set the default character set.
  --delimiter=name    Delimiter to be used.
  --enable-cleartext-plugin 
                      Enable/disable the clear text authentication plugin.
  -e, --execute=name  Execute command and quit. (Disables --force and history
                      file.)
  -E, --vertical      Print the output of a query (rows) vertically.
  -f, --force         Continue even if we get an SQL error.
  --histignore=name   A colon-separated list of patterns to keep statements
                      from getting logged into syslog and mysql history.
  -G, --named-commands 
                      Enable named commands. Named commands mean this program's
                      internal commands; see mysql> help . When enabled, the
                      named commands can be used from any line of the query,
                      otherwise only from the first line, before an enter.
                      Disable with --disable-named-commands. This option is
                      disabled by default.
  -i, --ignore-spaces Ignore space after function names.
  --init-command=name SQL Command to execute when connecting to MySQL server.
                      Will automatically be re-executed when reconnecting.
  --local-infile      Enable/disable LOAD DATA LOCAL INFILE.
  -b, --no-beep       Turn off beep on error.
  -h, --host=name     Connect to host.
  --dns-srv-name=name Connect to a DNS SRV resource
  -H, --html          Produce HTML output.
  -X, --xml           Produce XML output.
  --line-numbers      Write line numbers for errors.
                      (Defaults to on; use --skip-line-numbers to disable.)
  -L, --skip-line-numbers 
                      Don't write line number for errors.
  -n, --unbuffered    Flush buffer after each query.
  --column-names      Write column names in results.
                      (Defaults to on; use --skip-column-names to disable.)
  -N, --skip-column-names 
                      Don't write column names in results.
  --sigint-ignore     Ignore SIGINT (CTRL-C).
  -o, --one-database  Ignore statements except those that occur while the
                      default database is the one named at the command line.
  --pager[=name]      Pager to use to display results. If you don't supply an
                      option, the default pager is taken from your ENV variable
                      PAGER. Valid pagers are less, more, cat [> filename],
                      etc. See interactive help (\h) also. This option does not
                      work in batch mode. Disable with --disable-pager. This
                      option is disabled by default.
  -p, --password[=name] 
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -,, --password1[=name] 
                      Password for first factor authentication plugin.
  -,, --password2[=name] 
                      Password for second factor authentication plugin.
  -,, --password3[=name] 
                      Password for third factor authentication plugin.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --prompt=name       Set the mysql prompt to this value.
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -q, --quick         Don't cache result, print it row by row. This may slow
                      down the server if the output is suspended. Doesn't use
                      history file.
  -r, --raw           Write fields without conversion. Used with --batch.
  --reconnect         Reconnect if the connection is lost. Disable with
                      --disable-reconnect. This option is enabled by default.
                      (Defaults to on; use --skip-reconnect to disable.)
  -s, --silent        Be more silent. Print results with a tab as separator,
                      each row on new line.
  -S, --socket=name   The socket file to use for connection.
  --server-public-key-path=name 
                      File path to the server public RSA key in PEM format.
  --get-server-public-key 
                      Get server public key
  --ssl-mode=name     SSL connection mode.
  --ssl-ca=name       CA file in PEM format.
  --ssl-capath=name   CA directory.
  --ssl-cert=name     X509 cert in PEM format.
  --ssl-cipher=name   SSL cipher to use.
  --ssl-key=name      X509 key in PEM format.
  --ssl-crl=name      Certificate revocation list.
  --ssl-crlpath=name  Certificate revocation list path.
  --tls-version=name  TLS version to use, permitted values are: TLSv1.2,
                      TLSv1.3
  --ssl-fips-mode=name 
                      SSL FIPS mode (applies only for OpenSSL); permitted
                      values are: OFF, ON, STRICT
  --tls-ciphersuites=name 
                      TLS v1.3 cipher to use.
  --ssl-session-data=name 
                      Session data file to use to enable ssl session reuse
  --ssl-session-data-continue-on-failed-reuse 
                      If set to ON, this option will allow connection to
                      succeed even if session data cannot be reused.
  -t, --table         Output in table format.
  --tee=name          Append everything into outfile. See interactive help (\h)
                      also. Does not work in batch mode. Disable with
                      --disable-tee. This option is disabled by default.
  -u, --user=name     User for login if not current user.
  -U, --safe-updates  Only allow UPDATE and DELETE that uses keys.
  -U, --i-am-a-dummy  Synonym for option --safe-updates, -U.
  -v, --verbose       Write more. (-v -v -v gives the table output format).
  -V, --version       Output version information and exit.
  -w, --wait          Wait and retry if connection is down.
  --connect-timeout=# Number of seconds before connection timeout.
  --max-allowed-packet=# 
                      The maximum packet length to send to or receive from
                      server.
  --net-buffer-length=# 
                      The buffer size for TCP/IP and socket communication.
  --select-limit=#    Automatic limit for SELECT when using --safe-updates.
  --max-join-size=#   Automatic limit for rows in a join when using
                      --safe-updates.
  --show-warnings     Show warnings after every statement.
  -j, --syslog        Log filtered interactive commands to syslog. Filtering of
                      commands depends on the patterns supplied via histignore
                      option besides the default patterns.
  --plugin-dir=name   Directory for client-side plugins.
  --default-auth=name Default authentication client-side plugin to use.
  --binary-mode       By default, ASCII '\0' is disallowed and '\r\n' is
                      translated to '\n'. This switch turns off both features,
                      and also turns off parsing of all clientcommands except
                      \C and DELIMITER, in non-interactive mode (for input
                      piped to mysql or loaded using the 'source' command).
                      This is necessary when processing output from mysqlbinlog
                      that may contain blobs.
  --connect-expired-password 
                      Notify the server that this client is prepared to handle
                      expired password sandbox mode.
  --network-namespace=name 
                      Network namespace to use for connection via tcp with a
                      server.
  --compression-algorithms=name 
                      Use compression algorithm in server/client protocol.
                      Valid values are any combination of
                      'zstd','zlib','uncompressed'.
  --zstd-compression-level=# 
                      Use this compression level in the client/server protocol,
                      in case --compression-algorithms=zstd. Valid range is
                      between 1 and 22, inclusive. Default is 3.
  --load-data-local-dir=name 
                      Directory path safe for LOAD DATA LOCAL INFILE to read
                      from.
  --fido-register-factor=name 
                      Specifies authentication factor, for which registration
                      needs to be done.
  --authentication-oci-client-config-profile=name 
                      Specifies the configuration profile whose configuration
                      options are to be read from the OCI configuration file.
                      Default is DEFAULT.
  --oci-config-file=name 
                      Specifies the location of the OCI configuration file.
                      Default for Linux is ~/.oci/config and %HOME/.oci/config
                      on Windows.
  --system-command    Enable (by default) or disable the system mysql command.
                      (Defaults to on; use --skip-system-command to disable.)

Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
The following groups are read: mysql client
The following options may be given as the first argument:
--print-defaults        Print the program argument list and exit.
--no-defaults           Don't read default options from any option file,
                        except for login file.
--defaults-file=#       Only read default options from the given file #.
--defaults-extra-file=# Read this file after the global files are read.
--defaults-group-suffix=#
                        Also read groups with concat(group, suffix)
--login-path=#          Read this path from the login file.

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}          Value (after reading options)
----------------------------------------- --------------------------------
auto-rehash                               TRUE
auto-vertical-output                      FALSE
bind-address                              (No default value)
binary-as-hex                             FALSE
character-sets-dir                        (No default value)
column-type-info                          FALSE
comments                                  FALSE
compress                                  FALSE
database                                  (No default value)
default-character-set                     auto
delimiter                                 ;
enable-cleartext-plugin                   FALSE
vertical                                  FALSE
force                                     FALSE
histignore                                (No default value)
named-commands                            FALSE
ignore-spaces                             FALSE
init-command                              (No default value)
local-infile                              FALSE
no-beep                                   FALSE
host                                      (No default value)
dns-srv-name                              (No default value)
html                                      FALSE
xml                                       FALSE
line-numbers                              TRUE
unbuffered                                FALSE
column-names                              TRUE
sigint-ignore                             FALSE
port                                      0
prompt                                    mysql> 
quick                                     FALSE
raw                                       FALSE
reconnect                                 FALSE
socket                                    /var/run/mysqld/mysqld.sock
server-public-key-path                    (No default value)
get-server-public-key                     FALSE
ssl-ca                                    (No default value)
ssl-capath                                (No default value)
ssl-cert                                  (No default value)
ssl-cipher                                (No default value)
ssl-key                                   (No default value)
ssl-crl                                   (No default value)
ssl-crlpath                               (No default value)
tls-version                               (No default value)
tls-ciphersuites                          (No default value)
ssl-session-data                          (No default value)
ssl-session-data-continue-on-failed-reuse FALSE
table                                     FALSE
user                                      root
safe-updates                              FALSE
i-am-a-dummy                              FALSE
connect-timeout                           0
max-allowed-packet                        16777216
net-buffer-length                         16384
select-limit                              1000
max-join-size                             1000000
show-warnings                             FALSE
plugin-dir                                (No default value)
default-auth                              (No default value)
binary-mode                               FALSE
connect-expired-password                  FALSE
network-namespace                         (No default value)
compression-algorithms                    (No default value)
zstd-compression-level                    3
load-data-local-dir                       (No default value)
fido-register-factor                      (No default value)
authentication-oci-client-config-profile  (No default value)
oci-config-file                           (No default value)
system-command                            TRUE


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 288, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:33:12,456 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:33:12,457 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:33:12,458 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:33:12,458 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_173312.sql
2025-05-24 17:33:12,459 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:33:12,471 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:33:12,475 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:33:12,484 - app.api.endpoints.backup - INFO - Archivo copiado al contenedor de base de datos
2025-05-24 17:33:12,485 - app.api.endpoints.backup - INFO - Ejecutando comando en el contenedor: cd /tmp && /usr/bin/mysql -u root -pcontrasenaprueba sustainability_db < restore_20250524_173312.sql
2025-05-24 17:33:12,486 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 17:33:12.486434
2025-05-24 17:33:12,487 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:12,491 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:12,492 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:33:12,493 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:12,495 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 207, in _do_restore
    result = db_container.exec_run(command, shell=True)
TypeError: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 224, in _do_restore
    raise Exception(error_msg)
Exception: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 271, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 228, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 289, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:33:14,112 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:33:14,113 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:33:14,113 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:33:14,113 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_173314.sql
2025-05-24 17:33:14,114 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:33:14,125 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:33:14,130 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:33:14,141 - app.api.endpoints.backup - INFO - Archivo copiado al contenedor de base de datos
2025-05-24 17:33:14,142 - app.api.endpoints.backup - INFO - Ejecutando comando en el contenedor: cd /tmp && /usr/bin/mysql -u root -pcontrasenaprueba sustainability_db < restore_20250524_173314.sql
2025-05-24 17:33:14,142 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 17:33:14.142891
2025-05-24 17:33:14,143 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:14,145 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:14,146 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:33:14,147 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:14,148 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 207, in _do_restore
    result = db_container.exec_run(command, shell=True)
TypeError: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 224, in _do_restore
    raise Exception(error_msg)
Exception: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 271, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 228, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 289, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:33:14,661 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:33:14,662 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:33:14,662 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:33:14,663 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_173314.sql
2025-05-24 17:33:14,663 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:33:14,674 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:33:14,680 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:33:14,689 - app.api.endpoints.backup - INFO - Archivo copiado al contenedor de base de datos
2025-05-24 17:33:14,690 - app.api.endpoints.backup - INFO - Ejecutando comando en el contenedor: cd /tmp && /usr/bin/mysql -u root -pcontrasenaprueba sustainability_db < restore_20250524_173314.sql
2025-05-24 17:33:14,690 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 17:33:14.690424
2025-05-24 17:33:14,690 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:14,691 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:14,692 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:33:14,692 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:14,692 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 207, in _do_restore
    result = db_container.exec_run(command, shell=True)
TypeError: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 224, in _do_restore
    raise Exception(error_msg)
Exception: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 271, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 228, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 289, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:33:15,113 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:33:15,114 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:33:15,114 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:33:15,114 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_173315.sql
2025-05-24 17:33:15,115 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:33:15,125 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:33:15,131 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:33:15,141 - app.api.endpoints.backup - INFO - Archivo copiado al contenedor de base de datos
2025-05-24 17:33:15,141 - app.api.endpoints.backup - INFO - Ejecutando comando en el contenedor: cd /tmp && /usr/bin/mysql -u root -pcontrasenaprueba sustainability_db < restore_20250524_173315.sql
2025-05-24 17:33:15,142 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 17:33:15.142158
2025-05-24 17:33:15,142 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:15,142 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:15,143 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-24 17:33:15,143 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'
2025-05-24 17:33:15,144 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 207, in _do_restore
    result = db_container.exec_run(command, shell=True)
TypeError: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 224, in _do_restore
    raise Exception(error_msg)
Exception: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 271, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 228, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error en la restauraci칩n: Container.exec_run() got an unexpected keyword argument 'shell'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 289, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:34:31,407 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:34:31,408 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:34:31,409 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 17:34:31,410 - app.api.endpoints.backup - INFO - Creando archivo temporal: /tmp/restore_20250524_173431.sql
2025-05-24 17:34:31,410 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente
2025-05-24 17:34:31,429 - app.api.endpoints.backup - INFO - Conectado al Docker daemon
2025-05-24 17:34:31,436 - app.api.endpoints.backup - INFO - Contenedor de base de datos encontrado
2025-05-24 17:34:31,448 - app.api.endpoints.backup - INFO - Archivo copiado al contenedor de base de datos
2025-05-24 17:40:20,914 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:40:20,915 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:40:20,950 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: {"detail":"Error en el proceso de restauraci칩n: Error while fetching server API version: Not supported URL scheme http+docker"}
2025-05-24 17:40:20,951 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 267, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:41:48,962 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:41:48,963 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:41:48,997 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: {"detail":"Error en el proceso de restauraci칩n: Error while fetching server API version: Not supported URL scheme http+docker"}
2025-05-24 17:41:48,998 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 267, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 17:43:00,480 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 17:43:00,480 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 17:43:00,619 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: {"detail":"Error en el proceso de restauraci칩n: Error en la restauraci칩n: /bin/sh: 1: cannot open /tmp/prueba.sql: No such file\n"}
2025-05-24 17:43:00,620 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 267, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:08:53,708 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:08:53,709 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:08:53,831 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: {"detail":"Error en el proceso de restauraci칩n: Error en la restauraci칩n: /bin/sh: 1: cannot open /tmp/prueba.sql: No such file\n"}
2025-05-24 18:08:53,831 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 267, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:12:27,565 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:12:27,566 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:12:32,600 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 66, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 366, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 262, in restore_backup
    response = await client.post('http://supervisor:8001/restore', files=files)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1848, in post
    return await self.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 365, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 83, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-05-24 18:13:54,399 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:13:54,399 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:15:28,229 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Server disconnected without sending a response.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 66, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 366, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 231, in _receive_event
    raise RemoteProtocolError(msg)
httpcore.RemoteProtocolError: Server disconnected without sending a response.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 262, in restore_backup
    user,
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1848, in post
    return await self.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 365, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 83, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.RemoteProtocolError: Server disconnected without sending a response.
2025-05-24 18:20:29,539 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:20:29,539 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:20:29,544 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 18:20:29,545 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250524_182029.sql
2025-05-24 18:20:29,547 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-24 18:20:29,548 - app.api.endpoints.backup - INFO - Copiando archivo a contenedor db: /tmp/restore_20250524_182029.sql
2025-05-24 18:20:29,549 - app.api.endpoints.backup - INFO - Ejecutando comando de copia: docker cp /tmp/restore_20250524_182029.sql db:/tmp/restore_20250524_182029.sql
2025-05-24 18:20:29,552 - app.api.endpoints.backup - ERROR - Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:29,553 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:29,553 - app.api.endpoints.backup - INFO - Archivo temporal eliminado del backend
2025-05-24 18:20:29,556 - app.api.endpoints.backup - WARNING - No se pudo eliminar el archivo temporal del contenedor db: Command 'docker exec db rm -f /tmp/restore_20250524_182029.sql' returned non-zero exit status 127.
2025-05-24 18:20:29,557 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:29,557 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 180, in _do_restore
    subprocess.run(copy_command, shell=True, check=True, capture_output=True, text=True)
  File "/usr/local/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker cp /tmp/restore_20250524_182029.sql db:/tmp/restore_20250524_182029.sql' returned non-zero exit status 127.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    raise Exception(error_msg)
Exception: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 279, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 227, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 297, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:20:30,822 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:20:30,822 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:20:30,822 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 18:20:30,822 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250524_182030.sql
2025-05-24 18:20:30,823 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-24 18:20:30,823 - app.api.endpoints.backup - INFO - Copiando archivo a contenedor db: /tmp/restore_20250524_182030.sql
2025-05-24 18:20:30,823 - app.api.endpoints.backup - INFO - Ejecutando comando de copia: docker cp /tmp/restore_20250524_182030.sql db:/tmp/restore_20250524_182030.sql
2025-05-24 18:20:30,825 - app.api.endpoints.backup - ERROR - Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:30,826 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:30,827 - app.api.endpoints.backup - INFO - Archivo temporal eliminado del backend
2025-05-24 18:20:30,829 - app.api.endpoints.backup - WARNING - No se pudo eliminar el archivo temporal del contenedor db: Command 'docker exec db rm -f /tmp/restore_20250524_182030.sql' returned non-zero exit status 127.
2025-05-24 18:20:30,829 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:30,830 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 180, in _do_restore
    subprocess.run(copy_command, shell=True, check=True, capture_output=True, text=True)
  File "/usr/local/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker cp /tmp/restore_20250524_182030.sql db:/tmp/restore_20250524_182030.sql' returned non-zero exit status 127.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    raise Exception(error_msg)
Exception: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 279, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 227, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 297, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:20:31,332 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:20:31,333 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:20:31,333 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 18:20:31,333 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,334 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-24 18:20:31,334 - app.api.endpoints.backup - INFO - Copiando archivo a contenedor db: /tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,334 - app.api.endpoints.backup - INFO - Ejecutando comando de copia: docker cp /tmp/restore_20250524_182031.sql db:/tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,336 - app.api.endpoints.backup - ERROR - Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,336 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,336 - app.api.endpoints.backup - INFO - Archivo temporal eliminado del backend
2025-05-24 18:20:31,338 - app.api.endpoints.backup - WARNING - No se pudo eliminar el archivo temporal del contenedor db: Command 'docker exec db rm -f /tmp/restore_20250524_182031.sql' returned non-zero exit status 127.
2025-05-24 18:20:31,338 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,338 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 180, in _do_restore
    subprocess.run(copy_command, shell=True, check=True, capture_output=True, text=True)
  File "/usr/local/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker cp /tmp/restore_20250524_182031.sql db:/tmp/restore_20250524_182031.sql' returned non-zero exit status 127.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    raise Exception(error_msg)
Exception: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 279, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 227, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 297, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:20:31,584 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:20:31,584 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:20:31,640 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 18:20:31,691 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,694 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-24 18:20:31,694 - app.api.endpoints.backup - INFO - Copiando archivo a contenedor db: /tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,695 - app.api.endpoints.backup - INFO - Ejecutando comando de copia: docker cp /tmp/restore_20250524_182031.sql db:/tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,697 - app.api.endpoints.backup - ERROR - Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,698 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,698 - app.api.endpoints.backup - INFO - Archivo temporal eliminado del backend
2025-05-24 18:20:31,700 - app.api.endpoints.backup - WARNING - No se pudo eliminar el archivo temporal del contenedor db: Command 'docker exec db rm -f /tmp/restore_20250524_182031.sql' returned non-zero exit status 127.
2025-05-24 18:20:31,700 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,701 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 180, in _do_restore
    subprocess.run(copy_command, shell=True, check=True, capture_output=True, text=True)
  File "/usr/local/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker cp /tmp/restore_20250524_182031.sql db:/tmp/restore_20250524_182031.sql' returned non-zero exit status 127.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    raise Exception(error_msg)
Exception: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 279, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 227, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 297, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:20:31,853 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:20:31,854 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:20:31,854 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 18:20:31,854 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,855 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-24 18:20:31,855 - app.api.endpoints.backup - INFO - Copiando archivo a contenedor db: /tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,856 - app.api.endpoints.backup - INFO - Ejecutando comando de copia: docker cp /tmp/restore_20250524_182031.sql db:/tmp/restore_20250524_182031.sql
2025-05-24 18:20:31,857 - app.api.endpoints.backup - ERROR - Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,858 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,858 - app.api.endpoints.backup - INFO - Archivo temporal eliminado del backend
2025-05-24 18:20:31,862 - app.api.endpoints.backup - WARNING - No se pudo eliminar el archivo temporal del contenedor db: Command 'docker exec db rm -f /tmp/restore_20250524_182031.sql' returned non-zero exit status 127.
2025-05-24 18:20:31,863 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found

2025-05-24 18:20:31,864 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 180, in _do_restore
    subprocess.run(copy_command, shell=True, check=True, capture_output=True, text=True)
  File "/usr/local/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'docker cp /tmp/restore_20250524_182031.sql db:/tmp/restore_20250524_182031.sql' returned non-zero exit status 127.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 185, in _do_restore
    raise Exception(error_msg)
Exception: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 279, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 227, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: Error al copiar el archivo al contenedor db: /bin/sh: 1: docker: not found


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 297, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-24 18:51:16,895 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-24 18:51:16,895 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-24 18:51:16,896 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-24 18:51:16,896 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250524_185116.sql
2025-05-24 18:51:16,897 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-24 18:51:16,897 - app.api.endpoints.backup - INFO - Ejecutando comando de restauraci칩n: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_185116.sql
2025-05-24 18:51:16,898 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-24 18:51:16.898041
2025-05-24 18:51:46,915 - app.api.endpoints.backup - ERROR - La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 18:51:46,916 - app.api.endpoints.backup - ERROR - Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 18:51:46,916 - app.api.endpoints.backup - INFO - Archivo temporal eliminado del backend
2025-05-24 18:51:46,916 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)
2025-05-24 18:51:46,917 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 180, in _do_restore
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 505, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command 'mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250524_185116.sql' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 203, in _do_restore
    raise Exception("La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)")
Exception: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 255, in restore_backup
    _do_restore(
  File "/app/app/api/endpoints/backup.py", line 212, in _do_restore
    raise Exception(f"Error en el proceso de restauraci칩n: {str(e)}")
Exception: Error en el proceso de restauraci칩n: La restauraci칩n excedi칩 el tiempo m치ximo de espera (30 segundos)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 273, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 02:02:21,846 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:02:21,847 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:02:21,849 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-25 02:02:21,849 - app.api.endpoints.backup - INFO - Creando archivo temporal en backend: /tmp/restore_20250525_020221.sql
2025-05-25 02:02:21,850 - app.api.endpoints.backup - INFO - Archivo temporal creado correctamente en backend
2025-05-25 02:02:21,851 - app.api.endpoints.backup - INFO - Ejecutando comando de restauraci칩n: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /tmp/restore_20250525_020221.sql
2025-05-25 02:02:21,851 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n a las 2025-05-25 02:02:21.851229
2025-05-25 02:12:17,783 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:12:17,783 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:12:17,785 - app.api.endpoints.backup - INFO - Iniciando proceso de restauraci칩n...
2025-05-25 02:12:17,786 - app.api.endpoints.backup - INFO - Proceso MySQL creado, enviando datos...
2025-05-25 02:14:29,782 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:14:29,782 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:14:29,784 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_021429.sql
2025-05-25 02:14:29,787 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:14:29,790 - app.api.endpoints.backup - INFO - Proceso MySQL creado, enviando datos...
2025-05-25 02:21:01,514 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:21:01,515 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:21:01,516 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_022101.sql
2025-05-25 02:21:01,518 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:21:01,520 - app.api.endpoints.backup - INFO - Ejecutando comando: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /app/backups/restore_20250525_022101.sql
2025-05-25 02:25:09,258 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:25:09,259 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:25:09,260 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_022509.sql
2025-05-25 02:25:09,262 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:25:09,263 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:34:47,978 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:34:47,978 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:34:47,979 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_023447.sql
2025-05-25 02:34:47,981 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:34:47,983 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:34:48,005 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: 
2025-05-25 02:34:48,005 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: 
2025-05-25 02:34:48,005 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 261, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 278, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 02:34:48,013 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 02:36:43,526 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:36:43,527 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:36:43,528 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_023643.sql
2025-05-25 02:36:43,530 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:36:43,532 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:36:43,532 - app.api.endpoints.backup - INFO - Ejecutando comando: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /app/backups/restore_20250525_023643.sql
2025-05-25 02:38:57,660 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:38:57,661 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:38:57,661 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_023857.sql
2025-05-25 02:38:57,663 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:38:57,664 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:38:57,666 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_023857.sql  True
2025-05-25 02:38:57,668 - app.api.endpoints.backup - INFO - 쮻칩nde est치 'mysql'?  /usr/bin/mysql
2025-05-25 02:38:57,669 - app.api.endpoints.backup - INFO - Ejecutando: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db con stdin desde /app/backups/restore_20250525_023857.sql
2025-05-25 02:40:17,822 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:40:17,823 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:40:17,824 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_024017.sql
2025-05-25 02:40:17,826 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:40:17,827 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:40:17,829 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_024017.sql  True
2025-05-25 02:40:17,831 - app.api.endpoints.backup - INFO - 쮻칩nde est치 'mysql'?  /usr/bin/mysql
2025-05-25 02:40:17,831 - app.api.endpoints.backup - INFO - Ejecutando: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db con stdin desde /app/backups/restore_20250525_024017.sql
2025-05-25 02:40:17,846 - app.api.endpoints.backup - INFO - Archivo SQL abierto, iniciando proceso MySQL...
2025-05-25 02:40:17,848 - app.api.endpoints.backup - INFO - Proceso MySQL iniciado, esperando comunicaci칩n...
2025-05-25 02:40:47,873 - app.api.endpoints.backup - ERROR - El proceso MySQL excedi칩 el timeout de 30 segundos
2025-05-25 02:40:47,874 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Timeout al restaurar la base de datos
2025-05-25 02:40:47,874 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 194, in _do_restore_file
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command '['mysql', '-h', 'db', '-P', '3306', '-u', 'root', '-pcontrasenaprueba', 'sustainability_db']' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 258, in restore_backup
    except Exception as e:
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 208, in _do_restore_file
    temp_file = None
RuntimeError: Timeout al restaurar la base de datos

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 272, in restore_backup
    if temp_file and os.path.exists(temp_file):
fastapi.exceptions.HTTPException
2025-05-25 02:40:47,890 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 02:41:47,642 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:41:47,643 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:41:47,644 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_024147.sql
2025-05-25 02:41:47,646 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:41:47,647 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:41:47,649 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_024147.sql  True
2025-05-25 02:41:47,650 - app.api.endpoints.backup - INFO - 쮻칩nde est치 'mysql'?  /usr/bin/mysql
2025-05-25 02:41:47,650 - app.api.endpoints.backup - INFO - Ejecutando comando: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /app/backups/restore_20250525_024147.sql
2025-05-25 02:42:17,681 - app.api.endpoints.backup - ERROR - El proceso MySQL excedi칩 el timeout de 30 segundos
2025-05-25 02:42:17,681 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Timeout al restaurar la base de datos
2025-05-25 02:42:17,682 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 176, in _do_restore_file
    result = subprocess.run(
  File "/usr/local/lib/python3.10/subprocess.py", line 505, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command 'mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db < /app/backups/restore_20250525_024147.sql' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 247, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 197, in _do_restore_file
    raise RuntimeError("Timeout al restaurar la base de datos")
RuntimeError: Timeout al restaurar la base de datos

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 261, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 02:42:17,692 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 02:45:28,189 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:45:28,190 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:45:28,191 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_024528.sql
2025-05-25 02:45:28,193 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:45:28,194 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:45:28,196 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_024528.sql  True
2025-05-25 02:45:28,197 - app.api.endpoints.backup - INFO - 쮻칩nde est치 'mysql'?  /usr/bin/mysql
2025-05-25 02:45:28,198 - app.api.endpoints.backup - INFO - Ejecutando: mysql -h db -P 3306 -u root -pcontrasenaprueba sustainability_db con stdin desde /app/backups/restore_20250525_024528.sql
2025-05-25 02:45:28,210 - app.api.endpoints.backup - INFO - Archivo SQL abierto, iniciando proceso MySQL...
2025-05-25 02:45:28,211 - app.api.endpoints.backup - INFO - Proceso MySQL iniciado, esperando comunicaci칩n...
2025-05-25 02:45:58,241 - app.api.endpoints.backup - ERROR - El proceso MySQL excedi칩 el timeout de 30 segundos
2025-05-25 02:45:58,242 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Timeout al restaurar la base de datos
2025-05-25 02:45:58,242 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 194, in _do_restore_file
    stdout, stderr = proc.communicate(timeout=30)
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/local/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command '['mysql', '-h', 'db', '-P', '3306', '-u', 'root', '-pcontrasenaprueba', 'sustainability_db']' timed out after 30 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 258, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 208, in _do_restore_file
    raise RuntimeError("Timeout al restaurar la base de datos")
RuntimeError: Timeout al restaurar la base de datos

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 272, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 02:45:58,251 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 02:49:15,914 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 02:49:15,914 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 02:49:15,915 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_024915.sql
2025-05-25 02:49:15,918 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 02:49:15,919 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:49:15,920 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_024915.sql  True
2025-05-25 02:49:15,921 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 02:49:15,937 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 02:49:15,937 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 02:49:15,994 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 02:49:15,995 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 02:49:15,995 - app.api.endpoints.backup - ERROR - Error durante la restauraci칩n: MySQLCursor.execute() got an unexpected keyword argument 'multi'
2025-05-25 02:49:15,996 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 02:49:15,996 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error durante la restauraci칩n: MySQLCursor.execute() got an unexpected keyword argument 'multi'
2025-05-25 02:49:15,996 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 187, in _do_restore_file
    for result in cursor.execute(sql, multi=True):
TypeError: MySQLCursor.execute() got an unexpected keyword argument 'multi'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 254, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 198, in _do_restore_file
    raise RuntimeError(f"Error durante la restauraci칩n: {str(e)}")
RuntimeError: Error durante la restauraci칩n: MySQLCursor.execute() got an unexpected keyword argument 'multi'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 268, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 02:49:16,009 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 14:23:15,822 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:23:15,823 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:23:15,824 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_142315.sql
2025-05-25 14:23:15,826 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:23:15,828 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:23:15,829 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_142315.sql  True
2025-05-25 14:23:15,830 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:23:15,833 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:23:15,833 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:23:15,834 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:23:15,834 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:23:15,846 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:23:15,846 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:23:15,847 - app.api.endpoints.backup - INFO - Ejecutando statement: /*M!999999\- enable the sandbox mode */ 
-- MariaDB dump 10.19  Distrib 10.11.11-MariaDB, for debian...
2025-05-25 14:23:15,847 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */...
2025-05-25 14:23:15,848 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */...
2025-05-25 14:23:15,848 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET NAMES utf8mb4 */...
2025-05-25 14:23:15,849 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */...
2025-05-25 14:23:15,849 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40103 SET TIME_ZONE='+00:00' */...
2025-05-25 14:23:15,850 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */...
2025-05-25 14:23:15,851 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */...
2025-05-25 14:23:15,851 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */...
2025-05-25 14:23:15,852 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */...
2025-05-25 14:23:15,852 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `actions`
--

DROP TABLE IF EXISTS `actions`...
2025-05-25 14:23:15,885 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:15,886 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:15,886 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `actions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `description` text NOT NULL,
  `diff...
2025-05-25 14:23:15,918 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:15,919 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `actions`
--

LOCK TABLES `actions` WRITE...
2025-05-25 14:23:15,922 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `actions` DISABLE KEYS */...
2025-05-25 14:23:15,925 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `actions` ENABLE KEYS */...
2025-05-25 14:23:15,927 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:15,928 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `alembic_version`
--

DROP TABLE IF EXISTS `alembic_version`...
2025-05-25 14:23:15,939 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:15,940 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:15,940 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `alembic_version` (
  `version_num` varchar(32) NOT NULL,
  PRIMARY KEY (`version_num`...
2025-05-25 14:23:15,959 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:15,959 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `alembic_version`
--

LOCK TABLES `alembic_version` WRITE...
2025-05-25 14:23:15,960 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `alembic_version` DISABLE KEYS */...
2025-05-25 14:23:15,962 - app.api.endpoints.backup - INFO - Ejecutando statement: 
INSERT INTO `alembic_version` VALUES
('8e597e8d9c1b')...
2025-05-25 14:23:15,963 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `alembic_version` ENABLE KEYS */...
2025-05-25 14:23:15,970 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:15,970 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `assessments`
--

DROP TABLE IF EXISTS `assessments`...
2025-05-25 14:23:15,989 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:15,989 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:15,990 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `assessments` (
  `id` int NOT NULL AUTO_INCREMENT,
  `score` int NOT NULL,
  `materia...
2025-05-25 14:23:16,016 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,017 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `assessments`
--

LOCK TABLES `assessments` WRITE...
2025-05-25 14:23:16,019 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `assessments` DISABLE KEYS */...
2025-05-25 14:23:16,022 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `assessments` ENABLE KEYS */...
2025-05-25 14:23:16,027 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,027 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `diagnosis_indicators`
--

DROP TABLE IF EXISTS `diagnosis_indicat...
2025-05-25 14:23:16,045 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,046 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,046 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `diagnosis_indicators` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
 ...
2025-05-25 14:23:16,075 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,075 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `diagnosis_indicators`
--

LOCK TABLES `diagnosis_indicators` WRITE...
2025-05-25 14:23:16,077 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `diagnosis_indicators` DISABLE KEYS */...
2025-05-25 14:23:16,079 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `diagnosis_indicators` ENABLE KEYS */...
2025-05-25 14:23:16,081 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,082 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `diagnosis_indicators_qualitative`
--

DROP TABLE IF EXISTS `diagn...
2025-05-25 14:23:16,094 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,095 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,095 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `diagnosis_indicators_qualitative` (
  `diagnostic_indicator_id` int NOT NULL,
  `resp...
2025-05-25 14:23:16,115 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,116 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `diagnosis_indicators_qualitative`
--

LOCK TABLES `diagnosis_indicat...
2025-05-25 14:23:16,118 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `diagnosis_indicators_qualitative` DISABLE KEYS */...
2025-05-25 14:23:16,121 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `diagnosis_indicators_qualitative` ENABLE KEYS */...
2025-05-25 14:23:16,124 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,125 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `diagnosis_indicators_quantitative`
--

DROP TABLE IF EXISTS `diag...
2025-05-25 14:23:16,139 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,139 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,140 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `diagnosis_indicators_quantitative` (
  `diagnostic_indicator_id` int NOT NULL,
  `num...
2025-05-25 14:23:16,161 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,161 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `diagnosis_indicators_quantitative`
--

LOCK TABLES `diagnosis_indica...
2025-05-25 14:23:16,162 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `diagnosis_indicators_quantitative` DISABLE KEYS */...
2025-05-25 14:23:16,165 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `diagnosis_indicators_quantitative` ENABLE KEYS */...
2025-05-25 14:23:16,168 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,168 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `dimensions`
--

DROP TABLE IF EXISTS `dimensions`...
2025-05-25 14:23:16,184 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,185 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,186 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `dimensions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `...
2025-05-25 14:23:16,210 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,211 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `dimensions`
--

LOCK TABLES `dimensions` WRITE...
2025-05-25 14:23:16,213 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `dimensions` DISABLE KEYS */...
2025-05-25 14:23:16,216 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `dimensions` ENABLE KEYS */...
2025-05-25 14:23:16,219 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,220 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `goals`
--

DROP TABLE IF EXISTS `goals`...
2025-05-25 14:23:16,234 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,235 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,236 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `goals` (
  `ods_id` int NOT NULL,
  `goal_number` varchar(2) NOT NULL,
  `description...
2025-05-25 14:23:16,261 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,262 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `goals`
--

LOCK TABLES `goals` WRITE...
2025-05-25 14:23:16,263 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `goals` DISABLE KEYS */...
2025-05-25 14:23:16,267 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `goals` ENABLE KEYS */...
2025-05-25 14:23:16,270 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,272 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `heritage_resource_social_networks`
--

DROP TABLE IF EXISTS `heri...
2025-05-25 14:23:16,288 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,289 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,290 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `heritage_resource_social_networks` (
  `id` int NOT NULL AUTO_INCREMENT,
  `resource_...
2025-05-25 14:23:16,316 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,317 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `heritage_resource_social_networks`
--

LOCK TABLES `heritage_resourc...
2025-05-25 14:23:16,318 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `heritage_resource_social_networks` DISABLE KEYS */...
2025-05-25 14:23:16,322 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `heritage_resource_social_networks` ENABLE KEYS */...
2025-05-25 14:23:16,325 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,325 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `heritage_resource_typologies`
--

DROP TABLE IF EXISTS `heritage_...
2025-05-25 14:23:16,338 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,339 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,340 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `heritage_resource_typologies` (
  `id` int NOT NULL AUTO_INCREMENT,
  `resource_id` i...
2025-05-25 14:23:16,366 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,367 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `heritage_resource_typologies`
--

LOCK TABLES `heritage_resource_typ...
2025-05-25 14:23:16,368 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `heritage_resource_typologies` DISABLE KEYS */...
2025-05-25 14:23:16,371 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `heritage_resource_typologies` ENABLE KEYS */...
2025-05-25 14:23:16,374 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,375 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `heritage_resources`
--

DROP TABLE IF EXISTS `heritage_resources`...
2025-05-25 14:23:16,394 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,395 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,395 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `heritage_resources` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT N...
2025-05-25 14:23:16,425 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,426 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `heritage_resources`
--

LOCK TABLES `heritage_resources` WRITE...
2025-05-25 14:23:16,428 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `heritage_resources` DISABLE KEYS */...
2025-05-25 14:23:16,430 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `heritage_resources` ENABLE KEYS */...
2025-05-25 14:23:16,433 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,434 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `material_topics`
--

DROP TABLE IF EXISTS `material_topics`...
2025-05-25 14:23:16,454 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,455 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,456 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `material_topics` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL...
2025-05-25 14:23:16,491 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,491 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `material_topics`
--

LOCK TABLES `material_topics` WRITE...
2025-05-25 14:23:16,493 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `material_topics` DISABLE KEYS */...
2025-05-25 14:23:16,496 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `material_topics` ENABLE KEYS */...
2025-05-25 14:23:16,499 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,500 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `ods`
--

DROP TABLE IF EXISTS `ods`...
2025-05-25 14:23:16,518 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,519 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,520 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `ods` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `descrip...
2025-05-25 14:23:16,553 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,554 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `ods`
--

LOCK TABLES `ods` WRITE...
2025-05-25 14:23:16,559 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `ods` DISABLE KEYS */...
2025-05-25 14:23:16,561 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `ods` ENABLE KEYS */...
2025-05-25 14:23:16,563 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,564 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `performance_indicators`
--

DROP TABLE IF EXISTS `performance_ind...
2025-05-25 14:23:16,579 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,580 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,580 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `performance_indicators` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,...
2025-05-25 14:23:16,609 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,610 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `performance_indicators`
--

LOCK TABLES `performance_indicators` WRI...
2025-05-25 14:23:16,612 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `performance_indicators` DISABLE KEYS */...
2025-05-25 14:23:16,614 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `performance_indicators` ENABLE KEYS */...
2025-05-25 14:23:16,617 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,617 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `performance_indicators_qualitative`
--

DROP TABLE IF EXISTS `per...
2025-05-25 14:23:16,630 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,631 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,631 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `performance_indicators_qualitative` (
  `performance_indicator_id` int NOT NULL,
  `r...
2025-05-25 14:23:16,652 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,653 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `performance_indicators_qualitative`
--

LOCK TABLES `performance_ind...
2025-05-25 14:23:16,655 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `performance_indicators_qualitative` DISABLE KEYS */...
2025-05-25 14:23:16,658 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `performance_indicators_qualitative` ENABLE KEYS */...
2025-05-25 14:23:16,660 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,661 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `performance_indicators_quantitative`
--

DROP TABLE IF EXISTS `pe...
2025-05-25 14:23:16,675 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,676 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,677 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `performance_indicators_quantitative` (
  `performance_indicator_id` int NOT NULL,
  `...
2025-05-25 14:23:16,697 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,699 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `performance_indicators_quantitative`
--

LOCK TABLES `performance_in...
2025-05-25 14:23:16,701 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `performance_indicators_quantitative` DISABLE KEYS */...
2025-05-25 14:23:16,705 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `performance_indicators_quantitative` ENABLE KEYS */...
2025-05-25 14:23:16,708 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,709 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `report_agreements`
--

DROP TABLE IF EXISTS `report_agreements`...
2025-05-25 14:23:16,727 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,728 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,728 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `report_agreements` (
  `id` int NOT NULL AUTO_INCREMENT,
  `agreement` text NOT NULL,...
2025-05-25 14:23:16,759 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,760 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `report_agreements`
--

LOCK TABLES `report_agreements` WRITE...
2025-05-25 14:23:16,761 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_agreements` DISABLE KEYS */...
2025-05-25 14:23:16,763 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_agreements` ENABLE KEYS */...
2025-05-25 14:23:16,767 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,768 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `report_bibliographies`
--

DROP TABLE IF EXISTS `report_bibliogra...
2025-05-25 14:23:16,790 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,790 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,791 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `report_bibliographies` (
  `id` int NOT NULL AUTO_INCREMENT,
  `reference` text NOT N...
2025-05-25 14:23:16,814 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,815 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `report_bibliographies`
--

LOCK TABLES `report_bibliographies` WRITE...
2025-05-25 14:23:16,817 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_bibliographies` DISABLE KEYS */...
2025-05-25 14:23:16,821 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_bibliographies` ENABLE KEYS */...
2025-05-25 14:23:16,824 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,825 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `report_logos`
--

DROP TABLE IF EXISTS `report_logos`...
2025-05-25 14:23:16,838 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,839 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,840 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `report_logos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `logo` varchar(255) NOT NULL,
 ...
2025-05-25 14:23:16,864 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,864 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `report_logos`
--

LOCK TABLES `report_logos` WRITE...
2025-05-25 14:23:16,867 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_logos` DISABLE KEYS */...
2025-05-25 14:23:16,870 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_logos` ENABLE KEYS */...
2025-05-25 14:23:16,872 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,873 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `report_norms`
--

DROP TABLE IF EXISTS `report_norms`...
2025-05-25 14:23:16,887 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,889 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,890 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `report_norms` (
  `id` int NOT NULL AUTO_INCREMENT,
  `norm` text NOT NULL,
  `report...
2025-05-25 14:23:16,913 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,913 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `report_norms`
--

LOCK TABLES `report_norms` WRITE...
2025-05-25 14:23:16,914 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_norms` DISABLE KEYS */...
2025-05-25 14:23:16,918 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_norms` ENABLE KEYS */...
2025-05-25 14:23:16,921 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,922 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `report_photos`
--

DROP TABLE IF EXISTS `report_photos`...
2025-05-25 14:23:16,937 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,938 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,940 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `report_photos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `photo` varchar(255) NOT NULL,...
2025-05-25 14:23:16,964 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:16,965 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `report_photos`
--

LOCK TABLES `report_photos` WRITE...
2025-05-25 14:23:16,967 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_photos` DISABLE KEYS */...
2025-05-25 14:23:16,970 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `report_photos` ENABLE KEYS */...
2025-05-25 14:23:16,974 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:16,974 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `secondary_ods_actions`
--

DROP TABLE IF EXISTS `secondary_ods_ac...
2025-05-25 14:23:16,991 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:16,991 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:16,992 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `secondary_ods_actions` (
  `action_id` int NOT NULL,
  `specific_objective_id` int NO...
2025-05-25 14:23:17,020 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:17,021 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `secondary_ods_actions`
--

LOCK TABLES `secondary_ods_actions` WRITE...
2025-05-25 14:23:17,023 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `secondary_ods_actions` DISABLE KEYS */...
2025-05-25 14:23:17,026 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `secondary_ods_actions` ENABLE KEYS */...
2025-05-25 14:23:17,030 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:17,030 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `secondary_ods_material_topics`
--

DROP TABLE IF EXISTS `secondar...
2025-05-25 14:23:17,047 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:17,047 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:17,048 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `secondary_ods_material_topics` (
  `ods_id` int NOT NULL,
  `material_topic_id` int N...
2025-05-25 14:23:17,077 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:17,077 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `secondary_ods_material_topics`
--

LOCK TABLES `secondary_ods_materi...
2025-05-25 14:23:17,079 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `secondary_ods_material_topics` DISABLE KEYS */...
2025-05-25 14:23:17,083 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `secondary_ods_material_topics` ENABLE KEYS */...
2025-05-25 14:23:17,086 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:17,087 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `specific_objectives`
--

DROP TABLE IF EXISTS `specific_objective...
2025-05-25 14:23:17,106 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:17,107 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:17,107 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `specific_objectives` (
  `id` int NOT NULL AUTO_INCREMENT,
  `description` text NOT N...
2025-05-25 14:23:17,143 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:17,144 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `specific_objectives`
--

LOCK TABLES `specific_objectives` WRITE...
2025-05-25 14:23:17,146 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `specific_objectives` DISABLE KEYS */...
2025-05-25 14:23:17,149 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `specific_objectives` ENABLE KEYS */...
2025-05-25 14:23:17,152 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:17,153 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `stakeholders`
--

DROP TABLE IF EXISTS `stakeholders`...
2025-05-25 14:23:17,169 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:17,170 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:17,171 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `stakeholders` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
 ...
2025-05-25 14:23:17,203 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:17,204 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `stakeholders`
--

LOCK TABLES `stakeholders` WRITE...
2025-05-25 14:23:17,207 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `stakeholders` DISABLE KEYS */...
2025-05-25 14:23:17,210 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `stakeholders` ENABLE KEYS */...
2025-05-25 14:23:17,212 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:17,213 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `sustainability_reports`
--

DROP TABLE IF EXISTS `sustainability_...
2025-05-25 14:23:17,238 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:17,239 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:17,241 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `sustainability_reports` (
  `id` int NOT NULL AUTO_INCREMENT,
  `heritage_resource_id...
2025-05-25 14:23:17,286 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:23:17,287 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Dumping data for table `sustainability_reports`
--

LOCK TABLES `sustainability_reports` WRI...
2025-05-25 14:23:17,292 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `sustainability_reports` DISABLE KEYS */...
2025-05-25 14:23:17,294 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40000 ALTER TABLE `sustainability_reports` ENABLE KEYS */...
2025-05-25 14:23:17,296 - app.api.endpoints.backup - INFO - Ejecutando statement: 
UNLOCK TABLES...
2025-05-25 14:23:17,297 - app.api.endpoints.backup - INFO - Ejecutando statement: 

--
-- Table structure for table `sustainability_team_members`
--

DROP TABLE IF EXISTS `sustainabi...
2025-05-25 14:23:17,302 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:23:17,302 - app.api.endpoints.backup - INFO - Ejecutando statement: 
/*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:23:17,303 - app.api.endpoints.backup - INFO - Ejecutando statement: 
CREATE TABLE `sustainability_team_members` (
  `id` int NOT NULL AUTO_INCREMENT,
  `type` enum('man...
2025-05-25 14:25:43,900 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:25:43,901 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:25:43,901 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_142543.sql
2025-05-25 14:25:43,904 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:25:43,905 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:25:43,906 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_142543.sql  True
2025-05-25 14:25:43,907 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:25:43,909 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:25:43,909 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:25:43,910 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:25:43,910 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:25:43,921 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:25:43,921 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:25:43,922 - app.api.endpoints.backup - INFO - Ejecutando statement: /*M!999999\- enable the sandbox mode */ 
-- MariaDB dump 10.19  Distrib 10.11.11-MariaDB, for debian...
2025-05-25 14:25:43,922 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */...
2025-05-25 14:25:43,923 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */...
2025-05-25 14:25:43,924 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET NAMES utf8mb4 */...
2025-05-25 14:25:43,924 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */...
2025-05-25 14:25:43,925 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40103 SET TIME_ZONE='+00:00' */...
2025-05-25 14:25:43,925 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */...
2025-05-25 14:25:43,926 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */...
2025-05-25 14:25:43,926 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */...
2025-05-25 14:25:43,927 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */...
2025-05-25 14:25:43,927 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `actions`
--

DROP TABLE IF EXISTS `actions`...
2025-05-25 14:25:43,949 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:43,950 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:43,950 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `actions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `description` text NOT NULL,
  `diffi...
2025-05-25 14:25:43,981 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:43,982 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `actions`
--

LOCK TABLES `actions` WRITE...
2025-05-25 14:25:43,984 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `actions` DISABLE KEYS */...
2025-05-25 14:25:43,987 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `actions` ENABLE KEYS */...
2025-05-25 14:25:43,990 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:43,991 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `alembic_version`
--

DROP TABLE IF EXISTS `alembic_version`...
2025-05-25 14:25:44,000 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,001 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,002 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `alembic_version` (
  `version_num` varchar(32) NOT NULL,
  PRIMARY KEY (`version_num`)...
2025-05-25 14:25:44,021 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,022 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `alembic_version`
--

LOCK TABLES `alembic_version` WRITE...
2025-05-25 14:25:44,024 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `alembic_version` DISABLE KEYS */...
2025-05-25 14:25:44,026 - app.api.endpoints.backup - INFO - Ejecutando statement: INSERT INTO `alembic_version` VALUES
('8e597e8d9c1b')...
2025-05-25 14:25:44,027 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `alembic_version` ENABLE KEYS */...
2025-05-25 14:25:44,033 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,033 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `assessments`
--

DROP TABLE IF EXISTS `assessments`...
2025-05-25 14:25:44,050 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,051 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,052 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `assessments` (
  `id` int NOT NULL AUTO_INCREMENT,
  `score` int NOT NULL,
  `material...
2025-05-25 14:25:44,082 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,083 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `assessments`
--

LOCK TABLES `assessments` WRITE...
2025-05-25 14:25:44,085 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `assessments` DISABLE KEYS */...
2025-05-25 14:25:44,088 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `assessments` ENABLE KEYS */...
2025-05-25 14:25:44,092 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,094 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `diagnosis_indicators`
--

DROP TABLE IF EXISTS `diagnosis_indicator...
2025-05-25 14:25:44,111 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,112 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,112 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `diagnosis_indicators` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
  ...
2025-05-25 14:25:44,143 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,144 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `diagnosis_indicators`
--

LOCK TABLES `diagnosis_indicators` WRITE...
2025-05-25 14:25:44,146 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `diagnosis_indicators` DISABLE KEYS */...
2025-05-25 14:25:44,148 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `diagnosis_indicators` ENABLE KEYS */...
2025-05-25 14:25:44,150 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,151 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `diagnosis_indicators_qualitative`
--

DROP TABLE IF EXISTS `diagnos...
2025-05-25 14:25:44,162 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,163 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,163 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `diagnosis_indicators_qualitative` (
  `diagnostic_indicator_id` int NOT NULL,
  `respo...
2025-05-25 14:25:44,183 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,184 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `diagnosis_indicators_qualitative`
--

LOCK TABLES `diagnosis_indicator...
2025-05-25 14:25:44,186 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `diagnosis_indicators_qualitative` DISABLE KEYS */...
2025-05-25 14:25:44,188 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `diagnosis_indicators_qualitative` ENABLE KEYS */...
2025-05-25 14:25:44,191 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,193 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `diagnosis_indicators_quantitative`
--

DROP TABLE IF EXISTS `diagno...
2025-05-25 14:25:44,208 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,209 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,210 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `diagnosis_indicators_quantitative` (
  `diagnostic_indicator_id` int NOT NULL,
  `nume...
2025-05-25 14:25:44,228 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,228 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `diagnosis_indicators_quantitative`
--

LOCK TABLES `diagnosis_indicato...
2025-05-25 14:25:44,230 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `diagnosis_indicators_quantitative` DISABLE KEYS */...
2025-05-25 14:25:44,232 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `diagnosis_indicators_quantitative` ENABLE KEYS */...
2025-05-25 14:25:44,234 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,235 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `dimensions`
--

DROP TABLE IF EXISTS `dimensions`...
2025-05-25 14:25:44,252 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,253 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,254 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `dimensions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `d...
2025-05-25 14:25:44,278 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,278 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `dimensions`
--

LOCK TABLES `dimensions` WRITE...
2025-05-25 14:25:44,281 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `dimensions` DISABLE KEYS */...
2025-05-25 14:25:44,283 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `dimensions` ENABLE KEYS */...
2025-05-25 14:25:44,290 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,291 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `goals`
--

DROP TABLE IF EXISTS `goals`...
2025-05-25 14:25:44,304 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,304 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,305 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `goals` (
  `ods_id` int NOT NULL,
  `goal_number` varchar(2) NOT NULL,
  `description`...
2025-05-25 14:25:44,330 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,331 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `goals`
--

LOCK TABLES `goals` WRITE...
2025-05-25 14:25:44,332 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `goals` DISABLE KEYS */...
2025-05-25 14:25:44,335 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `goals` ENABLE KEYS */...
2025-05-25 14:25:44,338 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,338 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `heritage_resource_social_networks`
--

DROP TABLE IF EXISTS `herita...
2025-05-25 14:25:44,355 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,356 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,357 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `heritage_resource_social_networks` (
  `id` int NOT NULL AUTO_INCREMENT,
  `resource_i...
2025-05-25 14:25:44,393 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,394 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `heritage_resource_social_networks`
--

LOCK TABLES `heritage_resource_...
2025-05-25 14:25:44,395 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `heritage_resource_social_networks` DISABLE KEYS */...
2025-05-25 14:25:44,397 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `heritage_resource_social_networks` ENABLE KEYS */...
2025-05-25 14:25:44,399 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,399 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `heritage_resource_typologies`
--

DROP TABLE IF EXISTS `heritage_re...
2025-05-25 14:25:44,413 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,414 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,414 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `heritage_resource_typologies` (
  `id` int NOT NULL AUTO_INCREMENT,
  `resource_id` in...
2025-05-25 14:25:44,439 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,440 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `heritage_resource_typologies`
--

LOCK TABLES `heritage_resource_typol...
2025-05-25 14:25:44,442 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `heritage_resource_typologies` DISABLE KEYS */...
2025-05-25 14:25:44,444 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `heritage_resource_typologies` ENABLE KEYS */...
2025-05-25 14:25:44,447 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,448 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `heritage_resources`
--

DROP TABLE IF EXISTS `heritage_resources`...
2025-05-25 14:25:44,469 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,469 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,470 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `heritage_resources` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NU...
2025-05-25 14:25:44,498 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,499 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `heritage_resources`
--

LOCK TABLES `heritage_resources` WRITE...
2025-05-25 14:25:44,503 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `heritage_resources` DISABLE KEYS */...
2025-05-25 14:25:44,506 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `heritage_resources` ENABLE KEYS */...
2025-05-25 14:25:44,510 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,511 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `material_topics`
--

DROP TABLE IF EXISTS `material_topics`...
2025-05-25 14:25:44,529 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,529 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,530 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `material_topics` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,...
2025-05-25 14:25:44,564 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,565 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `material_topics`
--

LOCK TABLES `material_topics` WRITE...
2025-05-25 14:25:44,568 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `material_topics` DISABLE KEYS */...
2025-05-25 14:25:44,571 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `material_topics` ENABLE KEYS */...
2025-05-25 14:25:44,573 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,574 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `ods`
--

DROP TABLE IF EXISTS `ods`...
2025-05-25 14:25:44,591 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,592 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,593 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `ods` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `descript...
2025-05-25 14:25:44,627 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,628 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `ods`
--

LOCK TABLES `ods` WRITE...
2025-05-25 14:25:44,631 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `ods` DISABLE KEYS */...
2025-05-25 14:25:44,635 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `ods` ENABLE KEYS */...
2025-05-25 14:25:44,637 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,638 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `performance_indicators`
--

DROP TABLE IF EXISTS `performance_indic...
2025-05-25 14:25:44,651 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,652 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,653 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `performance_indicators` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
...
2025-05-25 14:25:44,678 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,679 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `performance_indicators`
--

LOCK TABLES `performance_indicators` WRITE...
2025-05-25 14:25:44,682 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `performance_indicators` DISABLE KEYS */...
2025-05-25 14:25:44,685 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `performance_indicators` ENABLE KEYS */...
2025-05-25 14:25:44,687 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,688 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `performance_indicators_qualitative`
--

DROP TABLE IF EXISTS `perfo...
2025-05-25 14:25:44,700 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,701 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,702 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `performance_indicators_qualitative` (
  `performance_indicator_id` int NOT NULL,
  `re...
2025-05-25 14:25:44,721 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,722 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `performance_indicators_qualitative`
--

LOCK TABLES `performance_indic...
2025-05-25 14:25:44,723 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `performance_indicators_qualitative` DISABLE KEYS */...
2025-05-25 14:25:44,726 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `performance_indicators_qualitative` ENABLE KEYS */...
2025-05-25 14:25:44,728 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,728 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `performance_indicators_quantitative`
--

DROP TABLE IF EXISTS `perf...
2025-05-25 14:25:44,742 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,743 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,744 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `performance_indicators_quantitative` (
  `performance_indicator_id` int NOT NULL,
  `n...
2025-05-25 14:25:44,768 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,768 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `performance_indicators_quantitative`
--

LOCK TABLES `performance_indi...
2025-05-25 14:25:44,770 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `performance_indicators_quantitative` DISABLE KEYS */...
2025-05-25 14:25:44,772 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `performance_indicators_quantitative` ENABLE KEYS */...
2025-05-25 14:25:44,773 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,774 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `report_agreements`
--

DROP TABLE IF EXISTS `report_agreements`...
2025-05-25 14:25:44,788 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,789 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,790 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_agreements` (
  `id` int NOT NULL AUTO_INCREMENT,
  `agreement` text NOT NULL,
...
2025-05-25 14:25:44,817 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,818 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `report_agreements`
--

LOCK TABLES `report_agreements` WRITE...
2025-05-25 14:25:44,820 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_agreements` DISABLE KEYS */...
2025-05-25 14:25:44,822 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_agreements` ENABLE KEYS */...
2025-05-25 14:25:44,825 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,826 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `report_bibliographies`
--

DROP TABLE IF EXISTS `report_bibliograph...
2025-05-25 14:25:44,847 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,848 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,848 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_bibliographies` (
  `id` int NOT NULL AUTO_INCREMENT,
  `reference` text NOT NU...
2025-05-25 14:25:44,881 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,882 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `report_bibliographies`
--

LOCK TABLES `report_bibliographies` WRITE...
2025-05-25 14:25:44,883 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_bibliographies` DISABLE KEYS */...
2025-05-25 14:25:44,886 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_bibliographies` ENABLE KEYS */...
2025-05-25 14:25:44,889 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,890 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `report_logos`
--

DROP TABLE IF EXISTS `report_logos`...
2025-05-25 14:25:44,908 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,909 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,910 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_logos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `logo` varchar(255) NOT NULL,
  ...
2025-05-25 14:25:44,939 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,940 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `report_logos`
--

LOCK TABLES `report_logos` WRITE...
2025-05-25 14:25:44,941 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_logos` DISABLE KEYS */...
2025-05-25 14:25:44,944 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_logos` ENABLE KEYS */...
2025-05-25 14:25:44,946 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,947 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `report_norms`
--

DROP TABLE IF EXISTS `report_norms`...
2025-05-25 14:25:44,962 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:44,963 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:44,963 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_norms` (
  `id` int NOT NULL AUTO_INCREMENT,
  `norm` text NOT NULL,
  `report_...
2025-05-25 14:25:44,986 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:44,987 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `report_norms`
--

LOCK TABLES `report_norms` WRITE...
2025-05-25 14:25:44,988 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_norms` DISABLE KEYS */...
2025-05-25 14:25:44,991 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_norms` ENABLE KEYS */...
2025-05-25 14:25:44,993 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:44,994 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `report_photos`
--

DROP TABLE IF EXISTS `report_photos`...
2025-05-25 14:25:45,010 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:45,011 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:45,011 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_photos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `photo` varchar(255) NOT NULL,
...
2025-05-25 14:25:45,035 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:45,035 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `report_photos`
--

LOCK TABLES `report_photos` WRITE...
2025-05-25 14:25:45,037 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_photos` DISABLE KEYS */...
2025-05-25 14:25:45,039 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `report_photos` ENABLE KEYS */...
2025-05-25 14:25:45,041 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:45,041 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `secondary_ods_actions`
--

DROP TABLE IF EXISTS `secondary_ods_acti...
2025-05-25 14:25:45,059 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:45,060 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:45,060 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `secondary_ods_actions` (
  `action_id` int NOT NULL,
  `specific_objective_id` int NOT...
2025-05-25 14:25:45,089 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:45,090 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `secondary_ods_actions`
--

LOCK TABLES `secondary_ods_actions` WRITE...
2025-05-25 14:25:45,091 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `secondary_ods_actions` DISABLE KEYS */...
2025-05-25 14:25:45,094 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `secondary_ods_actions` ENABLE KEYS */...
2025-05-25 14:25:45,096 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:45,097 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `secondary_ods_material_topics`
--

DROP TABLE IF EXISTS `secondary_...
2025-05-25 14:25:45,111 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:45,112 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:45,112 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `secondary_ods_material_topics` (
  `ods_id` int NOT NULL,
  `material_topic_id` int NO...
2025-05-25 14:25:45,137 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:45,138 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `secondary_ods_material_topics`
--

LOCK TABLES `secondary_ods_material...
2025-05-25 14:25:45,139 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `secondary_ods_material_topics` DISABLE KEYS */...
2025-05-25 14:25:45,141 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `secondary_ods_material_topics` ENABLE KEYS */...
2025-05-25 14:25:45,144 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:45,145 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `specific_objectives`
--

DROP TABLE IF EXISTS `specific_objectives`...
2025-05-25 14:25:45,160 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:45,160 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:45,161 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `specific_objectives` (
  `id` int NOT NULL AUTO_INCREMENT,
  `description` text NOT NU...
2025-05-25 14:25:45,187 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:45,188 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `specific_objectives`
--

LOCK TABLES `specific_objectives` WRITE...
2025-05-25 14:25:45,191 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `specific_objectives` DISABLE KEYS */...
2025-05-25 14:25:45,193 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `specific_objectives` ENABLE KEYS */...
2025-05-25 14:25:45,195 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:45,196 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `stakeholders`
--

DROP TABLE IF EXISTS `stakeholders`...
2025-05-25 14:25:45,212 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:45,212 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:45,213 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `stakeholders` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  ...
2025-05-25 14:25:45,240 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:45,241 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `stakeholders`
--

LOCK TABLES `stakeholders` WRITE...
2025-05-25 14:25:45,243 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `stakeholders` DISABLE KEYS */...
2025-05-25 14:25:45,245 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `stakeholders` ENABLE KEYS */...
2025-05-25 14:25:45,248 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:45,249 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `sustainability_reports`
--

DROP TABLE IF EXISTS `sustainability_re...
2025-05-25 14:25:45,267 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET @saved_cs_client     = @@character_set_client */...
2025-05-25 14:25:45,268 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = utf8mb4 */...
2025-05-25 14:25:45,269 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `sustainability_reports` (
  `id` int NOT NULL AUTO_INCREMENT,
  `heritage_resource_id`...
2025-05-25 14:25:45,308 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40101 SET character_set_client = @saved_cs_client */...
2025-05-25 14:25:45,309 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Dumping data for table `sustainability_reports`
--

LOCK TABLES `sustainability_reports` WRITE...
2025-05-25 14:25:45,313 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `sustainability_reports` DISABLE KEYS */...
2025-05-25 14:25:45,316 - app.api.endpoints.backup - INFO - Ejecutando statement: /*!40000 ALTER TABLE `sustainability_reports` ENABLE KEYS */...
2025-05-25 14:25:45,319 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES...
2025-05-25 14:25:45,320 - app.api.endpoints.backup - INFO - Ejecutando statement: --
-- Table structure for table `sustainability_team_members`
--

DROP TABLE IF EXISTS `sustainabili...
2025-05-25 14:30:14,061 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:30:14,061 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:30:14,062 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_143014.sql
2025-05-25 14:30:14,064 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:30:14,066 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:30:14,067 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_143014.sql  True
2025-05-25 14:30:14,068 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:30:14,070 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:30:14,071 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:30:14,072 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:30:14,072 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:30:14,083 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:30:14,084 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:30:14,087 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:30:14,090 - app.api.endpoints.backup - ERROR - Error en statement: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:30:14,091 - app.api.endpoints.backup - ERROR - Error: (3730, "Cannot drop table 'actions' referenced by a foreign key constraint 'performance_indicators_ibfk_1' on table 'performance_indicators'.")
2025-05-25 14:30:14,091 - app.api.endpoints.backup - ERROR - Error de MySQL: (3730, "Cannot drop table 'actions' referenced by a foreign key constraint 'performance_indicators_ibfk_1' on table 'performance_indicators'.")
2025-05-25 14:30:14,092 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 14:30:14,092 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error de MySQL: (3730, "Cannot drop table 'actions' referenced by a foreign key constraint 'performance_indicators_ibfk_1' on table 'performance_indicators'.")
2025-05-25 14:30:14,093 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 242, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (3730, "Cannot drop table 'actions' referenced by a foreign key constraint 'performance_indicators_ibfk_1' on table 'performance_indicators'.")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 312, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 253, in _do_restore_file
    raise RuntimeError(f"Error de MySQL: {str(e)}")
RuntimeError: Error de MySQL: (3730, "Cannot drop table 'actions' referenced by a foreign key constraint 'performance_indicators_ibfk_1' on table 'performance_indicators'.")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 326, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 14:30:14,108 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 14:31:58,548 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:31:58,548 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:31:58,549 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_143158.sql
2025-05-25 14:31:58,551 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:31:58,552 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:31:58,555 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_143158.sql  True
2025-05-25 14:31:58,557 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:31:58,560 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:31:58,600 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:31:58,615 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:31:58,620 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:31:58,621 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:31:58,622 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:31:58,625 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:31:58,625 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:31:58,635 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:31:58,740 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `actions` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`difficulty` en...
2025-05-25 14:31:58,840 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `actions` WRITE;...
2025-05-25 14:31:58,842 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:58,842 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 14:31:58,883 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `alembic_version` (`version_num` varchar(32) NOT NULL,PRIMARY KEY (`version_num`)) ENGI...
2025-05-25 14:31:58,952 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `alembic_version` WRITE;...
2025-05-25 14:31:58,953 - app.api.endpoints.backup - INFO - Ejecutando statement: INSERT INTO `alembic_version` VALUES('8e597e8d9c1b');...
2025-05-25 14:31:58,954 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:58,963 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 14:31:59,008 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `assessments` (`id` int NOT NULL AUTO_INCREMENT,`score` int NOT NULL,`material_topic_id...
2025-05-25 14:31:59,095 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `assessments` WRITE;...
2025-05-25 14:31:59,096 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:59,096 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 14:31:59,143 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `diagnosis_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`type` en...
2025-05-25 14:31:59,298 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `diagnosis_indicators` WRITE;...
2025-05-25 14:31:59,299 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:59,300 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 14:31:59,370 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `diagnosis_indicators_qualitative` (`diagnostic_indicator_id` int NOT NULL,`response` t...
2025-05-25 14:31:59,481 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `diagnosis_indicators_qualitative` WRITE;...
2025-05-25 14:31:59,483 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:59,483 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 14:31:59,566 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `diagnosis_indicators_quantitative` (`diagnostic_indicator_id` int NOT NULL,`numeric_re...
2025-05-25 14:31:59,631 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `diagnosis_indicators_quantitative` WRITE;...
2025-05-25 14:31:59,632 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:59,633 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 14:31:59,679 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 14:31:59,760 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `dimensions` WRITE;...
2025-05-25 14:31:59,763 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:59,763 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `goals`;...
2025-05-25 14:31:59,800 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `goals` (`ods_id` int NOT NULL,`goal_number` varchar(2) NOT NULL,`description` text NOT...
2025-05-25 14:31:59,864 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `goals` WRITE;...
2025-05-25 14:31:59,866 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:31:59,866 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 14:31:59,918 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `heritage_resource_social_networks` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int...
2025-05-25 14:32:00,004 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `heritage_resource_social_networks` WRITE;...
2025-05-25 14:32:00,007 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,008 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 14:32:00,029 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `heritage_resource_typologies` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int DEFA...
2025-05-25 14:32:00,058 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `heritage_resource_typologies` WRITE;...
2025-05-25 14:32:00,061 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,062 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 14:32:00,084 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `heritage_resources` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`ow...
2025-05-25 14:32:00,116 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `heritage_resources` WRITE;...
2025-05-25 14:32:00,118 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,119 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 14:32:00,136 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `material_topics` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descr...
2025-05-25 14:32:00,170 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `material_topics` WRITE;...
2025-05-25 14:32:00,174 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,175 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `ods`;...
2025-05-25 14:32:00,190 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `ods` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`description` text...
2025-05-25 14:32:00,229 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `ods` WRITE;...
2025-05-25 14:32:00,232 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,232 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 14:32:00,248 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `performance_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`human_...
2025-05-25 14:32:00,273 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `performance_indicators` WRITE;...
2025-05-25 14:32:00,275 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,276 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 14:32:00,288 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `performance_indicators_qualitative` (`performance_indicator_id` int NOT NULL,`response...
2025-05-25 14:32:00,310 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `performance_indicators_qualitative` WRITE;...
2025-05-25 14:32:00,312 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,313 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 14:32:00,326 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `performance_indicators_quantitative` (`performance_indicator_id` int NOT NULL,`numeric...
2025-05-25 14:32:00,348 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `performance_indicators_quantitative` WRITE;...
2025-05-25 14:32:00,349 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,349 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 14:32:00,361 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_agreements` (`id` int NOT NULL AUTO_INCREMENT,`agreement` text NOT NULL,`report...
2025-05-25 14:32:00,382 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `report_agreements` WRITE;...
2025-05-25 14:32:00,383 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,384 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 14:32:00,397 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_bibliographies` (`id` int NOT NULL AUTO_INCREMENT,`reference` text NOT NULL,`re...
2025-05-25 14:32:00,420 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `report_bibliographies` WRITE;...
2025-05-25 14:32:00,422 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,423 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 14:32:00,437 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_logos` (`id` int NOT NULL AUTO_INCREMENT,`logo` varchar(255) NOT NULL,`report_i...
2025-05-25 14:32:00,462 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `report_logos` WRITE;...
2025-05-25 14:32:00,464 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,464 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 14:32:00,479 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_norms` (`id` int NOT NULL AUTO_INCREMENT,`norm` text NOT NULL,`report_id` int N...
2025-05-25 14:32:00,502 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `report_norms` WRITE;...
2025-05-25 14:32:00,503 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,504 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 14:32:00,519 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `report_photos` (`id` int NOT NULL AUTO_INCREMENT,`photo` varchar(255) NOT NULL,`report...
2025-05-25 14:32:00,542 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `report_photos` WRITE;...
2025-05-25 14:32:00,544 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,544 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 14:32:00,564 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `secondary_ods_actions` (`action_id` int NOT NULL,`specific_objective_id` int NOT NULL,...
2025-05-25 14:32:00,591 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `secondary_ods_actions` WRITE;...
2025-05-25 14:32:00,593 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,593 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 14:32:00,608 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `secondary_ods_material_topics` (`ods_id` int NOT NULL,`material_topic_id` int NOT NULL...
2025-05-25 14:32:00,635 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `secondary_ods_material_topics` WRITE;...
2025-05-25 14:32:00,636 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,637 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 14:32:00,653 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `specific_objectives` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`re...
2025-05-25 14:32:00,681 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `specific_objectives` WRITE;...
2025-05-25 14:32:00,684 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,684 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 14:32:00,699 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `stakeholders` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descript...
2025-05-25 14:32:00,727 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `stakeholders` WRITE;...
2025-05-25 14:32:00,729 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,730 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 14:32:00,747 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:32:00,782 - app.api.endpoints.backup - INFO - Ejecutando statement: LOCK TABLES `sustainability_reports` WRITE;...
2025-05-25 14:32:00,785 - app.api.endpoints.backup - INFO - Ejecutando statement: UNLOCK TABLES;...
2025-05-25 14:32:00,786 - app.api.endpoints.backup - INFO - Ejecutando statement: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 14:32:00,788 - app.api.endpoints.backup - INFO - Ejecutando statement: CREATE TABLE `sustainability_team_members` (`id` int NOT NULL AUTO_INCREMENT,`type` enum('manager','...
2025-05-25 14:37:54,580 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:37:54,581 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:37:54,582 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_143754.sql
2025-05-25 14:37:54,584 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:37:54,585 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:37:54,587 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_143754.sql  True
2025-05-25 14:37:54,588 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:37:54,591 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:37:54,591 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:37:54,592 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:37:54,593 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:37:54,594 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:37:54,594 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:37:54,608 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:37:54,609 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:37:54,613 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 114
2025-05-25 14:37:54,613 - app.api.endpoints.backup - INFO - Ejecutando statement 1/114: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:37:54,637 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 14:37:54,638 - app.api.endpoints.backup - INFO - Ejecutando statement 2/114: CREATE TABLE `actions` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`difficulty` en...
2025-05-25 14:37:54,673 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 14:37:54,673 - app.api.endpoints.backup - INFO - Ejecutando statement 3/114: LOCK TABLES `actions` WRITE;...
2025-05-25 14:37:54,676 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 14:37:54,677 - app.api.endpoints.backup - INFO - Ejecutando statement 4/114: UNLOCK TABLES;...
2025-05-25 14:37:54,677 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 14:37:54,678 - app.api.endpoints.backup - INFO - Ejecutando statement 5/114: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 14:37:54,688 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 14:37:54,689 - app.api.endpoints.backup - INFO - Ejecutando statement 6/114: CREATE TABLE `alembic_version` (`version_num` varchar(32) NOT NULL,PRIMARY KEY (`version_num`)) ENGI...
2025-05-25 14:37:54,711 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 14:37:54,711 - app.api.endpoints.backup - INFO - Ejecutando statement 7/114: LOCK TABLES `alembic_version` WRITE;...
2025-05-25 14:37:54,713 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 14:37:54,714 - app.api.endpoints.backup - INFO - Ejecutando statement 8/114: INSERT INTO `alembic_version` VALUES('8e597e8d9c1b');...
2025-05-25 14:37:54,715 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 14:37:54,715 - app.api.endpoints.backup - INFO - Ejecutando statement 9/114: UNLOCK TABLES;...
2025-05-25 14:37:54,718 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 14:37:54,718 - app.api.endpoints.backup - INFO - Ejecutando statement 10/114: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 14:37:54,739 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 14:37:54,739 - app.api.endpoints.backup - INFO - Ejecutando statement 11/114: CREATE TABLE `assessments` (`id` int NOT NULL AUTO_INCREMENT,`score` int NOT NULL,`material_topic_id...
2025-05-25 14:37:54,768 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 14:37:54,768 - app.api.endpoints.backup - INFO - Ejecutando statement 12/114: LOCK TABLES `assessments` WRITE;...
2025-05-25 14:37:54,770 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 14:37:54,770 - app.api.endpoints.backup - INFO - Ejecutando statement 13/114: UNLOCK TABLES;...
2025-05-25 14:37:54,771 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 14:37:54,771 - app.api.endpoints.backup - INFO - Ejecutando statement 14/114: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 14:37:54,794 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 14:37:54,795 - app.api.endpoints.backup - INFO - Ejecutando statement 15/114: CREATE TABLE `diagnosis_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`type` en...
2025-05-25 14:37:54,822 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 14:37:54,823 - app.api.endpoints.backup - INFO - Ejecutando statement 16/114: LOCK TABLES `diagnosis_indicators` WRITE;...
2025-05-25 14:37:54,824 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 14:37:54,825 - app.api.endpoints.backup - INFO - Ejecutando statement 17/114: UNLOCK TABLES;...
2025-05-25 14:37:54,825 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 14:37:54,826 - app.api.endpoints.backup - INFO - Ejecutando statement 18/114: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 14:37:54,840 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 14:37:54,841 - app.api.endpoints.backup - INFO - Ejecutando statement 19/114: CREATE TABLE `diagnosis_indicators_qualitative` (`diagnostic_indicator_id` int NOT NULL,`response` t...
2025-05-25 14:37:54,861 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 14:37:54,861 - app.api.endpoints.backup - INFO - Ejecutando statement 20/114: LOCK TABLES `diagnosis_indicators_qualitative` WRITE;...
2025-05-25 14:37:54,863 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 14:37:54,863 - app.api.endpoints.backup - INFO - Ejecutando statement 21/114: UNLOCK TABLES;...
2025-05-25 14:37:54,863 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 14:37:54,864 - app.api.endpoints.backup - INFO - Ejecutando statement 22/114: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 14:37:54,876 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 14:37:54,876 - app.api.endpoints.backup - INFO - Ejecutando statement 23/114: CREATE TABLE `diagnosis_indicators_quantitative` (`diagnostic_indicator_id` int NOT NULL,`numeric_re...
2025-05-25 14:37:54,896 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 14:37:54,897 - app.api.endpoints.backup - INFO - Ejecutando statement 24/114: LOCK TABLES `diagnosis_indicators_quantitative` WRITE;...
2025-05-25 14:37:54,898 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 14:37:54,899 - app.api.endpoints.backup - INFO - Ejecutando statement 25/114: UNLOCK TABLES;...
2025-05-25 14:37:54,899 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 14:37:54,900 - app.api.endpoints.backup - INFO - Ejecutando statement 26/114: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 14:37:54,915 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 14:37:54,916 - app.api.endpoints.backup - INFO - Ejecutando statement 27/114: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 14:37:54,938 - app.api.endpoints.backup - INFO - Statement 27 ejecutado correctamente
2025-05-25 14:37:54,939 - app.api.endpoints.backup - INFO - Ejecutando statement 28/114: LOCK TABLES `dimensions` WRITE;...
2025-05-25 14:37:54,941 - app.api.endpoints.backup - INFO - Statement 28 ejecutado correctamente
2025-05-25 14:37:54,942 - app.api.endpoints.backup - INFO - Ejecutando statement 29/114: UNLOCK TABLES;...
2025-05-25 14:37:54,942 - app.api.endpoints.backup - INFO - Statement 29 ejecutado correctamente
2025-05-25 14:37:54,943 - app.api.endpoints.backup - INFO - Ejecutando statement 30/114: DROP TABLE IF EXISTS `goals`;...
2025-05-25 14:37:54,956 - app.api.endpoints.backup - INFO - Statement 30 ejecutado correctamente
2025-05-25 14:37:54,956 - app.api.endpoints.backup - INFO - Ejecutando statement 31/114: CREATE TABLE `goals` (`ods_id` int NOT NULL,`goal_number` varchar(2) NOT NULL,`description` text NOT...
2025-05-25 14:37:54,977 - app.api.endpoints.backup - INFO - Statement 31 ejecutado correctamente
2025-05-25 14:37:54,978 - app.api.endpoints.backup - INFO - Ejecutando statement 32/114: LOCK TABLES `goals` WRITE;...
2025-05-25 14:37:54,980 - app.api.endpoints.backup - INFO - Statement 32 ejecutado correctamente
2025-05-25 14:37:54,980 - app.api.endpoints.backup - INFO - Ejecutando statement 33/114: UNLOCK TABLES;...
2025-05-25 14:37:54,980 - app.api.endpoints.backup - INFO - Statement 33 ejecutado correctamente
2025-05-25 14:37:54,981 - app.api.endpoints.backup - INFO - Ejecutando statement 34/114: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 14:37:54,996 - app.api.endpoints.backup - INFO - Statement 34 ejecutado correctamente
2025-05-25 14:37:54,997 - app.api.endpoints.backup - INFO - Ejecutando statement 35/114: CREATE TABLE `heritage_resource_social_networks` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int...
2025-05-25 14:37:55,023 - app.api.endpoints.backup - INFO - Statement 35 ejecutado correctamente
2025-05-25 14:37:55,024 - app.api.endpoints.backup - INFO - Ejecutando statement 36/114: LOCK TABLES `heritage_resource_social_networks` WRITE;...
2025-05-25 14:37:55,025 - app.api.endpoints.backup - INFO - Statement 36 ejecutado correctamente
2025-05-25 14:37:55,025 - app.api.endpoints.backup - INFO - Ejecutando statement 37/114: UNLOCK TABLES;...
2025-05-25 14:37:55,026 - app.api.endpoints.backup - INFO - Statement 37 ejecutado correctamente
2025-05-25 14:37:55,026 - app.api.endpoints.backup - INFO - Ejecutando statement 38/114: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 14:37:55,039 - app.api.endpoints.backup - INFO - Statement 38 ejecutado correctamente
2025-05-25 14:37:55,039 - app.api.endpoints.backup - INFO - Ejecutando statement 39/114: CREATE TABLE `heritage_resource_typologies` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int DEFA...
2025-05-25 14:37:55,067 - app.api.endpoints.backup - INFO - Statement 39 ejecutado correctamente
2025-05-25 14:37:55,067 - app.api.endpoints.backup - INFO - Ejecutando statement 40/114: LOCK TABLES `heritage_resource_typologies` WRITE;...
2025-05-25 14:37:55,069 - app.api.endpoints.backup - INFO - Statement 40 ejecutado correctamente
2025-05-25 14:37:55,069 - app.api.endpoints.backup - INFO - Ejecutando statement 41/114: UNLOCK TABLES;...
2025-05-25 14:37:55,070 - app.api.endpoints.backup - INFO - Statement 41 ejecutado correctamente
2025-05-25 14:37:55,070 - app.api.endpoints.backup - INFO - Ejecutando statement 42/114: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 14:37:55,090 - app.api.endpoints.backup - INFO - Statement 42 ejecutado correctamente
2025-05-25 14:37:55,090 - app.api.endpoints.backup - INFO - Ejecutando statement 43/114: CREATE TABLE `heritage_resources` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`ow...
2025-05-25 14:37:55,124 - app.api.endpoints.backup - INFO - Statement 43 ejecutado correctamente
2025-05-25 14:37:55,124 - app.api.endpoints.backup - INFO - Ejecutando statement 44/114: LOCK TABLES `heritage_resources` WRITE;...
2025-05-25 14:37:55,128 - app.api.endpoints.backup - INFO - Statement 44 ejecutado correctamente
2025-05-25 14:37:55,128 - app.api.endpoints.backup - INFO - Ejecutando statement 45/114: UNLOCK TABLES;...
2025-05-25 14:37:55,129 - app.api.endpoints.backup - INFO - Statement 45 ejecutado correctamente
2025-05-25 14:37:55,129 - app.api.endpoints.backup - INFO - Ejecutando statement 46/114: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 14:37:55,148 - app.api.endpoints.backup - INFO - Statement 46 ejecutado correctamente
2025-05-25 14:37:55,148 - app.api.endpoints.backup - INFO - Ejecutando statement 47/114: CREATE TABLE `material_topics` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descr...
2025-05-25 14:37:55,187 - app.api.endpoints.backup - INFO - Statement 47 ejecutado correctamente
2025-05-25 14:37:55,188 - app.api.endpoints.backup - INFO - Ejecutando statement 48/114: LOCK TABLES `material_topics` WRITE;...
2025-05-25 14:37:55,191 - app.api.endpoints.backup - INFO - Statement 48 ejecutado correctamente
2025-05-25 14:37:55,192 - app.api.endpoints.backup - INFO - Ejecutando statement 49/114: UNLOCK TABLES;...
2025-05-25 14:37:55,193 - app.api.endpoints.backup - INFO - Statement 49 ejecutado correctamente
2025-05-25 14:37:55,193 - app.api.endpoints.backup - INFO - Ejecutando statement 50/114: DROP TABLE IF EXISTS `ods`;...
2025-05-25 14:37:55,211 - app.api.endpoints.backup - INFO - Statement 50 ejecutado correctamente
2025-05-25 14:37:55,212 - app.api.endpoints.backup - INFO - Ejecutando statement 51/114: CREATE TABLE `ods` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`description` text...
2025-05-25 14:37:55,245 - app.api.endpoints.backup - INFO - Statement 51 ejecutado correctamente
2025-05-25 14:37:55,246 - app.api.endpoints.backup - INFO - Ejecutando statement 52/114: LOCK TABLES `ods` WRITE;...
2025-05-25 14:37:55,250 - app.api.endpoints.backup - INFO - Statement 52 ejecutado correctamente
2025-05-25 14:37:55,251 - app.api.endpoints.backup - INFO - Ejecutando statement 53/114: UNLOCK TABLES;...
2025-05-25 14:37:55,251 - app.api.endpoints.backup - INFO - Statement 53 ejecutado correctamente
2025-05-25 14:37:55,252 - app.api.endpoints.backup - INFO - Ejecutando statement 54/114: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 14:37:55,281 - app.api.endpoints.backup - INFO - Statement 54 ejecutado correctamente
2025-05-25 14:37:55,282 - app.api.endpoints.backup - INFO - Ejecutando statement 55/114: CREATE TABLE `performance_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`human_...
2025-05-25 14:37:55,320 - app.api.endpoints.backup - INFO - Statement 55 ejecutado correctamente
2025-05-25 14:37:55,321 - app.api.endpoints.backup - INFO - Ejecutando statement 56/114: LOCK TABLES `performance_indicators` WRITE;...
2025-05-25 14:37:55,323 - app.api.endpoints.backup - INFO - Statement 56 ejecutado correctamente
2025-05-25 14:37:55,323 - app.api.endpoints.backup - INFO - Ejecutando statement 57/114: UNLOCK TABLES;...
2025-05-25 14:37:55,324 - app.api.endpoints.backup - INFO - Statement 57 ejecutado correctamente
2025-05-25 14:37:55,324 - app.api.endpoints.backup - INFO - Ejecutando statement 58/114: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 14:37:55,339 - app.api.endpoints.backup - INFO - Statement 58 ejecutado correctamente
2025-05-25 14:37:55,339 - app.api.endpoints.backup - INFO - Ejecutando statement 59/114: CREATE TABLE `performance_indicators_qualitative` (`performance_indicator_id` int NOT NULL,`response...
2025-05-25 14:37:55,360 - app.api.endpoints.backup - INFO - Statement 59 ejecutado correctamente
2025-05-25 14:37:55,361 - app.api.endpoints.backup - INFO - Ejecutando statement 60/114: LOCK TABLES `performance_indicators_qualitative` WRITE;...
2025-05-25 14:37:55,363 - app.api.endpoints.backup - INFO - Statement 60 ejecutado correctamente
2025-05-25 14:37:55,363 - app.api.endpoints.backup - INFO - Ejecutando statement 61/114: UNLOCK TABLES;...
2025-05-25 14:37:55,364 - app.api.endpoints.backup - INFO - Statement 61 ejecutado correctamente
2025-05-25 14:37:55,364 - app.api.endpoints.backup - INFO - Ejecutando statement 62/114: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 14:37:55,376 - app.api.endpoints.backup - INFO - Statement 62 ejecutado correctamente
2025-05-25 14:37:55,376 - app.api.endpoints.backup - INFO - Ejecutando statement 63/114: CREATE TABLE `performance_indicators_quantitative` (`performance_indicator_id` int NOT NULL,`numeric...
2025-05-25 14:37:55,399 - app.api.endpoints.backup - INFO - Statement 63 ejecutado correctamente
2025-05-25 14:37:55,399 - app.api.endpoints.backup - INFO - Ejecutando statement 64/114: LOCK TABLES `performance_indicators_quantitative` WRITE;...
2025-05-25 14:37:55,401 - app.api.endpoints.backup - INFO - Statement 64 ejecutado correctamente
2025-05-25 14:37:55,402 - app.api.endpoints.backup - INFO - Ejecutando statement 65/114: UNLOCK TABLES;...
2025-05-25 14:37:55,403 - app.api.endpoints.backup - INFO - Statement 65 ejecutado correctamente
2025-05-25 14:37:55,403 - app.api.endpoints.backup - INFO - Ejecutando statement 66/114: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 14:37:55,420 - app.api.endpoints.backup - INFO - Statement 66 ejecutado correctamente
2025-05-25 14:37:55,429 - app.api.endpoints.backup - INFO - Ejecutando statement 67/114: CREATE TABLE `report_agreements` (`id` int NOT NULL AUTO_INCREMENT,`agreement` text NOT NULL,`report...
2025-05-25 14:37:55,548 - app.api.endpoints.backup - INFO - Statement 67 ejecutado correctamente
2025-05-25 14:37:55,548 - app.api.endpoints.backup - INFO - Ejecutando statement 68/114: LOCK TABLES `report_agreements` WRITE;...
2025-05-25 14:37:55,550 - app.api.endpoints.backup - INFO - Statement 68 ejecutado correctamente
2025-05-25 14:37:55,551 - app.api.endpoints.backup - INFO - Ejecutando statement 69/114: UNLOCK TABLES;...
2025-05-25 14:37:55,551 - app.api.endpoints.backup - INFO - Statement 69 ejecutado correctamente
2025-05-25 14:37:55,552 - app.api.endpoints.backup - INFO - Ejecutando statement 70/114: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 14:37:55,589 - app.api.endpoints.backup - INFO - Statement 70 ejecutado correctamente
2025-05-25 14:37:55,590 - app.api.endpoints.backup - INFO - Ejecutando statement 71/114: CREATE TABLE `report_bibliographies` (`id` int NOT NULL AUTO_INCREMENT,`reference` text NOT NULL,`re...
2025-05-25 14:37:55,616 - app.api.endpoints.backup - INFO - Statement 71 ejecutado correctamente
2025-05-25 14:37:55,617 - app.api.endpoints.backup - INFO - Ejecutando statement 72/114: LOCK TABLES `report_bibliographies` WRITE;...
2025-05-25 14:37:55,619 - app.api.endpoints.backup - INFO - Statement 72 ejecutado correctamente
2025-05-25 14:37:55,619 - app.api.endpoints.backup - INFO - Ejecutando statement 73/114: UNLOCK TABLES;...
2025-05-25 14:37:55,620 - app.api.endpoints.backup - INFO - Statement 73 ejecutado correctamente
2025-05-25 14:37:55,620 - app.api.endpoints.backup - INFO - Ejecutando statement 74/114: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 14:37:55,639 - app.api.endpoints.backup - INFO - Statement 74 ejecutado correctamente
2025-05-25 14:37:55,639 - app.api.endpoints.backup - INFO - Ejecutando statement 75/114: CREATE TABLE `report_logos` (`id` int NOT NULL AUTO_INCREMENT,`logo` varchar(255) NOT NULL,`report_i...
2025-05-25 14:37:55,666 - app.api.endpoints.backup - INFO - Statement 75 ejecutado correctamente
2025-05-25 14:37:55,666 - app.api.endpoints.backup - INFO - Ejecutando statement 76/114: LOCK TABLES `report_logos` WRITE;...
2025-05-25 14:37:55,668 - app.api.endpoints.backup - INFO - Statement 76 ejecutado correctamente
2025-05-25 14:37:55,668 - app.api.endpoints.backup - INFO - Ejecutando statement 77/114: UNLOCK TABLES;...
2025-05-25 14:37:55,669 - app.api.endpoints.backup - INFO - Statement 77 ejecutado correctamente
2025-05-25 14:37:55,669 - app.api.endpoints.backup - INFO - Ejecutando statement 78/114: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 14:37:55,682 - app.api.endpoints.backup - INFO - Statement 78 ejecutado correctamente
2025-05-25 14:37:55,683 - app.api.endpoints.backup - INFO - Ejecutando statement 79/114: CREATE TABLE `report_norms` (`id` int NOT NULL AUTO_INCREMENT,`norm` text NOT NULL,`report_id` int N...
2025-05-25 14:37:55,707 - app.api.endpoints.backup - INFO - Statement 79 ejecutado correctamente
2025-05-25 14:37:55,707 - app.api.endpoints.backup - INFO - Ejecutando statement 80/114: LOCK TABLES `report_norms` WRITE;...
2025-05-25 14:37:55,709 - app.api.endpoints.backup - INFO - Statement 80 ejecutado correctamente
2025-05-25 14:37:55,710 - app.api.endpoints.backup - INFO - Ejecutando statement 81/114: UNLOCK TABLES;...
2025-05-25 14:37:55,710 - app.api.endpoints.backup - INFO - Statement 81 ejecutado correctamente
2025-05-25 14:37:55,711 - app.api.endpoints.backup - INFO - Ejecutando statement 82/114: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 14:37:55,727 - app.api.endpoints.backup - INFO - Statement 82 ejecutado correctamente
2025-05-25 14:37:55,728 - app.api.endpoints.backup - INFO - Ejecutando statement 83/114: CREATE TABLE `report_photos` (`id` int NOT NULL AUTO_INCREMENT,`photo` varchar(255) NOT NULL,`report...
2025-05-25 14:37:55,756 - app.api.endpoints.backup - INFO - Statement 83 ejecutado correctamente
2025-05-25 14:37:55,756 - app.api.endpoints.backup - INFO - Ejecutando statement 84/114: LOCK TABLES `report_photos` WRITE;...
2025-05-25 14:37:55,758 - app.api.endpoints.backup - INFO - Statement 84 ejecutado correctamente
2025-05-25 14:37:55,758 - app.api.endpoints.backup - INFO - Ejecutando statement 85/114: UNLOCK TABLES;...
2025-05-25 14:37:55,759 - app.api.endpoints.backup - INFO - Statement 85 ejecutado correctamente
2025-05-25 14:37:55,759 - app.api.endpoints.backup - INFO - Ejecutando statement 86/114: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 14:37:55,775 - app.api.endpoints.backup - INFO - Statement 86 ejecutado correctamente
2025-05-25 14:37:55,775 - app.api.endpoints.backup - INFO - Ejecutando statement 87/114: CREATE TABLE `secondary_ods_actions` (`action_id` int NOT NULL,`specific_objective_id` int NOT NULL,...
2025-05-25 14:37:55,805 - app.api.endpoints.backup - INFO - Statement 87 ejecutado correctamente
2025-05-25 14:37:55,805 - app.api.endpoints.backup - INFO - Ejecutando statement 88/114: LOCK TABLES `secondary_ods_actions` WRITE;...
2025-05-25 14:37:55,806 - app.api.endpoints.backup - INFO - Statement 88 ejecutado correctamente
2025-05-25 14:37:55,806 - app.api.endpoints.backup - INFO - Ejecutando statement 89/114: UNLOCK TABLES;...
2025-05-25 14:37:55,807 - app.api.endpoints.backup - INFO - Statement 89 ejecutado correctamente
2025-05-25 14:37:55,807 - app.api.endpoints.backup - INFO - Ejecutando statement 90/114: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 14:37:55,825 - app.api.endpoints.backup - INFO - Statement 90 ejecutado correctamente
2025-05-25 14:37:55,826 - app.api.endpoints.backup - INFO - Ejecutando statement 91/114: CREATE TABLE `secondary_ods_material_topics` (`ods_id` int NOT NULL,`material_topic_id` int NOT NULL...
2025-05-25 14:37:55,855 - app.api.endpoints.backup - INFO - Statement 91 ejecutado correctamente
2025-05-25 14:37:55,856 - app.api.endpoints.backup - INFO - Ejecutando statement 92/114: LOCK TABLES `secondary_ods_material_topics` WRITE;...
2025-05-25 14:37:55,857 - app.api.endpoints.backup - INFO - Statement 92 ejecutado correctamente
2025-05-25 14:37:55,857 - app.api.endpoints.backup - INFO - Ejecutando statement 93/114: UNLOCK TABLES;...
2025-05-25 14:37:55,858 - app.api.endpoints.backup - INFO - Statement 93 ejecutado correctamente
2025-05-25 14:37:55,858 - app.api.endpoints.backup - INFO - Ejecutando statement 94/114: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 14:37:55,875 - app.api.endpoints.backup - INFO - Statement 94 ejecutado correctamente
2025-05-25 14:37:55,876 - app.api.endpoints.backup - INFO - Ejecutando statement 95/114: CREATE TABLE `specific_objectives` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`re...
2025-05-25 14:37:55,904 - app.api.endpoints.backup - INFO - Statement 95 ejecutado correctamente
2025-05-25 14:37:55,904 - app.api.endpoints.backup - INFO - Ejecutando statement 96/114: LOCK TABLES `specific_objectives` WRITE;...
2025-05-25 14:37:55,907 - app.api.endpoints.backup - INFO - Statement 96 ejecutado correctamente
2025-05-25 14:37:55,907 - app.api.endpoints.backup - INFO - Ejecutando statement 97/114: UNLOCK TABLES;...
2025-05-25 14:37:55,907 - app.api.endpoints.backup - INFO - Statement 97 ejecutado correctamente
2025-05-25 14:37:55,908 - app.api.endpoints.backup - INFO - Ejecutando statement 98/114: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 14:37:55,924 - app.api.endpoints.backup - INFO - Statement 98 ejecutado correctamente
2025-05-25 14:37:55,925 - app.api.endpoints.backup - INFO - Ejecutando statement 99/114: CREATE TABLE `stakeholders` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descript...
2025-05-25 14:37:55,954 - app.api.endpoints.backup - INFO - Statement 99 ejecutado correctamente
2025-05-25 14:37:55,955 - app.api.endpoints.backup - INFO - Ejecutando statement 100/114: LOCK TABLES `stakeholders` WRITE;...
2025-05-25 14:37:55,956 - app.api.endpoints.backup - INFO - Statement 100 ejecutado correctamente
2025-05-25 14:37:55,957 - app.api.endpoints.backup - INFO - Ejecutando statement 101/114: UNLOCK TABLES;...
2025-05-25 14:37:55,957 - app.api.endpoints.backup - INFO - Statement 101 ejecutado correctamente
2025-05-25 14:37:55,958 - app.api.endpoints.backup - INFO - Ejecutando statement 102/114: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 14:37:55,981 - app.api.endpoints.backup - INFO - Statement 102 ejecutado correctamente
2025-05-25 14:37:55,982 - app.api.endpoints.backup - INFO - Ejecutando statement 103/114: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:37:56,019 - app.api.endpoints.backup - INFO - Statement 103 ejecutado correctamente
2025-05-25 14:37:56,019 - app.api.endpoints.backup - INFO - Ejecutando statement 104/114: LOCK TABLES `sustainability_reports` WRITE;...
2025-05-25 14:37:56,023 - app.api.endpoints.backup - INFO - Statement 104 ejecutado correctamente
2025-05-25 14:37:56,023 - app.api.endpoints.backup - INFO - Ejecutando statement 105/114: UNLOCK TABLES;...
2025-05-25 14:37:56,023 - app.api.endpoints.backup - INFO - Statement 105 ejecutado correctamente
2025-05-25 14:37:56,024 - app.api.endpoints.backup - INFO - Ejecutando statement 106/114: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 14:38:26,031 - app.api.endpoints.backup - ERROR - Error en statement 106: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 14:38:26,032 - app.api.endpoints.backup - ERROR - Error: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:38:26,032 - app.api.endpoints.backup - ERROR - Stack trace completo:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 782, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/usr/local/lib/python3.10/socket.py", line 717, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 253, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 788, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:38:26,040 - app.api.endpoints.backup - ERROR - Error de MySQL: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:38:26,040 - app.api.endpoints.backup - ERROR - Stack trace completo:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 782, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/usr/local/lib/python3.10/socket.py", line 717, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 253, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 788, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:38:26,043 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 14:38:26,044 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error de MySQL: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:38:26,044 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 782, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/usr/local/lib/python3.10/socket.py", line 717, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 253, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 788, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query (timed out)')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 333, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 272, in _do_restore_file
    raise RuntimeError(f"Error de MySQL: {str(e)}")
RuntimeError: Error de MySQL: (2013, 'Lost connection to MySQL server during query (timed out)')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 347, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 14:38:26,051 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 14:41:24,126 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:41:24,127 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:41:24,128 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_144124.sql
2025-05-25 14:41:24,133 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:41:24,134 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:41:24,136 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_144124.sql  True
2025-05-25 14:41:24,137 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:41:24,139 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:41:24,140 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:41:24,140 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:41:24,141 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:41:24,141 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:41:24,141 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:41:24,154 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:41:24,154 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:41:24,158 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 114
2025-05-25 14:41:24,158 - app.api.endpoints.backup - INFO - Ejecutando statement 1/114: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:41:24,176 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 14:41:24,177 - app.api.endpoints.backup - INFO - Ejecutando statement 2/114: CREATE TABLE `actions` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`difficulty` en...
2025-05-25 14:41:24,208 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 14:41:24,209 - app.api.endpoints.backup - INFO - Ejecutando statement 3/114: LOCK TABLES `actions` WRITE;...
2025-05-25 14:41:24,212 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 14:41:24,213 - app.api.endpoints.backup - INFO - Ejecutando statement 4/114: UNLOCK TABLES;...
2025-05-25 14:41:24,214 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 14:41:24,214 - app.api.endpoints.backup - INFO - Ejecutando statement 5/114: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 14:41:24,225 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 14:41:24,225 - app.api.endpoints.backup - INFO - Ejecutando statement 6/114: CREATE TABLE `alembic_version` (`version_num` varchar(32) NOT NULL,PRIMARY KEY (`version_num`)) ENGI...
2025-05-25 14:41:24,244 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 14:41:24,244 - app.api.endpoints.backup - INFO - Ejecutando statement 7/114: LOCK TABLES `alembic_version` WRITE;...
2025-05-25 14:41:24,247 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 14:41:24,247 - app.api.endpoints.backup - INFO - Ejecutando statement 8/114: INSERT INTO `alembic_version` VALUES('8e597e8d9c1b');...
2025-05-25 14:41:24,248 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 14:41:24,249 - app.api.endpoints.backup - INFO - Ejecutando statement 9/114: UNLOCK TABLES;...
2025-05-25 14:41:24,252 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 14:41:24,253 - app.api.endpoints.backup - INFO - Ejecutando statement 10/114: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 14:41:24,266 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 14:41:24,267 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 14:41:24,267 - app.api.endpoints.backup - INFO - Ejecutando statement 11/114: CREATE TABLE `assessments` (`id` int NOT NULL AUTO_INCREMENT,`score` int NOT NULL,`material_topic_id...
2025-05-25 14:41:24,298 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 14:41:24,298 - app.api.endpoints.backup - INFO - Ejecutando statement 12/114: LOCK TABLES `assessments` WRITE;...
2025-05-25 14:41:24,301 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 14:41:24,301 - app.api.endpoints.backup - INFO - Ejecutando statement 13/114: UNLOCK TABLES;...
2025-05-25 14:41:24,302 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 14:41:24,302 - app.api.endpoints.backup - INFO - Ejecutando statement 14/114: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 14:41:24,317 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 14:41:24,318 - app.api.endpoints.backup - INFO - Ejecutando statement 15/114: CREATE TABLE `diagnosis_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`type` en...
2025-05-25 14:41:24,346 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 14:41:24,347 - app.api.endpoints.backup - INFO - Ejecutando statement 16/114: LOCK TABLES `diagnosis_indicators` WRITE;...
2025-05-25 14:41:24,350 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 14:41:24,350 - app.api.endpoints.backup - INFO - Ejecutando statement 17/114: UNLOCK TABLES;...
2025-05-25 14:41:24,352 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 14:41:24,352 - app.api.endpoints.backup - INFO - Ejecutando statement 18/114: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 14:41:24,381 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 14:41:24,381 - app.api.endpoints.backup - INFO - Ejecutando statement 19/114: CREATE TABLE `diagnosis_indicators_qualitative` (`diagnostic_indicator_id` int NOT NULL,`response` t...
2025-05-25 14:41:24,405 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 14:41:24,406 - app.api.endpoints.backup - INFO - Ejecutando statement 20/114: LOCK TABLES `diagnosis_indicators_qualitative` WRITE;...
2025-05-25 14:41:24,407 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 14:41:24,408 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 14:41:24,408 - app.api.endpoints.backup - INFO - Ejecutando statement 21/114: UNLOCK TABLES;...
2025-05-25 14:41:24,409 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 14:41:24,409 - app.api.endpoints.backup - INFO - Ejecutando statement 22/114: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 14:41:24,422 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 14:41:24,423 - app.api.endpoints.backup - INFO - Ejecutando statement 23/114: CREATE TABLE `diagnosis_indicators_quantitative` (`diagnostic_indicator_id` int NOT NULL,`numeric_re...
2025-05-25 14:41:24,448 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 14:41:24,448 - app.api.endpoints.backup - INFO - Ejecutando statement 24/114: LOCK TABLES `diagnosis_indicators_quantitative` WRITE;...
2025-05-25 14:41:24,451 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 14:41:24,451 - app.api.endpoints.backup - INFO - Ejecutando statement 25/114: UNLOCK TABLES;...
2025-05-25 14:41:24,452 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 14:41:24,452 - app.api.endpoints.backup - INFO - Ejecutando statement 26/114: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 14:41:24,469 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 14:41:24,470 - app.api.endpoints.backup - INFO - Ejecutando statement 27/114: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 14:41:24,507 - app.api.endpoints.backup - INFO - Statement 27 ejecutado correctamente
2025-05-25 14:41:24,508 - app.api.endpoints.backup - INFO - Ejecutando statement 28/114: LOCK TABLES `dimensions` WRITE;...
2025-05-25 14:41:24,511 - app.api.endpoints.backup - INFO - Statement 28 ejecutado correctamente
2025-05-25 14:41:24,512 - app.api.endpoints.backup - INFO - Ejecutando statement 29/114: UNLOCK TABLES;...
2025-05-25 14:41:24,513 - app.api.endpoints.backup - INFO - Statement 29 ejecutado correctamente
2025-05-25 14:41:24,514 - app.api.endpoints.backup - INFO - Ejecutando statement 30/114: DROP TABLE IF EXISTS `goals`;...
2025-05-25 14:41:24,529 - app.api.endpoints.backup - INFO - Statement 30 ejecutado correctamente
2025-05-25 14:41:24,530 - app.api.endpoints.backup - INFO - Commit realizado en statement 30
2025-05-25 14:41:24,530 - app.api.endpoints.backup - INFO - Ejecutando statement 31/114: CREATE TABLE `goals` (`ods_id` int NOT NULL,`goal_number` varchar(2) NOT NULL,`description` text NOT...
2025-05-25 14:41:24,553 - app.api.endpoints.backup - INFO - Statement 31 ejecutado correctamente
2025-05-25 14:41:24,553 - app.api.endpoints.backup - INFO - Ejecutando statement 32/114: LOCK TABLES `goals` WRITE;...
2025-05-25 14:41:24,555 - app.api.endpoints.backup - INFO - Statement 32 ejecutado correctamente
2025-05-25 14:41:24,556 - app.api.endpoints.backup - INFO - Ejecutando statement 33/114: UNLOCK TABLES;...
2025-05-25 14:41:24,556 - app.api.endpoints.backup - INFO - Statement 33 ejecutado correctamente
2025-05-25 14:41:24,557 - app.api.endpoints.backup - INFO - Ejecutando statement 34/114: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 14:41:24,570 - app.api.endpoints.backup - INFO - Statement 34 ejecutado correctamente
2025-05-25 14:41:24,570 - app.api.endpoints.backup - INFO - Ejecutando statement 35/114: CREATE TABLE `heritage_resource_social_networks` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int...
2025-05-25 14:41:24,596 - app.api.endpoints.backup - INFO - Statement 35 ejecutado correctamente
2025-05-25 14:41:24,597 - app.api.endpoints.backup - INFO - Ejecutando statement 36/114: LOCK TABLES `heritage_resource_social_networks` WRITE;...
2025-05-25 14:41:24,598 - app.api.endpoints.backup - INFO - Statement 36 ejecutado correctamente
2025-05-25 14:41:24,599 - app.api.endpoints.backup - INFO - Ejecutando statement 37/114: UNLOCK TABLES;...
2025-05-25 14:41:24,600 - app.api.endpoints.backup - INFO - Statement 37 ejecutado correctamente
2025-05-25 14:41:24,600 - app.api.endpoints.backup - INFO - Ejecutando statement 38/114: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 14:41:24,612 - app.api.endpoints.backup - INFO - Statement 38 ejecutado correctamente
2025-05-25 14:41:24,613 - app.api.endpoints.backup - INFO - Ejecutando statement 39/114: CREATE TABLE `heritage_resource_typologies` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int DEFA...
2025-05-25 14:41:24,641 - app.api.endpoints.backup - INFO - Statement 39 ejecutado correctamente
2025-05-25 14:41:24,642 - app.api.endpoints.backup - INFO - Ejecutando statement 40/114: LOCK TABLES `heritage_resource_typologies` WRITE;...
2025-05-25 14:41:24,643 - app.api.endpoints.backup - INFO - Statement 40 ejecutado correctamente
2025-05-25 14:41:24,644 - app.api.endpoints.backup - INFO - Commit realizado en statement 40
2025-05-25 14:41:24,644 - app.api.endpoints.backup - INFO - Ejecutando statement 41/114: UNLOCK TABLES;...
2025-05-25 14:41:24,645 - app.api.endpoints.backup - INFO - Statement 41 ejecutado correctamente
2025-05-25 14:41:24,645 - app.api.endpoints.backup - INFO - Ejecutando statement 42/114: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 14:41:24,660 - app.api.endpoints.backup - INFO - Statement 42 ejecutado correctamente
2025-05-25 14:41:24,660 - app.api.endpoints.backup - INFO - Ejecutando statement 43/114: CREATE TABLE `heritage_resources` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`ow...
2025-05-25 14:41:24,687 - app.api.endpoints.backup - INFO - Statement 43 ejecutado correctamente
2025-05-25 14:41:24,688 - app.api.endpoints.backup - INFO - Ejecutando statement 44/114: LOCK TABLES `heritage_resources` WRITE;...
2025-05-25 14:41:24,691 - app.api.endpoints.backup - INFO - Statement 44 ejecutado correctamente
2025-05-25 14:41:24,691 - app.api.endpoints.backup - INFO - Ejecutando statement 45/114: UNLOCK TABLES;...
2025-05-25 14:41:24,692 - app.api.endpoints.backup - INFO - Statement 45 ejecutado correctamente
2025-05-25 14:41:24,692 - app.api.endpoints.backup - INFO - Ejecutando statement 46/114: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 14:41:24,710 - app.api.endpoints.backup - INFO - Statement 46 ejecutado correctamente
2025-05-25 14:41:24,710 - app.api.endpoints.backup - INFO - Ejecutando statement 47/114: CREATE TABLE `material_topics` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descr...
2025-05-25 14:41:24,751 - app.api.endpoints.backup - INFO - Statement 47 ejecutado correctamente
2025-05-25 14:41:24,752 - app.api.endpoints.backup - INFO - Ejecutando statement 48/114: LOCK TABLES `material_topics` WRITE;...
2025-05-25 14:41:24,755 - app.api.endpoints.backup - INFO - Statement 48 ejecutado correctamente
2025-05-25 14:41:24,756 - app.api.endpoints.backup - INFO - Ejecutando statement 49/114: UNLOCK TABLES;...
2025-05-25 14:41:24,757 - app.api.endpoints.backup - INFO - Statement 49 ejecutado correctamente
2025-05-25 14:41:24,757 - app.api.endpoints.backup - INFO - Ejecutando statement 50/114: DROP TABLE IF EXISTS `ods`;...
2025-05-25 14:41:24,777 - app.api.endpoints.backup - INFO - Statement 50 ejecutado correctamente
2025-05-25 14:41:24,778 - app.api.endpoints.backup - INFO - Commit realizado en statement 50
2025-05-25 14:41:24,778 - app.api.endpoints.backup - INFO - Ejecutando statement 51/114: CREATE TABLE `ods` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`description` text...
2025-05-25 14:41:24,815 - app.api.endpoints.backup - INFO - Statement 51 ejecutado correctamente
2025-05-25 14:41:24,816 - app.api.endpoints.backup - INFO - Ejecutando statement 52/114: LOCK TABLES `ods` WRITE;...
2025-05-25 14:41:24,820 - app.api.endpoints.backup - INFO - Statement 52 ejecutado correctamente
2025-05-25 14:41:24,820 - app.api.endpoints.backup - INFO - Ejecutando statement 53/114: UNLOCK TABLES;...
2025-05-25 14:41:24,822 - app.api.endpoints.backup - INFO - Statement 53 ejecutado correctamente
2025-05-25 14:41:24,822 - app.api.endpoints.backup - INFO - Ejecutando statement 54/114: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 14:41:24,838 - app.api.endpoints.backup - INFO - Statement 54 ejecutado correctamente
2025-05-25 14:41:24,838 - app.api.endpoints.backup - INFO - Ejecutando statement 55/114: CREATE TABLE `performance_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`human_...
2025-05-25 14:41:24,867 - app.api.endpoints.backup - INFO - Statement 55 ejecutado correctamente
2025-05-25 14:41:24,868 - app.api.endpoints.backup - INFO - Ejecutando statement 56/114: LOCK TABLES `performance_indicators` WRITE;...
2025-05-25 14:41:24,871 - app.api.endpoints.backup - INFO - Statement 56 ejecutado correctamente
2025-05-25 14:41:24,871 - app.api.endpoints.backup - INFO - Ejecutando statement 57/114: UNLOCK TABLES;...
2025-05-25 14:41:24,872 - app.api.endpoints.backup - INFO - Statement 57 ejecutado correctamente
2025-05-25 14:41:24,872 - app.api.endpoints.backup - INFO - Ejecutando statement 58/114: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 14:41:24,885 - app.api.endpoints.backup - INFO - Statement 58 ejecutado correctamente
2025-05-25 14:41:24,886 - app.api.endpoints.backup - INFO - Ejecutando statement 59/114: CREATE TABLE `performance_indicators_qualitative` (`performance_indicator_id` int NOT NULL,`response...
2025-05-25 14:41:24,906 - app.api.endpoints.backup - INFO - Statement 59 ejecutado correctamente
2025-05-25 14:41:24,906 - app.api.endpoints.backup - INFO - Ejecutando statement 60/114: LOCK TABLES `performance_indicators_qualitative` WRITE;...
2025-05-25 14:41:24,907 - app.api.endpoints.backup - INFO - Statement 60 ejecutado correctamente
2025-05-25 14:41:24,908 - app.api.endpoints.backup - INFO - Commit realizado en statement 60
2025-05-25 14:41:24,908 - app.api.endpoints.backup - INFO - Ejecutando statement 61/114: UNLOCK TABLES;...
2025-05-25 14:41:24,909 - app.api.endpoints.backup - INFO - Statement 61 ejecutado correctamente
2025-05-25 14:41:24,909 - app.api.endpoints.backup - INFO - Ejecutando statement 62/114: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 14:41:24,922 - app.api.endpoints.backup - INFO - Statement 62 ejecutado correctamente
2025-05-25 14:41:24,922 - app.api.endpoints.backup - INFO - Ejecutando statement 63/114: CREATE TABLE `performance_indicators_quantitative` (`performance_indicator_id` int NOT NULL,`numeric...
2025-05-25 14:41:24,940 - app.api.endpoints.backup - INFO - Statement 63 ejecutado correctamente
2025-05-25 14:41:24,941 - app.api.endpoints.backup - INFO - Ejecutando statement 64/114: LOCK TABLES `performance_indicators_quantitative` WRITE;...
2025-05-25 14:41:24,942 - app.api.endpoints.backup - INFO - Statement 64 ejecutado correctamente
2025-05-25 14:41:24,942 - app.api.endpoints.backup - INFO - Ejecutando statement 65/114: UNLOCK TABLES;...
2025-05-25 14:41:24,943 - app.api.endpoints.backup - INFO - Statement 65 ejecutado correctamente
2025-05-25 14:41:24,943 - app.api.endpoints.backup - INFO - Ejecutando statement 66/114: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 14:41:24,957 - app.api.endpoints.backup - INFO - Statement 66 ejecutado correctamente
2025-05-25 14:41:24,958 - app.api.endpoints.backup - INFO - Ejecutando statement 67/114: CREATE TABLE `report_agreements` (`id` int NOT NULL AUTO_INCREMENT,`agreement` text NOT NULL,`report...
2025-05-25 14:41:24,983 - app.api.endpoints.backup - INFO - Statement 67 ejecutado correctamente
2025-05-25 14:41:24,984 - app.api.endpoints.backup - INFO - Ejecutando statement 68/114: LOCK TABLES `report_agreements` WRITE;...
2025-05-25 14:41:24,986 - app.api.endpoints.backup - INFO - Statement 68 ejecutado correctamente
2025-05-25 14:41:24,986 - app.api.endpoints.backup - INFO - Ejecutando statement 69/114: UNLOCK TABLES;...
2025-05-25 14:41:24,987 - app.api.endpoints.backup - INFO - Statement 69 ejecutado correctamente
2025-05-25 14:41:24,987 - app.api.endpoints.backup - INFO - Ejecutando statement 70/114: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 14:41:25,001 - app.api.endpoints.backup - INFO - Statement 70 ejecutado correctamente
2025-05-25 14:41:25,002 - app.api.endpoints.backup - INFO - Commit realizado en statement 70
2025-05-25 14:41:25,002 - app.api.endpoints.backup - INFO - Ejecutando statement 71/114: CREATE TABLE `report_bibliographies` (`id` int NOT NULL AUTO_INCREMENT,`reference` text NOT NULL,`re...
2025-05-25 14:41:25,028 - app.api.endpoints.backup - INFO - Statement 71 ejecutado correctamente
2025-05-25 14:41:25,029 - app.api.endpoints.backup - INFO - Ejecutando statement 72/114: LOCK TABLES `report_bibliographies` WRITE;...
2025-05-25 14:41:25,031 - app.api.endpoints.backup - INFO - Statement 72 ejecutado correctamente
2025-05-25 14:41:25,031 - app.api.endpoints.backup - INFO - Ejecutando statement 73/114: UNLOCK TABLES;...
2025-05-25 14:41:25,032 - app.api.endpoints.backup - INFO - Statement 73 ejecutado correctamente
2025-05-25 14:41:25,032 - app.api.endpoints.backup - INFO - Ejecutando statement 74/114: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 14:41:25,047 - app.api.endpoints.backup - INFO - Statement 74 ejecutado correctamente
2025-05-25 14:41:25,048 - app.api.endpoints.backup - INFO - Ejecutando statement 75/114: CREATE TABLE `report_logos` (`id` int NOT NULL AUTO_INCREMENT,`logo` varchar(255) NOT NULL,`report_i...
2025-05-25 14:41:25,073 - app.api.endpoints.backup - INFO - Statement 75 ejecutado correctamente
2025-05-25 14:41:25,074 - app.api.endpoints.backup - INFO - Ejecutando statement 76/114: LOCK TABLES `report_logos` WRITE;...
2025-05-25 14:41:25,075 - app.api.endpoints.backup - INFO - Statement 76 ejecutado correctamente
2025-05-25 14:41:25,076 - app.api.endpoints.backup - INFO - Ejecutando statement 77/114: UNLOCK TABLES;...
2025-05-25 14:41:25,076 - app.api.endpoints.backup - INFO - Statement 77 ejecutado correctamente
2025-05-25 14:41:25,077 - app.api.endpoints.backup - INFO - Ejecutando statement 78/114: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 14:41:25,092 - app.api.endpoints.backup - INFO - Statement 78 ejecutado correctamente
2025-05-25 14:41:25,092 - app.api.endpoints.backup - INFO - Ejecutando statement 79/114: CREATE TABLE `report_norms` (`id` int NOT NULL AUTO_INCREMENT,`norm` text NOT NULL,`report_id` int N...
2025-05-25 14:41:25,117 - app.api.endpoints.backup - INFO - Statement 79 ejecutado correctamente
2025-05-25 14:41:25,117 - app.api.endpoints.backup - INFO - Ejecutando statement 80/114: LOCK TABLES `report_norms` WRITE;...
2025-05-25 14:41:25,119 - app.api.endpoints.backup - INFO - Statement 80 ejecutado correctamente
2025-05-25 14:41:25,119 - app.api.endpoints.backup - INFO - Commit realizado en statement 80
2025-05-25 14:41:25,119 - app.api.endpoints.backup - INFO - Ejecutando statement 81/114: UNLOCK TABLES;...
2025-05-25 14:41:25,120 - app.api.endpoints.backup - INFO - Statement 81 ejecutado correctamente
2025-05-25 14:41:25,120 - app.api.endpoints.backup - INFO - Ejecutando statement 82/114: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 14:41:25,137 - app.api.endpoints.backup - INFO - Statement 82 ejecutado correctamente
2025-05-25 14:41:25,137 - app.api.endpoints.backup - INFO - Ejecutando statement 83/114: CREATE TABLE `report_photos` (`id` int NOT NULL AUTO_INCREMENT,`photo` varchar(255) NOT NULL,`report...
2025-05-25 14:41:25,166 - app.api.endpoints.backup - INFO - Statement 83 ejecutado correctamente
2025-05-25 14:41:25,166 - app.api.endpoints.backup - INFO - Ejecutando statement 84/114: LOCK TABLES `report_photos` WRITE;...
2025-05-25 14:41:25,168 - app.api.endpoints.backup - INFO - Statement 84 ejecutado correctamente
2025-05-25 14:41:25,168 - app.api.endpoints.backup - INFO - Ejecutando statement 85/114: UNLOCK TABLES;...
2025-05-25 14:41:25,169 - app.api.endpoints.backup - INFO - Statement 85 ejecutado correctamente
2025-05-25 14:41:25,169 - app.api.endpoints.backup - INFO - Ejecutando statement 86/114: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 14:41:25,183 - app.api.endpoints.backup - INFO - Statement 86 ejecutado correctamente
2025-05-25 14:41:25,184 - app.api.endpoints.backup - INFO - Ejecutando statement 87/114: CREATE TABLE `secondary_ods_actions` (`action_id` int NOT NULL,`specific_objective_id` int NOT NULL,...
2025-05-25 14:41:25,212 - app.api.endpoints.backup - INFO - Statement 87 ejecutado correctamente
2025-05-25 14:41:25,212 - app.api.endpoints.backup - INFO - Ejecutando statement 88/114: LOCK TABLES `secondary_ods_actions` WRITE;...
2025-05-25 14:41:25,214 - app.api.endpoints.backup - INFO - Statement 88 ejecutado correctamente
2025-05-25 14:41:25,215 - app.api.endpoints.backup - INFO - Ejecutando statement 89/114: UNLOCK TABLES;...
2025-05-25 14:41:25,215 - app.api.endpoints.backup - INFO - Statement 89 ejecutado correctamente
2025-05-25 14:41:25,216 - app.api.endpoints.backup - INFO - Ejecutando statement 90/114: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 14:41:25,229 - app.api.endpoints.backup - INFO - Statement 90 ejecutado correctamente
2025-05-25 14:41:25,230 - app.api.endpoints.backup - INFO - Commit realizado en statement 90
2025-05-25 14:41:25,231 - app.api.endpoints.backup - INFO - Ejecutando statement 91/114: CREATE TABLE `secondary_ods_material_topics` (`ods_id` int NOT NULL,`material_topic_id` int NOT NULL...
2025-05-25 14:41:25,257 - app.api.endpoints.backup - INFO - Statement 91 ejecutado correctamente
2025-05-25 14:41:25,257 - app.api.endpoints.backup - INFO - Ejecutando statement 92/114: LOCK TABLES `secondary_ods_material_topics` WRITE;...
2025-05-25 14:41:25,259 - app.api.endpoints.backup - INFO - Statement 92 ejecutado correctamente
2025-05-25 14:41:25,259 - app.api.endpoints.backup - INFO - Ejecutando statement 93/114: UNLOCK TABLES;...
2025-05-25 14:41:25,260 - app.api.endpoints.backup - INFO - Statement 93 ejecutado correctamente
2025-05-25 14:41:25,260 - app.api.endpoints.backup - INFO - Ejecutando statement 94/114: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 14:41:25,275 - app.api.endpoints.backup - INFO - Statement 94 ejecutado correctamente
2025-05-25 14:41:25,276 - app.api.endpoints.backup - INFO - Ejecutando statement 95/114: CREATE TABLE `specific_objectives` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`re...
2025-05-25 14:41:25,303 - app.api.endpoints.backup - INFO - Statement 95 ejecutado correctamente
2025-05-25 14:41:25,304 - app.api.endpoints.backup - INFO - Ejecutando statement 96/114: LOCK TABLES `specific_objectives` WRITE;...
2025-05-25 14:41:25,306 - app.api.endpoints.backup - INFO - Statement 96 ejecutado correctamente
2025-05-25 14:41:25,306 - app.api.endpoints.backup - INFO - Ejecutando statement 97/114: UNLOCK TABLES;...
2025-05-25 14:41:25,307 - app.api.endpoints.backup - INFO - Statement 97 ejecutado correctamente
2025-05-25 14:41:25,307 - app.api.endpoints.backup - INFO - Ejecutando statement 98/114: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 14:41:25,320 - app.api.endpoints.backup - INFO - Statement 98 ejecutado correctamente
2025-05-25 14:41:25,321 - app.api.endpoints.backup - INFO - Ejecutando statement 99/114: CREATE TABLE `stakeholders` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descript...
2025-05-25 14:41:25,349 - app.api.endpoints.backup - INFO - Statement 99 ejecutado correctamente
2025-05-25 14:41:25,350 - app.api.endpoints.backup - INFO - Ejecutando statement 100/114: LOCK TABLES `stakeholders` WRITE;...
2025-05-25 14:41:25,352 - app.api.endpoints.backup - INFO - Statement 100 ejecutado correctamente
2025-05-25 14:41:25,353 - app.api.endpoints.backup - INFO - Commit realizado en statement 100
2025-05-25 14:41:25,353 - app.api.endpoints.backup - INFO - Ejecutando statement 101/114: UNLOCK TABLES;...
2025-05-25 14:41:25,354 - app.api.endpoints.backup - INFO - Statement 101 ejecutado correctamente
2025-05-25 14:41:25,355 - app.api.endpoints.backup - INFO - Ejecutando statement 102/114: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 14:41:25,374 - app.api.endpoints.backup - INFO - Statement 102 ejecutado correctamente
2025-05-25 14:41:25,374 - app.api.endpoints.backup - INFO - Ejecutando statement 103/114: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:41:25,408 - app.api.endpoints.backup - INFO - Statement 103 ejecutado correctamente
2025-05-25 14:41:25,408 - app.api.endpoints.backup - INFO - Ejecutando statement 104/114: LOCK TABLES `sustainability_reports` WRITE;...
2025-05-25 14:41:25,412 - app.api.endpoints.backup - INFO - Statement 104 ejecutado correctamente
2025-05-25 14:41:25,413 - app.api.endpoints.backup - INFO - Ejecutando statement 105/114: UNLOCK TABLES;...
2025-05-25 14:41:25,413 - app.api.endpoints.backup - INFO - Statement 105 ejecutado correctamente
2025-05-25 14:41:25,414 - app.api.endpoints.backup - INFO - Ejecutando statement 106/114: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 14:41:25,416 - app.api.endpoints.backup - INFO - Statement 106 ejecutado correctamente
2025-05-25 14:41:25,417 - app.api.endpoints.backup - INFO - Ejecutando statement 107/114: CREATE TABLE `sustainability_team_members` (`id` int NOT NULL AUTO_INCREMENT,`type` enum('manager','...
2025-05-25 14:42:25,469 - app.api.endpoints.backup - ERROR - Error en statement 107: CREATE TABLE `sustainability_team_members` (`id` int NOT NULL AUTO_INCREMENT,`type` enum('manager','...
2025-05-25 14:42:25,470 - app.api.endpoints.backup - ERROR - Error: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:42:25,470 - app.api.endpoints.backup - ERROR - Stack trace completo:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 782, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/usr/local/lib/python3.10/socket.py", line 717, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 264, in _do_restore_file
    logger.warning("Conexi칩n perdida, reconectando...")
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 788, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:42:25,475 - app.api.endpoints.backup - ERROR - Error de MySQL: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:42:25,476 - app.api.endpoints.backup - ERROR - Stack trace completo:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 782, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/usr/local/lib/python3.10/socket.py", line 717, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 264, in _do_restore_file
    logger.warning("Conexi칩n perdida, reconectando...")
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 788, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:42:25,479 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 14:42:25,480 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error de MySQL: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 14:42:25,480 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 782, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/usr/local/lib/python3.10/socket.py", line 717, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 264, in _do_restore_file
    logger.warning("Conexi칩n perdida, reconectando...")
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 788, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query (timed out)')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 350, in restore_backup
    f.write(content)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 289, in _do_restore_file
    # Esperar antes de reintentar
RuntimeError: Error de MySQL: (2013, 'Lost connection to MySQL server during query (timed out)')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 364, in restore_backup
    await asyncio.to_thread(
fastapi.exceptions.HTTPException
2025-05-25 14:42:25,486 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 14:43:36,281 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:43:36,282 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:43:36,283 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_144336.sql
2025-05-25 14:43:36,286 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:43:36,287 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:43:36,289 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_144336.sql  True
2025-05-25 14:43:36,290 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:43:36,293 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:43:36,293 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:43:36,294 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:43:36,294 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:43:36,295 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:43:36,295 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:43:36,327 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:43:36,328 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:43:36,331 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 110
2025-05-25 14:43:36,332 - app.api.endpoints.backup - INFO - Ejecutando statement 1/110: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:43:36,354 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 14:43:36,354 - app.api.endpoints.backup - INFO - Ejecutando statement 2/110: CREATE TABLE `actions` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`difficulty` en...
2025-05-25 14:43:36,386 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 14:43:36,387 - app.api.endpoints.backup - INFO - Ejecutando statement 3/110: LOCK TABLES `actions` WRITE;...
2025-05-25 14:43:36,389 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 14:43:36,390 - app.api.endpoints.backup - INFO - Ejecutando statement 4/110: UNLOCK TABLES;...
2025-05-25 14:43:36,391 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 14:43:36,391 - app.api.endpoints.backup - INFO - Ejecutando statement 5/110: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 14:43:36,403 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 14:43:36,403 - app.api.endpoints.backup - INFO - Ejecutando statement 6/110: CREATE TABLE `alembic_version` (`version_num` varchar(32) NOT NULL,PRIMARY KEY (`version_num`)) ENGI...
2025-05-25 14:43:36,422 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 14:43:36,423 - app.api.endpoints.backup - INFO - Ejecutando statement 7/110: LOCK TABLES `alembic_version` WRITE;...
2025-05-25 14:43:36,424 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 14:43:36,425 - app.api.endpoints.backup - INFO - Ejecutando statement 8/110: INSERT INTO `alembic_version` VALUES('8e597e8d9c1b');...
2025-05-25 14:43:36,425 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 14:43:36,426 - app.api.endpoints.backup - INFO - Ejecutando statement 9/110: UNLOCK TABLES;...
2025-05-25 14:43:36,429 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 14:43:36,429 - app.api.endpoints.backup - INFO - Ejecutando statement 10/110: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 14:43:36,446 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 14:43:36,447 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 14:43:36,448 - app.api.endpoints.backup - INFO - Ejecutando statement 11/110: CREATE TABLE `assessments` (`id` int NOT NULL AUTO_INCREMENT,`score` int NOT NULL,`material_topic_id...
2025-05-25 14:43:36,479 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 14:43:36,480 - app.api.endpoints.backup - INFO - Ejecutando statement 12/110: LOCK TABLES `assessments` WRITE;...
2025-05-25 14:43:36,482 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 14:43:36,483 - app.api.endpoints.backup - INFO - Ejecutando statement 13/110: UNLOCK TABLES;...
2025-05-25 14:43:36,484 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 14:43:36,485 - app.api.endpoints.backup - INFO - Ejecutando statement 14/110: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 14:43:36,503 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 14:43:36,504 - app.api.endpoints.backup - INFO - Ejecutando statement 15/110: CREATE TABLE `diagnosis_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`type` en...
2025-05-25 14:43:36,531 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 14:43:36,531 - app.api.endpoints.backup - INFO - Ejecutando statement 16/110: LOCK TABLES `diagnosis_indicators` WRITE;...
2025-05-25 14:43:36,535 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 14:43:36,536 - app.api.endpoints.backup - INFO - Ejecutando statement 17/110: UNLOCK TABLES;...
2025-05-25 14:43:36,538 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 14:43:36,539 - app.api.endpoints.backup - INFO - Ejecutando statement 18/110: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 14:43:36,556 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 14:43:36,556 - app.api.endpoints.backup - INFO - Ejecutando statement 19/110: CREATE TABLE `diagnosis_indicators_qualitative` (`diagnostic_indicator_id` int NOT NULL,`response` t...
2025-05-25 14:43:36,584 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 14:43:36,584 - app.api.endpoints.backup - INFO - Ejecutando statement 20/110: LOCK TABLES `diagnosis_indicators_qualitative` WRITE;...
2025-05-25 14:43:36,587 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 14:43:36,587 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 14:43:36,588 - app.api.endpoints.backup - INFO - Ejecutando statement 21/110: UNLOCK TABLES;...
2025-05-25 14:43:36,589 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 14:43:36,589 - app.api.endpoints.backup - INFO - Ejecutando statement 22/110: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 14:43:36,602 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 14:43:36,603 - app.api.endpoints.backup - INFO - Ejecutando statement 23/110: CREATE TABLE `diagnosis_indicators_quantitative` (`diagnostic_indicator_id` int NOT NULL,`numeric_re...
2025-05-25 14:43:36,624 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 14:43:36,624 - app.api.endpoints.backup - INFO - Ejecutando statement 24/110: LOCK TABLES `diagnosis_indicators_quantitative` WRITE;...
2025-05-25 14:43:36,626 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 14:43:36,626 - app.api.endpoints.backup - INFO - Ejecutando statement 25/110: UNLOCK TABLES;...
2025-05-25 14:43:36,627 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 14:43:36,627 - app.api.endpoints.backup - INFO - Ejecutando statement 26/110: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 14:43:36,646 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 14:43:36,646 - app.api.endpoints.backup - INFO - Ejecutando statement 27/110: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 14:43:36,672 - app.api.endpoints.backup - INFO - Statement 27 ejecutado correctamente
2025-05-25 14:43:36,673 - app.api.endpoints.backup - INFO - Ejecutando statement 28/110: LOCK TABLES `dimensions` WRITE;...
2025-05-25 14:43:36,675 - app.api.endpoints.backup - INFO - Statement 28 ejecutado correctamente
2025-05-25 14:43:36,676 - app.api.endpoints.backup - INFO - Ejecutando statement 29/110: UNLOCK TABLES;...
2025-05-25 14:43:36,676 - app.api.endpoints.backup - INFO - Statement 29 ejecutado correctamente
2025-05-25 14:43:36,677 - app.api.endpoints.backup - INFO - Ejecutando statement 30/110: DROP TABLE IF EXISTS `goals`;...
2025-05-25 14:43:36,691 - app.api.endpoints.backup - INFO - Statement 30 ejecutado correctamente
2025-05-25 14:43:36,692 - app.api.endpoints.backup - INFO - Commit realizado en statement 30
2025-05-25 14:43:36,692 - app.api.endpoints.backup - INFO - Ejecutando statement 31/110: CREATE TABLE `goals` (`ods_id` int NOT NULL,`goal_number` varchar(2) NOT NULL,`description` text NOT...
2025-05-25 14:43:36,715 - app.api.endpoints.backup - INFO - Statement 31 ejecutado correctamente
2025-05-25 14:43:36,716 - app.api.endpoints.backup - INFO - Ejecutando statement 32/110: LOCK TABLES `goals` WRITE;...
2025-05-25 14:43:36,719 - app.api.endpoints.backup - INFO - Statement 32 ejecutado correctamente
2025-05-25 14:43:36,719 - app.api.endpoints.backup - INFO - Ejecutando statement 33/110: UNLOCK TABLES;...
2025-05-25 14:43:36,720 - app.api.endpoints.backup - INFO - Statement 33 ejecutado correctamente
2025-05-25 14:43:36,721 - app.api.endpoints.backup - INFO - Ejecutando statement 34/110: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 14:43:36,735 - app.api.endpoints.backup - INFO - Statement 34 ejecutado correctamente
2025-05-25 14:43:36,735 - app.api.endpoints.backup - INFO - Ejecutando statement 35/110: CREATE TABLE `heritage_resource_social_networks` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int...
2025-05-25 14:43:36,761 - app.api.endpoints.backup - INFO - Statement 35 ejecutado correctamente
2025-05-25 14:43:36,761 - app.api.endpoints.backup - INFO - Ejecutando statement 36/110: LOCK TABLES `heritage_resource_social_networks` WRITE;...
2025-05-25 14:43:36,764 - app.api.endpoints.backup - INFO - Statement 36 ejecutado correctamente
2025-05-25 14:43:36,764 - app.api.endpoints.backup - INFO - Ejecutando statement 37/110: UNLOCK TABLES;...
2025-05-25 14:43:36,765 - app.api.endpoints.backup - INFO - Statement 37 ejecutado correctamente
2025-05-25 14:43:36,766 - app.api.endpoints.backup - INFO - Ejecutando statement 38/110: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 14:43:36,781 - app.api.endpoints.backup - INFO - Statement 38 ejecutado correctamente
2025-05-25 14:43:36,781 - app.api.endpoints.backup - INFO - Ejecutando statement 39/110: CREATE TABLE `heritage_resource_typologies` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int DEFA...
2025-05-25 14:43:36,808 - app.api.endpoints.backup - INFO - Statement 39 ejecutado correctamente
2025-05-25 14:43:36,808 - app.api.endpoints.backup - INFO - Ejecutando statement 40/110: LOCK TABLES `heritage_resource_typologies` WRITE;...
2025-05-25 14:43:36,810 - app.api.endpoints.backup - INFO - Statement 40 ejecutado correctamente
2025-05-25 14:43:36,810 - app.api.endpoints.backup - INFO - Commit realizado en statement 40
2025-05-25 14:43:36,811 - app.api.endpoints.backup - INFO - Ejecutando statement 41/110: UNLOCK TABLES;...
2025-05-25 14:43:36,812 - app.api.endpoints.backup - INFO - Statement 41 ejecutado correctamente
2025-05-25 14:43:36,812 - app.api.endpoints.backup - INFO - Ejecutando statement 42/110: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 14:43:36,833 - app.api.endpoints.backup - INFO - Statement 42 ejecutado correctamente
2025-05-25 14:43:36,834 - app.api.endpoints.backup - INFO - Ejecutando statement 43/110: CREATE TABLE `heritage_resources` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`ow...
2025-05-25 14:43:36,862 - app.api.endpoints.backup - INFO - Statement 43 ejecutado correctamente
2025-05-25 14:43:36,862 - app.api.endpoints.backup - INFO - Ejecutando statement 44/110: LOCK TABLES `heritage_resources` WRITE;...
2025-05-25 14:43:36,868 - app.api.endpoints.backup - INFO - Statement 44 ejecutado correctamente
2025-05-25 14:43:36,868 - app.api.endpoints.backup - INFO - Ejecutando statement 45/110: UNLOCK TABLES;...
2025-05-25 14:43:36,870 - app.api.endpoints.backup - INFO - Statement 45 ejecutado correctamente
2025-05-25 14:43:36,871 - app.api.endpoints.backup - INFO - Ejecutando statement 46/110: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 14:43:36,892 - app.api.endpoints.backup - INFO - Statement 46 ejecutado correctamente
2025-05-25 14:43:36,892 - app.api.endpoints.backup - INFO - Ejecutando statement 47/110: CREATE TABLE `material_topics` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descr...
2025-05-25 14:43:36,927 - app.api.endpoints.backup - INFO - Statement 47 ejecutado correctamente
2025-05-25 14:43:36,928 - app.api.endpoints.backup - INFO - Ejecutando statement 48/110: LOCK TABLES `material_topics` WRITE;...
2025-05-25 14:43:36,932 - app.api.endpoints.backup - INFO - Statement 48 ejecutado correctamente
2025-05-25 14:43:36,933 - app.api.endpoints.backup - INFO - Ejecutando statement 49/110: UNLOCK TABLES;...
2025-05-25 14:43:36,934 - app.api.endpoints.backup - INFO - Statement 49 ejecutado correctamente
2025-05-25 14:43:36,935 - app.api.endpoints.backup - INFO - Ejecutando statement 50/110: DROP TABLE IF EXISTS `ods`;...
2025-05-25 14:43:36,948 - app.api.endpoints.backup - INFO - Statement 50 ejecutado correctamente
2025-05-25 14:43:36,948 - app.api.endpoints.backup - INFO - Commit realizado en statement 50
2025-05-25 14:43:36,949 - app.api.endpoints.backup - INFO - Ejecutando statement 51/110: CREATE TABLE `ods` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`description` text...
2025-05-25 14:43:36,987 - app.api.endpoints.backup - INFO - Statement 51 ejecutado correctamente
2025-05-25 14:43:36,988 - app.api.endpoints.backup - INFO - Ejecutando statement 52/110: LOCK TABLES `ods` WRITE;...
2025-05-25 14:43:36,991 - app.api.endpoints.backup - INFO - Statement 52 ejecutado correctamente
2025-05-25 14:43:36,992 - app.api.endpoints.backup - INFO - Ejecutando statement 53/110: UNLOCK TABLES;...
2025-05-25 14:43:36,993 - app.api.endpoints.backup - INFO - Statement 53 ejecutado correctamente
2025-05-25 14:43:36,993 - app.api.endpoints.backup - INFO - Ejecutando statement 54/110: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 14:43:37,011 - app.api.endpoints.backup - INFO - Statement 54 ejecutado correctamente
2025-05-25 14:43:37,012 - app.api.endpoints.backup - INFO - Ejecutando statement 55/110: CREATE TABLE `performance_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`human_...
2025-05-25 14:43:37,040 - app.api.endpoints.backup - INFO - Statement 55 ejecutado correctamente
2025-05-25 14:43:37,041 - app.api.endpoints.backup - INFO - Ejecutando statement 56/110: LOCK TABLES `performance_indicators` WRITE;...
2025-05-25 14:43:37,043 - app.api.endpoints.backup - INFO - Statement 56 ejecutado correctamente
2025-05-25 14:43:37,043 - app.api.endpoints.backup - INFO - Ejecutando statement 57/110: UNLOCK TABLES;...
2025-05-25 14:43:37,044 - app.api.endpoints.backup - INFO - Statement 57 ejecutado correctamente
2025-05-25 14:43:37,044 - app.api.endpoints.backup - INFO - Ejecutando statement 58/110: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 14:43:37,057 - app.api.endpoints.backup - INFO - Statement 58 ejecutado correctamente
2025-05-25 14:43:37,057 - app.api.endpoints.backup - INFO - Ejecutando statement 59/110: CREATE TABLE `performance_indicators_qualitative` (`performance_indicator_id` int NOT NULL,`response...
2025-05-25 14:43:37,077 - app.api.endpoints.backup - INFO - Statement 59 ejecutado correctamente
2025-05-25 14:43:37,077 - app.api.endpoints.backup - INFO - Ejecutando statement 60/110: LOCK TABLES `performance_indicators_qualitative` WRITE;...
2025-05-25 14:43:37,079 - app.api.endpoints.backup - INFO - Statement 60 ejecutado correctamente
2025-05-25 14:43:37,080 - app.api.endpoints.backup - INFO - Commit realizado en statement 60
2025-05-25 14:43:37,080 - app.api.endpoints.backup - INFO - Ejecutando statement 61/110: UNLOCK TABLES;...
2025-05-25 14:43:37,082 - app.api.endpoints.backup - INFO - Statement 61 ejecutado correctamente
2025-05-25 14:43:37,082 - app.api.endpoints.backup - INFO - Ejecutando statement 62/110: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 14:43:37,096 - app.api.endpoints.backup - INFO - Statement 62 ejecutado correctamente
2025-05-25 14:43:37,096 - app.api.endpoints.backup - INFO - Ejecutando statement 63/110: CREATE TABLE `performance_indicators_quantitative` (`performance_indicator_id` int NOT NULL,`numeric...
2025-05-25 14:43:37,116 - app.api.endpoints.backup - INFO - Statement 63 ejecutado correctamente
2025-05-25 14:43:37,117 - app.api.endpoints.backup - INFO - Ejecutando statement 64/110: LOCK TABLES `performance_indicators_quantitative` WRITE;...
2025-05-25 14:43:37,119 - app.api.endpoints.backup - INFO - Statement 64 ejecutado correctamente
2025-05-25 14:43:37,120 - app.api.endpoints.backup - INFO - Ejecutando statement 65/110: UNLOCK TABLES;...
2025-05-25 14:43:37,122 - app.api.endpoints.backup - INFO - Statement 65 ejecutado correctamente
2025-05-25 14:43:37,122 - app.api.endpoints.backup - INFO - Ejecutando statement 66/110: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 14:43:37,137 - app.api.endpoints.backup - INFO - Statement 66 ejecutado correctamente
2025-05-25 14:43:37,138 - app.api.endpoints.backup - INFO - Ejecutando statement 67/110: CREATE TABLE `report_agreements` (`id` int NOT NULL AUTO_INCREMENT,`agreement` text NOT NULL,`report...
2025-05-25 14:43:37,163 - app.api.endpoints.backup - INFO - Statement 67 ejecutado correctamente
2025-05-25 14:43:37,163 - app.api.endpoints.backup - INFO - Ejecutando statement 68/110: LOCK TABLES `report_agreements` WRITE;...
2025-05-25 14:43:37,165 - app.api.endpoints.backup - INFO - Statement 68 ejecutado correctamente
2025-05-25 14:43:37,166 - app.api.endpoints.backup - INFO - Ejecutando statement 69/110: UNLOCK TABLES;...
2025-05-25 14:43:37,167 - app.api.endpoints.backup - INFO - Statement 69 ejecutado correctamente
2025-05-25 14:43:37,167 - app.api.endpoints.backup - INFO - Ejecutando statement 70/110: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 14:43:37,181 - app.api.endpoints.backup - INFO - Statement 70 ejecutado correctamente
2025-05-25 14:43:37,182 - app.api.endpoints.backup - INFO - Commit realizado en statement 70
2025-05-25 14:43:37,182 - app.api.endpoints.backup - INFO - Ejecutando statement 71/110: CREATE TABLE `report_bibliographies` (`id` int NOT NULL AUTO_INCREMENT,`reference` text NOT NULL,`re...
2025-05-25 14:43:37,207 - app.api.endpoints.backup - INFO - Statement 71 ejecutado correctamente
2025-05-25 14:43:37,208 - app.api.endpoints.backup - INFO - Ejecutando statement 72/110: LOCK TABLES `report_bibliographies` WRITE;...
2025-05-25 14:43:37,210 - app.api.endpoints.backup - INFO - Statement 72 ejecutado correctamente
2025-05-25 14:43:37,210 - app.api.endpoints.backup - INFO - Ejecutando statement 73/110: UNLOCK TABLES;...
2025-05-25 14:43:37,211 - app.api.endpoints.backup - INFO - Statement 73 ejecutado correctamente
2025-05-25 14:43:37,211 - app.api.endpoints.backup - INFO - Ejecutando statement 74/110: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 14:43:37,227 - app.api.endpoints.backup - INFO - Statement 74 ejecutado correctamente
2025-05-25 14:43:37,227 - app.api.endpoints.backup - INFO - Ejecutando statement 75/110: CREATE TABLE `report_logos` (`id` int NOT NULL AUTO_INCREMENT,`logo` varchar(255) NOT NULL,`report_i...
2025-05-25 14:43:37,253 - app.api.endpoints.backup - INFO - Statement 75 ejecutado correctamente
2025-05-25 14:43:37,253 - app.api.endpoints.backup - INFO - Ejecutando statement 76/110: LOCK TABLES `report_logos` WRITE;...
2025-05-25 14:43:37,255 - app.api.endpoints.backup - INFO - Statement 76 ejecutado correctamente
2025-05-25 14:43:37,255 - app.api.endpoints.backup - INFO - Ejecutando statement 77/110: UNLOCK TABLES;...
2025-05-25 14:43:37,256 - app.api.endpoints.backup - INFO - Statement 77 ejecutado correctamente
2025-05-25 14:43:37,256 - app.api.endpoints.backup - INFO - Ejecutando statement 78/110: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 14:43:37,272 - app.api.endpoints.backup - INFO - Statement 78 ejecutado correctamente
2025-05-25 14:43:37,272 - app.api.endpoints.backup - INFO - Ejecutando statement 79/110: CREATE TABLE `report_norms` (`id` int NOT NULL AUTO_INCREMENT,`norm` text NOT NULL,`report_id` int N...
2025-05-25 14:43:37,294 - app.api.endpoints.backup - INFO - Statement 79 ejecutado correctamente
2025-05-25 14:43:37,295 - app.api.endpoints.backup - INFO - Ejecutando statement 80/110: LOCK TABLES `report_norms` WRITE;...
2025-05-25 14:43:37,298 - app.api.endpoints.backup - INFO - Statement 80 ejecutado correctamente
2025-05-25 14:43:37,298 - app.api.endpoints.backup - INFO - Commit realizado en statement 80
2025-05-25 14:43:37,299 - app.api.endpoints.backup - INFO - Ejecutando statement 81/110: UNLOCK TABLES;...
2025-05-25 14:43:37,300 - app.api.endpoints.backup - INFO - Statement 81 ejecutado correctamente
2025-05-25 14:43:37,301 - app.api.endpoints.backup - INFO - Ejecutando statement 82/110: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 14:43:37,314 - app.api.endpoints.backup - INFO - Statement 82 ejecutado correctamente
2025-05-25 14:43:37,314 - app.api.endpoints.backup - INFO - Ejecutando statement 83/110: CREATE TABLE `report_photos` (`id` int NOT NULL AUTO_INCREMENT,`photo` varchar(255) NOT NULL,`report...
2025-05-25 14:43:37,341 - app.api.endpoints.backup - INFO - Statement 83 ejecutado correctamente
2025-05-25 14:43:37,341 - app.api.endpoints.backup - INFO - Ejecutando statement 84/110: LOCK TABLES `report_photos` WRITE;...
2025-05-25 14:43:37,343 - app.api.endpoints.backup - INFO - Statement 84 ejecutado correctamente
2025-05-25 14:43:37,343 - app.api.endpoints.backup - INFO - Ejecutando statement 85/110: UNLOCK TABLES;...
2025-05-25 14:43:37,344 - app.api.endpoints.backup - INFO - Statement 85 ejecutado correctamente
2025-05-25 14:43:37,345 - app.api.endpoints.backup - INFO - Ejecutando statement 86/110: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 14:43:37,360 - app.api.endpoints.backup - INFO - Statement 86 ejecutado correctamente
2025-05-25 14:43:37,360 - app.api.endpoints.backup - INFO - Ejecutando statement 87/110: CREATE TABLE `secondary_ods_actions` (`action_id` int NOT NULL,`specific_objective_id` int NOT NULL,...
2025-05-25 14:43:37,391 - app.api.endpoints.backup - INFO - Statement 87 ejecutado correctamente
2025-05-25 14:43:37,392 - app.api.endpoints.backup - INFO - Ejecutando statement 88/110: LOCK TABLES `secondary_ods_actions` WRITE;...
2025-05-25 14:43:37,393 - app.api.endpoints.backup - INFO - Statement 88 ejecutado correctamente
2025-05-25 14:43:37,393 - app.api.endpoints.backup - INFO - Ejecutando statement 89/110: UNLOCK TABLES;...
2025-05-25 14:43:37,394 - app.api.endpoints.backup - INFO - Statement 89 ejecutado correctamente
2025-05-25 14:43:37,395 - app.api.endpoints.backup - INFO - Ejecutando statement 90/110: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 14:43:37,410 - app.api.endpoints.backup - INFO - Statement 90 ejecutado correctamente
2025-05-25 14:43:37,410 - app.api.endpoints.backup - INFO - Commit realizado en statement 90
2025-05-25 14:43:37,410 - app.api.endpoints.backup - INFO - Ejecutando statement 91/110: CREATE TABLE `secondary_ods_material_topics` (`ods_id` int NOT NULL,`material_topic_id` int NOT NULL...
2025-05-25 14:43:37,438 - app.api.endpoints.backup - INFO - Statement 91 ejecutado correctamente
2025-05-25 14:43:37,438 - app.api.endpoints.backup - INFO - Ejecutando statement 92/110: LOCK TABLES `secondary_ods_material_topics` WRITE;...
2025-05-25 14:43:37,440 - app.api.endpoints.backup - INFO - Statement 92 ejecutado correctamente
2025-05-25 14:43:37,440 - app.api.endpoints.backup - INFO - Ejecutando statement 93/110: UNLOCK TABLES;...
2025-05-25 14:43:37,441 - app.api.endpoints.backup - INFO - Statement 93 ejecutado correctamente
2025-05-25 14:43:37,441 - app.api.endpoints.backup - INFO - Ejecutando statement 94/110: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 14:43:37,456 - app.api.endpoints.backup - INFO - Statement 94 ejecutado correctamente
2025-05-25 14:43:37,456 - app.api.endpoints.backup - INFO - Ejecutando statement 95/110: CREATE TABLE `specific_objectives` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`re...
2025-05-25 14:43:37,483 - app.api.endpoints.backup - INFO - Statement 95 ejecutado correctamente
2025-05-25 14:43:37,484 - app.api.endpoints.backup - INFO - Ejecutando statement 96/110: LOCK TABLES `specific_objectives` WRITE;...
2025-05-25 14:43:37,487 - app.api.endpoints.backup - INFO - Statement 96 ejecutado correctamente
2025-05-25 14:43:37,487 - app.api.endpoints.backup - INFO - Ejecutando statement 97/110: UNLOCK TABLES;...
2025-05-25 14:43:37,488 - app.api.endpoints.backup - INFO - Statement 97 ejecutado correctamente
2025-05-25 14:43:37,489 - app.api.endpoints.backup - INFO - Ejecutando statement 98/110: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 14:43:37,505 - app.api.endpoints.backup - INFO - Statement 98 ejecutado correctamente
2025-05-25 14:43:37,505 - app.api.endpoints.backup - INFO - Ejecutando statement 99/110: CREATE TABLE `stakeholders` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descript...
2025-05-25 14:43:37,531 - app.api.endpoints.backup - INFO - Statement 99 ejecutado correctamente
2025-05-25 14:43:37,532 - app.api.endpoints.backup - INFO - Ejecutando statement 100/110: LOCK TABLES `stakeholders` WRITE;...
2025-05-25 14:43:37,534 - app.api.endpoints.backup - INFO - Statement 100 ejecutado correctamente
2025-05-25 14:43:37,535 - app.api.endpoints.backup - INFO - Commit realizado en statement 100
2025-05-25 14:43:37,535 - app.api.endpoints.backup - INFO - Ejecutando statement 101/110: UNLOCK TABLES;...
2025-05-25 14:43:37,537 - app.api.endpoints.backup - INFO - Statement 101 ejecutado correctamente
2025-05-25 14:43:37,537 - app.api.endpoints.backup - INFO - Ejecutando statement 102/110: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 14:43:37,556 - app.api.endpoints.backup - INFO - Statement 102 ejecutado correctamente
2025-05-25 14:43:37,556 - app.api.endpoints.backup - INFO - Ejecutando statement 103/110: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:43:37,593 - app.api.endpoints.backup - INFO - Statement 103 ejecutado correctamente
2025-05-25 14:43:37,593 - app.api.endpoints.backup - INFO - Ejecutando statement 104/110: LOCK TABLES `sustainability_reports` WRITE;...
2025-05-25 14:43:37,598 - app.api.endpoints.backup - INFO - Statement 104 ejecutado correctamente
2025-05-25 14:43:37,599 - app.api.endpoints.backup - INFO - Ejecutando statement 105/110: UNLOCK TABLES;...
2025-05-25 14:43:37,601 - app.api.endpoints.backup - INFO - Statement 105 ejecutado correctamente
2025-05-25 14:43:37,601 - app.api.endpoints.backup - INFO - Ejecutando statement 106/110: DROP TABLE IF EXISTS `users`;...
2025-05-25 14:45:41,159 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:45:41,160 - app.api.endpoints.backup - INFO - Archivo recibido: prueba.sql
2025-05-25 14:45:41,160 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_144541.sql
2025-05-25 14:45:41,163 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:45:41,165 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:45:41,167 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_144541.sql  True
2025-05-25 14:45:41,168 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:45:41,171 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:45:41,171 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:45:41,172 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:45:41,172 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:45:41,173 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:45:41,173 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:45:41,181 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:45:41,182 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:45:41,185 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 110
2025-05-25 14:45:41,185 - app.api.endpoints.backup - INFO - Ejecutando statement 1/110: DROP TABLE IF EXISTS `users`;...
2025-05-25 14:47:31,668 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:47:31,671 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqldump -h db -P 3306 -u root -pcontrasenaprueba sustainability_db
2025-05-25 14:47:31,800 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 14:47:52,956 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:47:52,956 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 14:47:52,957 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_144752.sql
2025-05-25 14:47:52,959 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:47:52,959 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:47:52,961 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_144752.sql  True
2025-05-25 14:47:52,961 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:47:52,963 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:47:52,964 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:47:52,964 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:47:52,965 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:47:52,965 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:47:52,966 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:47:52,976 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:47:52,977 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:47:52,979 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 117
2025-05-25 14:47:52,980 - app.api.endpoints.backup - INFO - Ejecutando statement 1/117: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:47:52,997 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 14:47:52,997 - app.api.endpoints.backup - INFO - Ejecutando statement 2/117: CREATE TABLE `actions` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`difficulty` en...
2025-05-25 14:47:53,030 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 14:47:53,031 - app.api.endpoints.backup - INFO - Ejecutando statement 3/117: LOCK TABLES `actions` WRITE;...
2025-05-25 14:47:53,034 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 14:47:53,035 - app.api.endpoints.backup - INFO - Ejecutando statement 4/117: UNLOCK TABLES;...
2025-05-25 14:47:53,036 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 14:47:53,036 - app.api.endpoints.backup - INFO - Ejecutando statement 5/117: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 14:47:53,047 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 14:47:53,047 - app.api.endpoints.backup - INFO - Ejecutando statement 6/117: CREATE TABLE `alembic_version` (`version_num` varchar(32) NOT NULL,PRIMARY KEY (`version_num`)) ENGI...
2025-05-25 14:47:53,067 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 14:47:53,068 - app.api.endpoints.backup - INFO - Ejecutando statement 7/117: LOCK TABLES `alembic_version` WRITE;...
2025-05-25 14:47:53,070 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 14:47:53,070 - app.api.endpoints.backup - INFO - Ejecutando statement 8/117: INSERT INTO `alembic_version` VALUES('8e597e8d9c1b');...
2025-05-25 14:47:53,071 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 14:47:53,071 - app.api.endpoints.backup - INFO - Ejecutando statement 9/117: UNLOCK TABLES;...
2025-05-25 14:47:53,075 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 14:47:53,076 - app.api.endpoints.backup - INFO - Ejecutando statement 10/117: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 14:47:53,090 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 14:47:53,090 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 14:47:53,091 - app.api.endpoints.backup - INFO - Ejecutando statement 11/117: CREATE TABLE `assessments` (`id` int NOT NULL AUTO_INCREMENT,`score` int NOT NULL,`material_topic_id...
2025-05-25 14:47:53,127 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 14:47:53,128 - app.api.endpoints.backup - INFO - Ejecutando statement 12/117: LOCK TABLES `assessments` WRITE;...
2025-05-25 14:47:53,130 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 14:47:53,130 - app.api.endpoints.backup - INFO - Ejecutando statement 13/117: UNLOCK TABLES;...
2025-05-25 14:47:53,131 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 14:47:53,132 - app.api.endpoints.backup - INFO - Ejecutando statement 14/117: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 14:47:53,153 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 14:47:53,153 - app.api.endpoints.backup - INFO - Ejecutando statement 15/117: CREATE TABLE `diagnosis_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`type` en...
2025-05-25 14:47:53,187 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 14:47:53,187 - app.api.endpoints.backup - INFO - Ejecutando statement 16/117: LOCK TABLES `diagnosis_indicators` WRITE;...
2025-05-25 14:47:53,190 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 14:47:53,191 - app.api.endpoints.backup - INFO - Ejecutando statement 17/117: UNLOCK TABLES;...
2025-05-25 14:47:53,192 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 14:47:53,192 - app.api.endpoints.backup - INFO - Ejecutando statement 18/117: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 14:47:53,205 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 14:47:53,205 - app.api.endpoints.backup - INFO - Ejecutando statement 19/117: CREATE TABLE `diagnosis_indicators_qualitative` (`diagnostic_indicator_id` int NOT NULL,`response` t...
2025-05-25 14:47:53,225 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 14:47:53,226 - app.api.endpoints.backup - INFO - Ejecutando statement 20/117: LOCK TABLES `diagnosis_indicators_qualitative` WRITE;...
2025-05-25 14:47:53,227 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 14:47:53,228 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 14:47:53,228 - app.api.endpoints.backup - INFO - Ejecutando statement 21/117: UNLOCK TABLES;...
2025-05-25 14:47:53,229 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 14:47:53,229 - app.api.endpoints.backup - INFO - Ejecutando statement 22/117: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 14:47:53,244 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 14:47:53,244 - app.api.endpoints.backup - INFO - Ejecutando statement 23/117: CREATE TABLE `diagnosis_indicators_quantitative` (`diagnostic_indicator_id` int NOT NULL,`numeric_re...
2025-05-25 14:47:53,264 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 14:47:53,264 - app.api.endpoints.backup - INFO - Ejecutando statement 24/117: LOCK TABLES `diagnosis_indicators_quantitative` WRITE;...
2025-05-25 14:47:53,267 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 14:47:53,267 - app.api.endpoints.backup - INFO - Ejecutando statement 25/117: UNLOCK TABLES;...
2025-05-25 14:47:53,268 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 14:47:53,269 - app.api.endpoints.backup - INFO - Ejecutando statement 26/117: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 14:47:53,282 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 14:47:53,283 - app.api.endpoints.backup - INFO - Ejecutando statement 27/117: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 14:47:53,310 - app.api.endpoints.backup - INFO - Statement 27 ejecutado correctamente
2025-05-25 14:47:53,310 - app.api.endpoints.backup - INFO - Ejecutando statement 28/117: LOCK TABLES `dimensions` WRITE;...
2025-05-25 14:47:53,313 - app.api.endpoints.backup - INFO - Statement 28 ejecutado correctamente
2025-05-25 14:47:53,313 - app.api.endpoints.backup - INFO - Ejecutando statement 29/117: UNLOCK TABLES;...
2025-05-25 14:47:53,314 - app.api.endpoints.backup - INFO - Statement 29 ejecutado correctamente
2025-05-25 14:47:53,314 - app.api.endpoints.backup - INFO - Ejecutando statement 30/117: DROP TABLE IF EXISTS `goals`;...
2025-05-25 14:47:53,328 - app.api.endpoints.backup - INFO - Statement 30 ejecutado correctamente
2025-05-25 14:47:53,328 - app.api.endpoints.backup - INFO - Commit realizado en statement 30
2025-05-25 14:47:53,329 - app.api.endpoints.backup - INFO - Ejecutando statement 31/117: CREATE TABLE `goals` (`ods_id` int NOT NULL,`goal_number` varchar(2) NOT NULL,`description` text NOT...
2025-05-25 14:47:53,351 - app.api.endpoints.backup - INFO - Statement 31 ejecutado correctamente
2025-05-25 14:47:53,351 - app.api.endpoints.backup - INFO - Ejecutando statement 32/117: LOCK TABLES `goals` WRITE;...
2025-05-25 14:47:53,354 - app.api.endpoints.backup - INFO - Statement 32 ejecutado correctamente
2025-05-25 14:47:53,354 - app.api.endpoints.backup - INFO - Ejecutando statement 33/117: UNLOCK TABLES;...
2025-05-25 14:47:53,355 - app.api.endpoints.backup - INFO - Statement 33 ejecutado correctamente
2025-05-25 14:47:53,355 - app.api.endpoints.backup - INFO - Ejecutando statement 34/117: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 14:47:53,369 - app.api.endpoints.backup - INFO - Statement 34 ejecutado correctamente
2025-05-25 14:47:53,370 - app.api.endpoints.backup - INFO - Ejecutando statement 35/117: CREATE TABLE `heritage_resource_social_networks` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int...
2025-05-25 14:47:53,406 - app.api.endpoints.backup - INFO - Statement 35 ejecutado correctamente
2025-05-25 14:47:53,407 - app.api.endpoints.backup - INFO - Ejecutando statement 36/117: LOCK TABLES `heritage_resource_social_networks` WRITE;...
2025-05-25 14:47:53,409 - app.api.endpoints.backup - INFO - Statement 36 ejecutado correctamente
2025-05-25 14:47:53,409 - app.api.endpoints.backup - INFO - Ejecutando statement 37/117: UNLOCK TABLES;...
2025-05-25 14:47:53,410 - app.api.endpoints.backup - INFO - Statement 37 ejecutado correctamente
2025-05-25 14:47:53,410 - app.api.endpoints.backup - INFO - Ejecutando statement 38/117: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 14:47:53,424 - app.api.endpoints.backup - INFO - Statement 38 ejecutado correctamente
2025-05-25 14:47:53,425 - app.api.endpoints.backup - INFO - Ejecutando statement 39/117: CREATE TABLE `heritage_resource_typologies` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int DEFA...
2025-05-25 14:47:53,452 - app.api.endpoints.backup - INFO - Statement 39 ejecutado correctamente
2025-05-25 14:47:53,452 - app.api.endpoints.backup - INFO - Ejecutando statement 40/117: LOCK TABLES `heritage_resource_typologies` WRITE;...
2025-05-25 14:47:53,454 - app.api.endpoints.backup - INFO - Statement 40 ejecutado correctamente
2025-05-25 14:47:53,455 - app.api.endpoints.backup - INFO - Commit realizado en statement 40
2025-05-25 14:47:53,455 - app.api.endpoints.backup - INFO - Ejecutando statement 41/117: INSERT INTO `heritage_resource_typologies` VALUES(1,1,'Patrimonio cultural');...
2025-05-25 14:47:53,456 - app.api.endpoints.backup - INFO - Statement 41 ejecutado correctamente
2025-05-25 14:47:53,457 - app.api.endpoints.backup - INFO - Ejecutando statement 42/117: UNLOCK TABLES;...
2025-05-25 14:47:53,460 - app.api.endpoints.backup - INFO - Statement 42 ejecutado correctamente
2025-05-25 14:47:53,460 - app.api.endpoints.backup - INFO - Ejecutando statement 43/117: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 14:47:53,479 - app.api.endpoints.backup - INFO - Statement 43 ejecutado correctamente
2025-05-25 14:47:53,479 - app.api.endpoints.backup - INFO - Ejecutando statement 44/117: CREATE TABLE `heritage_resources` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`ow...
2025-05-25 14:47:53,510 - app.api.endpoints.backup - INFO - Statement 44 ejecutado correctamente
2025-05-25 14:47:53,510 - app.api.endpoints.backup - INFO - Ejecutando statement 45/117: LOCK TABLES `heritage_resources` WRITE;...
2025-05-25 14:47:53,513 - app.api.endpoints.backup - INFO - Statement 45 ejecutado correctamente
2025-05-25 14:47:53,513 - app.api.endpoints.backup - INFO - Ejecutando statement 46/117: INSERT INTO `heritage_resources` VALUES(1,'otro','','','','','');...
2025-05-25 14:47:53,514 - app.api.endpoints.backup - INFO - Statement 46 ejecutado correctamente
2025-05-25 14:47:53,515 - app.api.endpoints.backup - INFO - Ejecutando statement 47/117: UNLOCK TABLES;...
2025-05-25 14:47:53,519 - app.api.endpoints.backup - INFO - Statement 47 ejecutado correctamente
2025-05-25 14:47:53,520 - app.api.endpoints.backup - INFO - Ejecutando statement 48/117: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 14:47:53,537 - app.api.endpoints.backup - INFO - Statement 48 ejecutado correctamente
2025-05-25 14:47:53,538 - app.api.endpoints.backup - INFO - Ejecutando statement 49/117: CREATE TABLE `material_topics` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descr...
2025-05-25 14:47:53,575 - app.api.endpoints.backup - INFO - Statement 49 ejecutado correctamente
2025-05-25 14:47:53,576 - app.api.endpoints.backup - INFO - Ejecutando statement 50/117: LOCK TABLES `material_topics` WRITE;...
2025-05-25 14:47:53,579 - app.api.endpoints.backup - INFO - Statement 50 ejecutado correctamente
2025-05-25 14:47:53,579 - app.api.endpoints.backup - INFO - Commit realizado en statement 50
2025-05-25 14:47:53,580 - app.api.endpoints.backup - INFO - Ejecutando statement 51/117: UNLOCK TABLES;...
2025-05-25 14:47:53,581 - app.api.endpoints.backup - INFO - Statement 51 ejecutado correctamente
2025-05-25 14:47:53,581 - app.api.endpoints.backup - INFO - Ejecutando statement 52/117: DROP TABLE IF EXISTS `ods`;...
2025-05-25 14:47:53,598 - app.api.endpoints.backup - INFO - Statement 52 ejecutado correctamente
2025-05-25 14:47:53,599 - app.api.endpoints.backup - INFO - Ejecutando statement 53/117: CREATE TABLE `ods` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`description` text...
2025-05-25 14:47:53,632 - app.api.endpoints.backup - INFO - Statement 53 ejecutado correctamente
2025-05-25 14:47:53,633 - app.api.endpoints.backup - INFO - Ejecutando statement 54/117: LOCK TABLES `ods` WRITE;...
2025-05-25 14:47:53,636 - app.api.endpoints.backup - INFO - Statement 54 ejecutado correctamente
2025-05-25 14:47:53,637 - app.api.endpoints.backup - INFO - Ejecutando statement 55/117: UNLOCK TABLES;...
2025-05-25 14:47:53,638 - app.api.endpoints.backup - INFO - Statement 55 ejecutado correctamente
2025-05-25 14:47:53,638 - app.api.endpoints.backup - INFO - Ejecutando statement 56/117: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 14:47:53,653 - app.api.endpoints.backup - INFO - Statement 56 ejecutado correctamente
2025-05-25 14:47:53,653 - app.api.endpoints.backup - INFO - Ejecutando statement 57/117: CREATE TABLE `performance_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`human_...
2025-05-25 14:47:53,682 - app.api.endpoints.backup - INFO - Statement 57 ejecutado correctamente
2025-05-25 14:47:53,682 - app.api.endpoints.backup - INFO - Ejecutando statement 58/117: LOCK TABLES `performance_indicators` WRITE;...
2025-05-25 14:47:53,685 - app.api.endpoints.backup - INFO - Statement 58 ejecutado correctamente
2025-05-25 14:47:53,686 - app.api.endpoints.backup - INFO - Ejecutando statement 59/117: UNLOCK TABLES;...
2025-05-25 14:47:53,687 - app.api.endpoints.backup - INFO - Statement 59 ejecutado correctamente
2025-05-25 14:47:53,687 - app.api.endpoints.backup - INFO - Ejecutando statement 60/117: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 14:47:53,703 - app.api.endpoints.backup - INFO - Statement 60 ejecutado correctamente
2025-05-25 14:47:53,703 - app.api.endpoints.backup - INFO - Commit realizado en statement 60
2025-05-25 14:47:53,704 - app.api.endpoints.backup - INFO - Ejecutando statement 61/117: CREATE TABLE `performance_indicators_qualitative` (`performance_indicator_id` int NOT NULL,`response...
2025-05-25 14:47:53,726 - app.api.endpoints.backup - INFO - Statement 61 ejecutado correctamente
2025-05-25 14:47:53,727 - app.api.endpoints.backup - INFO - Ejecutando statement 62/117: LOCK TABLES `performance_indicators_qualitative` WRITE;...
2025-05-25 14:47:53,728 - app.api.endpoints.backup - INFO - Statement 62 ejecutado correctamente
2025-05-25 14:47:53,728 - app.api.endpoints.backup - INFO - Ejecutando statement 63/117: UNLOCK TABLES;...
2025-05-25 14:47:53,729 - app.api.endpoints.backup - INFO - Statement 63 ejecutado correctamente
2025-05-25 14:47:53,729 - app.api.endpoints.backup - INFO - Ejecutando statement 64/117: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 14:47:53,743 - app.api.endpoints.backup - INFO - Statement 64 ejecutado correctamente
2025-05-25 14:47:53,743 - app.api.endpoints.backup - INFO - Ejecutando statement 65/117: CREATE TABLE `performance_indicators_quantitative` (`performance_indicator_id` int NOT NULL,`numeric...
2025-05-25 14:47:53,765 - app.api.endpoints.backup - INFO - Statement 65 ejecutado correctamente
2025-05-25 14:47:53,765 - app.api.endpoints.backup - INFO - Ejecutando statement 66/117: LOCK TABLES `performance_indicators_quantitative` WRITE;...
2025-05-25 14:47:53,768 - app.api.endpoints.backup - INFO - Statement 66 ejecutado correctamente
2025-05-25 14:47:53,768 - app.api.endpoints.backup - INFO - Ejecutando statement 67/117: UNLOCK TABLES;...
2025-05-25 14:47:53,769 - app.api.endpoints.backup - INFO - Statement 67 ejecutado correctamente
2025-05-25 14:47:53,769 - app.api.endpoints.backup - INFO - Ejecutando statement 68/117: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 14:47:53,782 - app.api.endpoints.backup - INFO - Statement 68 ejecutado correctamente
2025-05-25 14:47:53,783 - app.api.endpoints.backup - INFO - Ejecutando statement 69/117: CREATE TABLE `report_agreements` (`id` int NOT NULL AUTO_INCREMENT,`agreement` text NOT NULL,`report...
2025-05-25 14:47:53,810 - app.api.endpoints.backup - INFO - Statement 69 ejecutado correctamente
2025-05-25 14:47:53,810 - app.api.endpoints.backup - INFO - Ejecutando statement 70/117: LOCK TABLES `report_agreements` WRITE;...
2025-05-25 14:47:53,812 - app.api.endpoints.backup - INFO - Statement 70 ejecutado correctamente
2025-05-25 14:47:53,812 - app.api.endpoints.backup - INFO - Commit realizado en statement 70
2025-05-25 14:47:53,812 - app.api.endpoints.backup - INFO - Ejecutando statement 71/117: UNLOCK TABLES;...
2025-05-25 14:47:53,813 - app.api.endpoints.backup - INFO - Statement 71 ejecutado correctamente
2025-05-25 14:47:53,813 - app.api.endpoints.backup - INFO - Ejecutando statement 72/117: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 14:47:53,828 - app.api.endpoints.backup - INFO - Statement 72 ejecutado correctamente
2025-05-25 14:47:53,828 - app.api.endpoints.backup - INFO - Ejecutando statement 73/117: CREATE TABLE `report_bibliographies` (`id` int NOT NULL AUTO_INCREMENT,`reference` text NOT NULL,`re...
2025-05-25 14:47:53,852 - app.api.endpoints.backup - INFO - Statement 73 ejecutado correctamente
2025-05-25 14:47:53,853 - app.api.endpoints.backup - INFO - Ejecutando statement 74/117: LOCK TABLES `report_bibliographies` WRITE;...
2025-05-25 14:47:53,855 - app.api.endpoints.backup - INFO - Statement 74 ejecutado correctamente
2025-05-25 14:47:53,855 - app.api.endpoints.backup - INFO - Ejecutando statement 75/117: UNLOCK TABLES;...
2025-05-25 14:47:53,856 - app.api.endpoints.backup - INFO - Statement 75 ejecutado correctamente
2025-05-25 14:47:53,856 - app.api.endpoints.backup - INFO - Ejecutando statement 76/117: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 14:47:53,870 - app.api.endpoints.backup - INFO - Statement 76 ejecutado correctamente
2025-05-25 14:47:53,871 - app.api.endpoints.backup - INFO - Ejecutando statement 77/117: CREATE TABLE `report_logos` (`id` int NOT NULL AUTO_INCREMENT,`logo` varchar(255) NOT NULL,`report_i...
2025-05-25 14:47:53,897 - app.api.endpoints.backup - INFO - Statement 77 ejecutado correctamente
2025-05-25 14:47:53,898 - app.api.endpoints.backup - INFO - Ejecutando statement 78/117: LOCK TABLES `report_logos` WRITE;...
2025-05-25 14:47:53,900 - app.api.endpoints.backup - INFO - Statement 78 ejecutado correctamente
2025-05-25 14:47:53,901 - app.api.endpoints.backup - INFO - Ejecutando statement 79/117: UNLOCK TABLES;...
2025-05-25 14:47:53,902 - app.api.endpoints.backup - INFO - Statement 79 ejecutado correctamente
2025-05-25 14:47:53,902 - app.api.endpoints.backup - INFO - Ejecutando statement 80/117: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 14:47:53,918 - app.api.endpoints.backup - INFO - Statement 80 ejecutado correctamente
2025-05-25 14:47:53,919 - app.api.endpoints.backup - INFO - Commit realizado en statement 80
2025-05-25 14:47:53,919 - app.api.endpoints.backup - INFO - Ejecutando statement 81/117: CREATE TABLE `report_norms` (`id` int NOT NULL AUTO_INCREMENT,`norm` text NOT NULL,`report_id` int N...
2025-05-25 14:47:53,946 - app.api.endpoints.backup - INFO - Statement 81 ejecutado correctamente
2025-05-25 14:47:53,946 - app.api.endpoints.backup - INFO - Ejecutando statement 82/117: LOCK TABLES `report_norms` WRITE;...
2025-05-25 14:47:53,948 - app.api.endpoints.backup - INFO - Statement 82 ejecutado correctamente
2025-05-25 14:47:53,948 - app.api.endpoints.backup - INFO - Ejecutando statement 83/117: UNLOCK TABLES;...
2025-05-25 14:47:53,950 - app.api.endpoints.backup - INFO - Statement 83 ejecutado correctamente
2025-05-25 14:47:53,950 - app.api.endpoints.backup - INFO - Ejecutando statement 84/117: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 14:47:53,966 - app.api.endpoints.backup - INFO - Statement 84 ejecutado correctamente
2025-05-25 14:47:53,967 - app.api.endpoints.backup - INFO - Ejecutando statement 85/117: CREATE TABLE `report_photos` (`id` int NOT NULL AUTO_INCREMENT,`photo` varchar(255) NOT NULL,`report...
2025-05-25 14:47:53,993 - app.api.endpoints.backup - INFO - Statement 85 ejecutado correctamente
2025-05-25 14:47:53,993 - app.api.endpoints.backup - INFO - Ejecutando statement 86/117: LOCK TABLES `report_photos` WRITE;...
2025-05-25 14:47:53,995 - app.api.endpoints.backup - INFO - Statement 86 ejecutado correctamente
2025-05-25 14:47:53,995 - app.api.endpoints.backup - INFO - Ejecutando statement 87/117: UNLOCK TABLES;...
2025-05-25 14:47:53,996 - app.api.endpoints.backup - INFO - Statement 87 ejecutado correctamente
2025-05-25 14:47:53,996 - app.api.endpoints.backup - INFO - Ejecutando statement 88/117: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 14:47:54,013 - app.api.endpoints.backup - INFO - Statement 88 ejecutado correctamente
2025-05-25 14:47:54,013 - app.api.endpoints.backup - INFO - Ejecutando statement 89/117: CREATE TABLE `secondary_ods_actions` (`action_id` int NOT NULL,`specific_objective_id` int NOT NULL,...
2025-05-25 14:47:54,043 - app.api.endpoints.backup - INFO - Statement 89 ejecutado correctamente
2025-05-25 14:47:54,044 - app.api.endpoints.backup - INFO - Ejecutando statement 90/117: LOCK TABLES `secondary_ods_actions` WRITE;...
2025-05-25 14:47:54,045 - app.api.endpoints.backup - INFO - Statement 90 ejecutado correctamente
2025-05-25 14:47:54,046 - app.api.endpoints.backup - INFO - Commit realizado en statement 90
2025-05-25 14:47:54,046 - app.api.endpoints.backup - INFO - Ejecutando statement 91/117: UNLOCK TABLES;...
2025-05-25 14:47:54,047 - app.api.endpoints.backup - INFO - Statement 91 ejecutado correctamente
2025-05-25 14:47:54,047 - app.api.endpoints.backup - INFO - Ejecutando statement 92/117: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 14:47:54,061 - app.api.endpoints.backup - INFO - Statement 92 ejecutado correctamente
2025-05-25 14:47:54,061 - app.api.endpoints.backup - INFO - Ejecutando statement 93/117: CREATE TABLE `secondary_ods_material_topics` (`ods_id` int NOT NULL,`material_topic_id` int NOT NULL...
2025-05-25 14:47:54,086 - app.api.endpoints.backup - INFO - Statement 93 ejecutado correctamente
2025-05-25 14:47:54,086 - app.api.endpoints.backup - INFO - Ejecutando statement 94/117: LOCK TABLES `secondary_ods_material_topics` WRITE;...
2025-05-25 14:47:54,088 - app.api.endpoints.backup - INFO - Statement 94 ejecutado correctamente
2025-05-25 14:47:54,089 - app.api.endpoints.backup - INFO - Ejecutando statement 95/117: UNLOCK TABLES;...
2025-05-25 14:47:54,090 - app.api.endpoints.backup - INFO - Statement 95 ejecutado correctamente
2025-05-25 14:47:54,091 - app.api.endpoints.backup - INFO - Ejecutando statement 96/117: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 14:47:54,112 - app.api.endpoints.backup - INFO - Statement 96 ejecutado correctamente
2025-05-25 14:47:54,112 - app.api.endpoints.backup - INFO - Ejecutando statement 97/117: CREATE TABLE `specific_objectives` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`re...
2025-05-25 14:47:54,142 - app.api.endpoints.backup - INFO - Statement 97 ejecutado correctamente
2025-05-25 14:47:54,142 - app.api.endpoints.backup - INFO - Ejecutando statement 98/117: LOCK TABLES `specific_objectives` WRITE;...
2025-05-25 14:47:54,145 - app.api.endpoints.backup - INFO - Statement 98 ejecutado correctamente
2025-05-25 14:47:54,145 - app.api.endpoints.backup - INFO - Ejecutando statement 99/117: UNLOCK TABLES;...
2025-05-25 14:47:54,146 - app.api.endpoints.backup - INFO - Statement 99 ejecutado correctamente
2025-05-25 14:47:54,146 - app.api.endpoints.backup - INFO - Ejecutando statement 100/117: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 14:47:54,162 - app.api.endpoints.backup - INFO - Statement 100 ejecutado correctamente
2025-05-25 14:47:54,163 - app.api.endpoints.backup - INFO - Commit realizado en statement 100
2025-05-25 14:47:54,163 - app.api.endpoints.backup - INFO - Ejecutando statement 101/117: CREATE TABLE `stakeholders` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descript...
2025-05-25 14:47:54,188 - app.api.endpoints.backup - INFO - Statement 101 ejecutado correctamente
2025-05-25 14:47:54,189 - app.api.endpoints.backup - INFO - Ejecutando statement 102/117: LOCK TABLES `stakeholders` WRITE;...
2025-05-25 14:47:54,191 - app.api.endpoints.backup - INFO - Statement 102 ejecutado correctamente
2025-05-25 14:47:54,192 - app.api.endpoints.backup - INFO - Ejecutando statement 103/117: UNLOCK TABLES;...
2025-05-25 14:47:54,193 - app.api.endpoints.backup - INFO - Statement 103 ejecutado correctamente
2025-05-25 14:47:54,193 - app.api.endpoints.backup - INFO - Ejecutando statement 104/117: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 14:47:54,213 - app.api.endpoints.backup - INFO - Statement 104 ejecutado correctamente
2025-05-25 14:47:54,214 - app.api.endpoints.backup - INFO - Ejecutando statement 105/117: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:47:54,251 - app.api.endpoints.backup - INFO - Statement 105 ejecutado correctamente
2025-05-25 14:47:54,251 - app.api.endpoints.backup - INFO - Ejecutando statement 106/117: LOCK TABLES `sustainability_reports` WRITE;...
2025-05-25 14:47:54,255 - app.api.endpoints.backup - INFO - Statement 106 ejecutado correctamente
2025-05-25 14:47:54,255 - app.api.endpoints.backup - INFO - Ejecutando statement 107/117: INSERT INTO `sustainability_reports` VALUES(1,1,2025,'Draft','',NULL,NULL,NULL,NULL,NULL,NULL,NULL,N...
2025-05-25 14:47:54,257 - app.api.endpoints.backup - INFO - Statement 107 ejecutado correctamente
2025-05-25 14:47:54,257 - app.api.endpoints.backup - INFO - Ejecutando statement 108/117: UNLOCK TABLES;...
2025-05-25 14:47:54,261 - app.api.endpoints.backup - INFO - Statement 108 ejecutado correctamente
2025-05-25 14:47:54,261 - app.api.endpoints.backup - INFO - Ejecutando statement 109/117: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 14:49:27,438 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:49:27,439 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 14:49:27,439 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_144927.sql
2025-05-25 14:49:27,441 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:49:27,443 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:49:27,444 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_144927.sql  True
2025-05-25 14:49:27,446 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:49:27,448 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:49:27,448 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:49:27,449 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:49:27,450 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:49:27,451 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:49:27,451 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:49:27,466 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:49:27,466 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:49:27,470 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 108
2025-05-25 14:49:27,470 - app.api.endpoints.backup - INFO - Ejecutando statement 1/108: DROP TABLE IF EXISTS `actions`;...
2025-05-25 14:49:27,492 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 14:49:27,492 - app.api.endpoints.backup - INFO - Ejecutando statement 2/108: CREATE TABLE `actions` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`difficulty` en...
2025-05-25 14:49:27,540 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 14:49:27,541 - app.api.endpoints.backup - INFO - Ejecutando statement 3/108: LOCK TABLES `actions` WRITE;...
2025-05-25 14:49:27,544 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 14:49:27,544 - app.api.endpoints.backup - INFO - Ejecutando statement 4/108: UNLOCK TABLES;...
2025-05-25 14:49:27,545 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 14:49:27,546 - app.api.endpoints.backup - INFO - Ejecutando statement 5/108: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 14:49:27,570 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 14:49:27,571 - app.api.endpoints.backup - INFO - Ejecutando statement 6/108: CREATE TABLE `alembic_version` (`version_num` varchar(32) NOT NULL,PRIMARY KEY (`version_num`)) ENGI...
2025-05-25 14:49:27,620 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 14:49:27,621 - app.api.endpoints.backup - INFO - Ejecutando statement 7/108: LOCK TABLES `alembic_version` WRITE;...
2025-05-25 14:49:27,623 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 14:49:27,623 - app.api.endpoints.backup - INFO - Ejecutando statement 8/108: INSERT INTO `alembic_version` VALUES('8e597e8d9c1b');...
2025-05-25 14:49:27,625 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 14:49:27,625 - app.api.endpoints.backup - INFO - Ejecutando statement 9/108: UNLOCK TABLES;...
2025-05-25 14:49:27,629 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 14:49:27,629 - app.api.endpoints.backup - INFO - Ejecutando statement 10/108: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 14:49:27,676 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 14:49:27,677 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 14:49:27,677 - app.api.endpoints.backup - INFO - Ejecutando statement 11/108: CREATE TABLE `assessments` (`id` int NOT NULL AUTO_INCREMENT,`score` int NOT NULL,`material_topic_id...
2025-05-25 14:49:27,759 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 14:49:27,760 - app.api.endpoints.backup - INFO - Ejecutando statement 12/108: LOCK TABLES `assessments` WRITE;...
2025-05-25 14:49:27,761 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 14:49:27,761 - app.api.endpoints.backup - INFO - Ejecutando statement 13/108: UNLOCK TABLES;...
2025-05-25 14:49:27,762 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 14:49:27,762 - app.api.endpoints.backup - INFO - Ejecutando statement 14/108: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 14:49:27,806 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 14:49:27,807 - app.api.endpoints.backup - INFO - Ejecutando statement 15/108: CREATE TABLE `diagnosis_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`type` en...
2025-05-25 14:49:27,892 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 14:49:27,892 - app.api.endpoints.backup - INFO - Ejecutando statement 16/108: LOCK TABLES `diagnosis_indicators` WRITE;...
2025-05-25 14:49:27,894 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 14:49:27,894 - app.api.endpoints.backup - INFO - Ejecutando statement 17/108: UNLOCK TABLES;...
2025-05-25 14:49:27,895 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 14:49:27,895 - app.api.endpoints.backup - INFO - Ejecutando statement 18/108: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 14:49:27,925 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 14:49:27,926 - app.api.endpoints.backup - INFO - Ejecutando statement 19/108: CREATE TABLE `diagnosis_indicators_qualitative` (`diagnostic_indicator_id` int NOT NULL,`response` t...
2025-05-25 14:49:27,967 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 14:49:27,968 - app.api.endpoints.backup - INFO - Ejecutando statement 20/108: LOCK TABLES `diagnosis_indicators_qualitative` WRITE;...
2025-05-25 14:49:27,971 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 14:49:27,971 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 14:49:27,971 - app.api.endpoints.backup - INFO - Ejecutando statement 21/108: UNLOCK TABLES;...
2025-05-25 14:49:27,973 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 14:49:27,973 - app.api.endpoints.backup - INFO - Ejecutando statement 22/108: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 14:49:28,005 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 14:49:28,006 - app.api.endpoints.backup - INFO - Ejecutando statement 23/108: CREATE TABLE `diagnosis_indicators_quantitative` (`diagnostic_indicator_id` int NOT NULL,`numeric_re...
2025-05-25 14:49:28,098 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 14:49:28,098 - app.api.endpoints.backup - INFO - Ejecutando statement 24/108: LOCK TABLES `diagnosis_indicators_quantitative` WRITE;...
2025-05-25 14:49:28,101 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 14:49:28,101 - app.api.endpoints.backup - INFO - Ejecutando statement 25/108: UNLOCK TABLES;...
2025-05-25 14:49:28,102 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 14:49:28,103 - app.api.endpoints.backup - INFO - Ejecutando statement 26/108: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 14:49:28,144 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 14:49:28,144 - app.api.endpoints.backup - INFO - Ejecutando statement 27/108: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 14:49:28,209 - app.api.endpoints.backup - INFO - Statement 27 ejecutado correctamente
2025-05-25 14:49:28,210 - app.api.endpoints.backup - INFO - Ejecutando statement 28/108: LOCK TABLES `dimensions` WRITE;...
2025-05-25 14:49:28,213 - app.api.endpoints.backup - INFO - Statement 28 ejecutado correctamente
2025-05-25 14:49:28,213 - app.api.endpoints.backup - INFO - Ejecutando statement 29/108: UNLOCK TABLES;...
2025-05-25 14:49:28,214 - app.api.endpoints.backup - INFO - Statement 29 ejecutado correctamente
2025-05-25 14:49:28,214 - app.api.endpoints.backup - INFO - Ejecutando statement 30/108: DROP TABLE IF EXISTS `goals`;...
2025-05-25 14:49:28,230 - app.api.endpoints.backup - INFO - Statement 30 ejecutado correctamente
2025-05-25 14:49:28,230 - app.api.endpoints.backup - INFO - Commit realizado en statement 30
2025-05-25 14:49:28,231 - app.api.endpoints.backup - INFO - Ejecutando statement 31/108: CREATE TABLE `goals` (`ods_id` int NOT NULL,`goal_number` varchar(2) NOT NULL,`description` text NOT...
2025-05-25 14:49:28,286 - app.api.endpoints.backup - INFO - Statement 31 ejecutado correctamente
2025-05-25 14:49:28,287 - app.api.endpoints.backup - INFO - Ejecutando statement 32/108: LOCK TABLES `goals` WRITE;...
2025-05-25 14:49:28,289 - app.api.endpoints.backup - INFO - Statement 32 ejecutado correctamente
2025-05-25 14:49:28,290 - app.api.endpoints.backup - INFO - Ejecutando statement 33/108: UNLOCK TABLES;...
2025-05-25 14:49:28,291 - app.api.endpoints.backup - INFO - Statement 33 ejecutado correctamente
2025-05-25 14:49:28,291 - app.api.endpoints.backup - INFO - Ejecutando statement 34/108: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 14:49:28,323 - app.api.endpoints.backup - INFO - Statement 34 ejecutado correctamente
2025-05-25 14:49:28,323 - app.api.endpoints.backup - INFO - Ejecutando statement 35/108: CREATE TABLE `heritage_resource_social_networks` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int...
2025-05-25 14:49:28,432 - app.api.endpoints.backup - INFO - Statement 35 ejecutado correctamente
2025-05-25 14:49:28,432 - app.api.endpoints.backup - INFO - Ejecutando statement 36/108: LOCK TABLES `heritage_resource_social_networks` WRITE;...
2025-05-25 14:49:28,435 - app.api.endpoints.backup - INFO - Statement 36 ejecutado correctamente
2025-05-25 14:49:28,435 - app.api.endpoints.backup - INFO - Ejecutando statement 37/108: UNLOCK TABLES;...
2025-05-25 14:49:28,436 - app.api.endpoints.backup - INFO - Statement 37 ejecutado correctamente
2025-05-25 14:49:28,437 - app.api.endpoints.backup - INFO - Ejecutando statement 38/108: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 14:49:28,485 - app.api.endpoints.backup - INFO - Statement 38 ejecutado correctamente
2025-05-25 14:49:28,485 - app.api.endpoints.backup - INFO - Ejecutando statement 39/108: CREATE TABLE `heritage_resource_typologies` (`id` int NOT NULL AUTO_INCREMENT,`resource_id` int DEFA...
2025-05-25 14:49:28,621 - app.api.endpoints.backup - INFO - Statement 39 ejecutado correctamente
2025-05-25 14:49:28,621 - app.api.endpoints.backup - INFO - Ejecutando statement 40/108: LOCK TABLES `heritage_resource_typologies` WRITE;...
2025-05-25 14:49:28,623 - app.api.endpoints.backup - INFO - Statement 40 ejecutado correctamente
2025-05-25 14:49:28,623 - app.api.endpoints.backup - INFO - Commit realizado en statement 40
2025-05-25 14:49:28,624 - app.api.endpoints.backup - INFO - Ejecutando statement 41/108: INSERT INTO `heritage_resource_typologies` VALUES(1,1,'Patrimonio cultural');...
2025-05-25 14:49:28,625 - app.api.endpoints.backup - INFO - Statement 41 ejecutado correctamente
2025-05-25 14:49:28,625 - app.api.endpoints.backup - INFO - Ejecutando statement 42/108: UNLOCK TABLES;...
2025-05-25 14:49:28,640 - app.api.endpoints.backup - INFO - Statement 42 ejecutado correctamente
2025-05-25 14:49:28,640 - app.api.endpoints.backup - INFO - Ejecutando statement 43/108: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 14:49:28,706 - app.api.endpoints.backup - INFO - Statement 43 ejecutado correctamente
2025-05-25 14:49:28,706 - app.api.endpoints.backup - INFO - Ejecutando statement 44/108: CREATE TABLE `heritage_resources` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`ow...
2025-05-25 14:49:28,765 - app.api.endpoints.backup - INFO - Statement 44 ejecutado correctamente
2025-05-25 14:49:28,766 - app.api.endpoints.backup - INFO - Ejecutando statement 45/108: LOCK TABLES `heritage_resources` WRITE;...
2025-05-25 14:49:28,769 - app.api.endpoints.backup - INFO - Statement 45 ejecutado correctamente
2025-05-25 14:49:28,770 - app.api.endpoints.backup - INFO - Ejecutando statement 46/108: INSERT INTO `heritage_resources` VALUES(1,'otro','','','','','');...
2025-05-25 14:49:28,772 - app.api.endpoints.backup - INFO - Statement 46 ejecutado correctamente
2025-05-25 14:49:28,772 - app.api.endpoints.backup - INFO - Ejecutando statement 47/108: UNLOCK TABLES;...
2025-05-25 14:49:28,783 - app.api.endpoints.backup - INFO - Statement 47 ejecutado correctamente
2025-05-25 14:49:28,784 - app.api.endpoints.backup - INFO - Ejecutando statement 48/108: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 14:49:28,820 - app.api.endpoints.backup - INFO - Statement 48 ejecutado correctamente
2025-05-25 14:49:28,821 - app.api.endpoints.backup - INFO - Ejecutando statement 49/108: CREATE TABLE `material_topics` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descr...
2025-05-25 14:49:28,878 - app.api.endpoints.backup - INFO - Statement 49 ejecutado correctamente
2025-05-25 14:49:28,878 - app.api.endpoints.backup - INFO - Ejecutando statement 50/108: LOCK TABLES `material_topics` WRITE;...
2025-05-25 14:49:28,881 - app.api.endpoints.backup - INFO - Statement 50 ejecutado correctamente
2025-05-25 14:49:28,881 - app.api.endpoints.backup - INFO - Commit realizado en statement 50
2025-05-25 14:49:28,882 - app.api.endpoints.backup - INFO - Ejecutando statement 51/108: UNLOCK TABLES;...
2025-05-25 14:49:28,882 - app.api.endpoints.backup - INFO - Statement 51 ejecutado correctamente
2025-05-25 14:49:28,883 - app.api.endpoints.backup - INFO - Ejecutando statement 52/108: DROP TABLE IF EXISTS `ods`;...
2025-05-25 14:49:28,914 - app.api.endpoints.backup - INFO - Statement 52 ejecutado correctamente
2025-05-25 14:49:28,915 - app.api.endpoints.backup - INFO - Ejecutando statement 53/108: CREATE TABLE `ods` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`description` text...
2025-05-25 14:49:28,982 - app.api.endpoints.backup - INFO - Statement 53 ejecutado correctamente
2025-05-25 14:49:28,983 - app.api.endpoints.backup - INFO - Ejecutando statement 54/108: LOCK TABLES `ods` WRITE;...
2025-05-25 14:49:28,988 - app.api.endpoints.backup - INFO - Statement 54 ejecutado correctamente
2025-05-25 14:49:28,988 - app.api.endpoints.backup - INFO - Ejecutando statement 55/108: UNLOCK TABLES;...
2025-05-25 14:49:28,989 - app.api.endpoints.backup - INFO - Statement 55 ejecutado correctamente
2025-05-25 14:49:28,990 - app.api.endpoints.backup - INFO - Ejecutando statement 56/108: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 14:49:29,025 - app.api.endpoints.backup - INFO - Statement 56 ejecutado correctamente
2025-05-25 14:49:29,026 - app.api.endpoints.backup - INFO - Ejecutando statement 57/108: CREATE TABLE `performance_indicators` (`id` int NOT NULL AUTO_INCREMENT,`name` text NOT NULL,`human_...
2025-05-25 14:49:29,093 - app.api.endpoints.backup - INFO - Statement 57 ejecutado correctamente
2025-05-25 14:49:29,094 - app.api.endpoints.backup - INFO - Ejecutando statement 58/108: LOCK TABLES `performance_indicators` WRITE;...
2025-05-25 14:49:29,097 - app.api.endpoints.backup - INFO - Statement 58 ejecutado correctamente
2025-05-25 14:49:29,097 - app.api.endpoints.backup - INFO - Ejecutando statement 59/108: UNLOCK TABLES;...
2025-05-25 14:49:29,098 - app.api.endpoints.backup - INFO - Statement 59 ejecutado correctamente
2025-05-25 14:49:29,098 - app.api.endpoints.backup - INFO - Ejecutando statement 60/108: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 14:49:29,126 - app.api.endpoints.backup - INFO - Statement 60 ejecutado correctamente
2025-05-25 14:49:29,126 - app.api.endpoints.backup - INFO - Commit realizado en statement 60
2025-05-25 14:49:29,126 - app.api.endpoints.backup - INFO - Ejecutando statement 61/108: CREATE TABLE `performance_indicators_qualitative` (`performance_indicator_id` int NOT NULL,`response...
2025-05-25 14:49:29,175 - app.api.endpoints.backup - INFO - Statement 61 ejecutado correctamente
2025-05-25 14:49:29,176 - app.api.endpoints.backup - INFO - Ejecutando statement 62/108: LOCK TABLES `performance_indicators_qualitative` WRITE;...
2025-05-25 14:49:29,178 - app.api.endpoints.backup - INFO - Statement 62 ejecutado correctamente
2025-05-25 14:49:29,178 - app.api.endpoints.backup - INFO - Ejecutando statement 63/108: UNLOCK TABLES;...
2025-05-25 14:49:29,179 - app.api.endpoints.backup - INFO - Statement 63 ejecutado correctamente
2025-05-25 14:49:29,179 - app.api.endpoints.backup - INFO - Ejecutando statement 64/108: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 14:49:29,206 - app.api.endpoints.backup - INFO - Statement 64 ejecutado correctamente
2025-05-25 14:49:29,206 - app.api.endpoints.backup - INFO - Ejecutando statement 65/108: CREATE TABLE `performance_indicators_quantitative` (`performance_indicator_id` int NOT NULL,`numeric...
2025-05-25 14:49:29,256 - app.api.endpoints.backup - INFO - Statement 65 ejecutado correctamente
2025-05-25 14:49:29,256 - app.api.endpoints.backup - INFO - Ejecutando statement 66/108: LOCK TABLES `performance_indicators_quantitative` WRITE;...
2025-05-25 14:49:29,259 - app.api.endpoints.backup - INFO - Statement 66 ejecutado correctamente
2025-05-25 14:49:29,259 - app.api.endpoints.backup - INFO - Ejecutando statement 67/108: UNLOCK TABLES;...
2025-05-25 14:49:29,260 - app.api.endpoints.backup - INFO - Statement 67 ejecutado correctamente
2025-05-25 14:49:29,261 - app.api.endpoints.backup - INFO - Ejecutando statement 68/108: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 14:49:29,299 - app.api.endpoints.backup - INFO - Statement 68 ejecutado correctamente
2025-05-25 14:49:29,299 - app.api.endpoints.backup - INFO - Ejecutando statement 69/108: CREATE TABLE `report_agreements` (`id` int NOT NULL AUTO_INCREMENT,`agreement` text NOT NULL,`report...
2025-05-25 14:49:29,374 - app.api.endpoints.backup - INFO - Statement 69 ejecutado correctamente
2025-05-25 14:49:29,375 - app.api.endpoints.backup - INFO - Ejecutando statement 70/108: LOCK TABLES `report_agreements` WRITE;...
2025-05-25 14:49:29,377 - app.api.endpoints.backup - INFO - Statement 70 ejecutado correctamente
2025-05-25 14:49:29,378 - app.api.endpoints.backup - INFO - Commit realizado en statement 70
2025-05-25 14:49:29,378 - app.api.endpoints.backup - INFO - Ejecutando statement 71/108: UNLOCK TABLES;...
2025-05-25 14:49:29,379 - app.api.endpoints.backup - INFO - Statement 71 ejecutado correctamente
2025-05-25 14:49:29,379 - app.api.endpoints.backup - INFO - Ejecutando statement 72/108: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 14:49:29,432 - app.api.endpoints.backup - INFO - Statement 72 ejecutado correctamente
2025-05-25 14:49:29,432 - app.api.endpoints.backup - INFO - Ejecutando statement 73/108: CREATE TABLE `report_bibliographies` (`id` int NOT NULL AUTO_INCREMENT,`reference` text NOT NULL,`re...
2025-05-25 14:49:29,505 - app.api.endpoints.backup - INFO - Statement 73 ejecutado correctamente
2025-05-25 14:49:29,505 - app.api.endpoints.backup - INFO - Ejecutando statement 74/108: LOCK TABLES `report_bibliographies` WRITE;...
2025-05-25 14:49:29,507 - app.api.endpoints.backup - INFO - Statement 74 ejecutado correctamente
2025-05-25 14:49:29,508 - app.api.endpoints.backup - INFO - Ejecutando statement 75/108: UNLOCK TABLES;...
2025-05-25 14:49:29,509 - app.api.endpoints.backup - INFO - Statement 75 ejecutado correctamente
2025-05-25 14:49:29,509 - app.api.endpoints.backup - INFO - Ejecutando statement 76/108: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 14:49:29,534 - app.api.endpoints.backup - INFO - Statement 76 ejecutado correctamente
2025-05-25 14:49:29,535 - app.api.endpoints.backup - INFO - Ejecutando statement 77/108: CREATE TABLE `report_logos` (`id` int NOT NULL AUTO_INCREMENT,`logo` varchar(255) NOT NULL,`report_i...
2025-05-25 14:49:29,594 - app.api.endpoints.backup - INFO - Statement 77 ejecutado correctamente
2025-05-25 14:49:29,595 - app.api.endpoints.backup - INFO - Ejecutando statement 78/108: LOCK TABLES `report_logos` WRITE;...
2025-05-25 14:49:29,597 - app.api.endpoints.backup - INFO - Statement 78 ejecutado correctamente
2025-05-25 14:49:29,597 - app.api.endpoints.backup - INFO - Ejecutando statement 79/108: UNLOCK TABLES;...
2025-05-25 14:49:29,598 - app.api.endpoints.backup - INFO - Statement 79 ejecutado correctamente
2025-05-25 14:49:29,598 - app.api.endpoints.backup - INFO - Ejecutando statement 80/108: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 14:49:29,645 - app.api.endpoints.backup - INFO - Statement 80 ejecutado correctamente
2025-05-25 14:49:29,646 - app.api.endpoints.backup - INFO - Commit realizado en statement 80
2025-05-25 14:49:29,646 - app.api.endpoints.backup - INFO - Ejecutando statement 81/108: CREATE TABLE `report_norms` (`id` int NOT NULL AUTO_INCREMENT,`norm` text NOT NULL,`report_id` int N...
2025-05-25 14:49:29,716 - app.api.endpoints.backup - INFO - Statement 81 ejecutado correctamente
2025-05-25 14:49:29,716 - app.api.endpoints.backup - INFO - Ejecutando statement 82/108: LOCK TABLES `report_norms` WRITE;...
2025-05-25 14:49:29,719 - app.api.endpoints.backup - INFO - Statement 82 ejecutado correctamente
2025-05-25 14:49:29,719 - app.api.endpoints.backup - INFO - Ejecutando statement 83/108: UNLOCK TABLES;...
2025-05-25 14:49:29,720 - app.api.endpoints.backup - INFO - Statement 83 ejecutado correctamente
2025-05-25 14:49:29,720 - app.api.endpoints.backup - INFO - Ejecutando statement 84/108: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 14:49:29,757 - app.api.endpoints.backup - INFO - Statement 84 ejecutado correctamente
2025-05-25 14:49:29,757 - app.api.endpoints.backup - INFO - Ejecutando statement 85/108: CREATE TABLE `report_photos` (`id` int NOT NULL AUTO_INCREMENT,`photo` varchar(255) NOT NULL,`report...
2025-05-25 14:49:29,838 - app.api.endpoints.backup - INFO - Statement 85 ejecutado correctamente
2025-05-25 14:49:29,839 - app.api.endpoints.backup - INFO - Ejecutando statement 86/108: LOCK TABLES `report_photos` WRITE;...
2025-05-25 14:49:29,841 - app.api.endpoints.backup - INFO - Statement 86 ejecutado correctamente
2025-05-25 14:49:29,841 - app.api.endpoints.backup - INFO - Ejecutando statement 87/108: UNLOCK TABLES;...
2025-05-25 14:49:29,842 - app.api.endpoints.backup - INFO - Statement 87 ejecutado correctamente
2025-05-25 14:49:29,842 - app.api.endpoints.backup - INFO - Ejecutando statement 88/108: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 14:49:29,884 - app.api.endpoints.backup - INFO - Statement 88 ejecutado correctamente
2025-05-25 14:49:29,884 - app.api.endpoints.backup - INFO - Ejecutando statement 89/108: CREATE TABLE `secondary_ods_actions` (`action_id` int NOT NULL,`specific_objective_id` int NOT NULL,...
2025-05-25 14:49:29,970 - app.api.endpoints.backup - INFO - Statement 89 ejecutado correctamente
2025-05-25 14:49:29,971 - app.api.endpoints.backup - INFO - Ejecutando statement 90/108: LOCK TABLES `secondary_ods_actions` WRITE;...
2025-05-25 14:49:29,972 - app.api.endpoints.backup - INFO - Statement 90 ejecutado correctamente
2025-05-25 14:49:29,973 - app.api.endpoints.backup - INFO - Commit realizado en statement 90
2025-05-25 14:49:29,973 - app.api.endpoints.backup - INFO - Ejecutando statement 91/108: UNLOCK TABLES;...
2025-05-25 14:49:29,974 - app.api.endpoints.backup - INFO - Statement 91 ejecutado correctamente
2025-05-25 14:49:29,974 - app.api.endpoints.backup - INFO - Ejecutando statement 92/108: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 14:49:30,005 - app.api.endpoints.backup - INFO - Statement 92 ejecutado correctamente
2025-05-25 14:49:30,006 - app.api.endpoints.backup - INFO - Ejecutando statement 93/108: CREATE TABLE `secondary_ods_material_topics` (`ods_id` int NOT NULL,`material_topic_id` int NOT NULL...
2025-05-25 14:49:30,039 - app.api.endpoints.backup - INFO - Statement 93 ejecutado correctamente
2025-05-25 14:49:30,040 - app.api.endpoints.backup - INFO - Ejecutando statement 94/108: LOCK TABLES `secondary_ods_material_topics` WRITE;...
2025-05-25 14:49:30,042 - app.api.endpoints.backup - INFO - Statement 94 ejecutado correctamente
2025-05-25 14:49:30,042 - app.api.endpoints.backup - INFO - Ejecutando statement 95/108: UNLOCK TABLES;...
2025-05-25 14:49:30,044 - app.api.endpoints.backup - INFO - Statement 95 ejecutado correctamente
2025-05-25 14:49:30,044 - app.api.endpoints.backup - INFO - Ejecutando statement 96/108: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 14:49:30,058 - app.api.endpoints.backup - INFO - Statement 96 ejecutado correctamente
2025-05-25 14:49:30,059 - app.api.endpoints.backup - INFO - Ejecutando statement 97/108: CREATE TABLE `specific_objectives` (`id` int NOT NULL AUTO_INCREMENT,`description` text NOT NULL,`re...
2025-05-25 14:49:30,089 - app.api.endpoints.backup - INFO - Statement 97 ejecutado correctamente
2025-05-25 14:49:30,089 - app.api.endpoints.backup - INFO - Ejecutando statement 98/108: LOCK TABLES `specific_objectives` WRITE;...
2025-05-25 14:49:30,093 - app.api.endpoints.backup - INFO - Statement 98 ejecutado correctamente
2025-05-25 14:49:30,093 - app.api.endpoints.backup - INFO - Ejecutando statement 99/108: UNLOCK TABLES;...
2025-05-25 14:49:30,095 - app.api.endpoints.backup - INFO - Statement 99 ejecutado correctamente
2025-05-25 14:49:30,095 - app.api.endpoints.backup - INFO - Ejecutando statement 100/108: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 14:49:30,112 - app.api.endpoints.backup - INFO - Statement 100 ejecutado correctamente
2025-05-25 14:49:30,113 - app.api.endpoints.backup - INFO - Commit realizado en statement 100
2025-05-25 14:49:30,113 - app.api.endpoints.backup - INFO - Ejecutando statement 101/108: CREATE TABLE `stakeholders` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) NOT NULL,`descript...
2025-05-25 14:49:30,141 - app.api.endpoints.backup - INFO - Statement 101 ejecutado correctamente
2025-05-25 14:49:30,142 - app.api.endpoints.backup - INFO - Ejecutando statement 102/108: LOCK TABLES `stakeholders` WRITE;...
2025-05-25 14:49:30,145 - app.api.endpoints.backup - INFO - Statement 102 ejecutado correctamente
2025-05-25 14:49:30,145 - app.api.endpoints.backup - INFO - Ejecutando statement 103/108: UNLOCK TABLES;...
2025-05-25 14:49:30,146 - app.api.endpoints.backup - INFO - Statement 103 ejecutado correctamente
2025-05-25 14:49:30,146 - app.api.endpoints.backup - INFO - Ejecutando statement 104/108: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 14:49:30,164 - app.api.endpoints.backup - INFO - Statement 104 ejecutado correctamente
2025-05-25 14:49:30,165 - app.api.endpoints.backup - INFO - Ejecutando statement 105/108: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:49:30,201 - app.api.endpoints.backup - INFO - Statement 105 ejecutado correctamente
2025-05-25 14:49:30,202 - app.api.endpoints.backup - INFO - Ejecutando statement 106/108: LOCK TABLES `sustainability_reports` WRITE;...
2025-05-25 14:49:30,206 - app.api.endpoints.backup - INFO - Statement 106 ejecutado correctamente
2025-05-25 14:49:30,207 - app.api.endpoints.backup - INFO - Ejecutando statement 107/108: INSERT INTO `sustainability_reports` VALUES(1,1,2025,'Draft','',NULL,NULL,NULL,NULL,NULL,NULL,NULL,N...
2025-05-25 14:49:30,208 - app.api.endpoints.backup - INFO - Statement 107 ejecutado correctamente
2025-05-25 14:49:30,208 - app.api.endpoints.backup - INFO - Ejecutando statement 108/108: UNLOCK TABLES;...
2025-05-25 14:49:30,212 - app.api.endpoints.backup - INFO - Statement 108 ejecutado correctamente
2025-05-25 14:49:30,213 - app.api.endpoints.backup - INFO - Restauraci칩n completada exitosamente
2025-05-25 14:49:30,213 - app.api.endpoints.backup - INFO - Reactivando restricciones de clave for치nea...
2025-05-25 14:49:30,214 - app.api.endpoints.backup - INFO - Restricciones reactivadas
2025-05-25 14:49:30,214 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 14:49:30,215 - app.api.endpoints.backup - INFO - Backup restaurado exitosamente
2025-05-25 14:49:30,217 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 14:52:35,695 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:52:35,695 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 14:52:35,696 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_145235.sql
2025-05-25 14:52:35,698 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:52:35,699 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:52:35,700 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_145235.sql  True
2025-05-25 14:52:35,701 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:52:35,704 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:52:35,704 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:52:35,705 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:52:35,705 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:52:35,706 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:52:35,706 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 14:52:35,714 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 14:52:35,715 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:52:35,718 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 117
2025-05-25 14:52:35,719 - app.api.endpoints.backup - INFO - Ejecutando statement 1/117: CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:52:35,731 - app.api.endpoints.backup - ERROR - Error en statement 1 (intento 1/3): CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:52:35,731 - app.api.endpoints.backup - ERROR - Error: (1050, "Table 'sustainability_reports' already exists")
2025-05-25 14:52:37,735 - app.api.endpoints.backup - ERROR - Error en statement 1 (intento 2/3): CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:52:37,736 - app.api.endpoints.backup - ERROR - Error: (1050, "Table 'sustainability_reports' already exists")
2025-05-25 14:52:39,739 - app.api.endpoints.backup - ERROR - Error en statement 1 (intento 3/3): CREATE TABLE `sustainability_reports` (`id` int NOT NULL AUTO_INCREMENT,`heritage_resource_id` int N...
2025-05-25 14:52:39,739 - app.api.endpoints.backup - ERROR - Error: (1050, "Table 'sustainability_reports' already exists")
2025-05-25 14:52:39,740 - app.api.endpoints.backup - ERROR - Se agotaron los reintentos para este statement
2025-05-25 14:52:39,740 - app.api.endpoints.backup - ERROR - Error de MySQL: (1050, "Table 'sustainability_reports' already exists")
2025-05-25 14:52:39,741 - app.api.endpoints.backup - ERROR - Stack trace completo:
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 289, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1050, "Table 'sustainability_reports' already exists")
2025-05-25 14:52:39,749 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 14:52:39,750 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error de MySQL: (1050, "Table 'sustainability_reports' already exists")
2025-05-25 14:52:39,750 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 289, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1050, "Table 'sustainability_reports' already exists")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 383, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 322, in _do_restore_file
    raise RuntimeError(f"Error de MySQL: {str(e)}")
RuntimeError: Error de MySQL: (1050, "Table 'sustainability_reports' already exists")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 397, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 14:52:39,758 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 14:55:42,049 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 14:55:42,050 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 14:55:42,050 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_145542.sql
2025-05-25 14:55:42,053 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 14:55:42,055 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 14:55:42,058 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_145542.sql  True
2025-05-25 14:55:42,059 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 14:55:42,063 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 14:55:42,064 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 14:55:42,064 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 14:55:42,065 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 14:55:42,065 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 14:55:42,065 - app.api.endpoints.backup - INFO - Obteniendo lista de tablas existentes...
2025-05-25 14:55:42,068 - app.api.endpoints.backup - INFO - Tablas existentes: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'users']
2025-05-25 14:55:42,068 - app.api.endpoints.backup - INFO - Eliminando tablas existentes...
2025-05-25 14:55:42,069 - app.api.endpoints.backup - INFO - Eliminando tabla: actions
2025-05-25 14:55:42,100 - app.api.endpoints.backup - INFO - Eliminando tabla: alembic_version
2025-05-25 14:55:42,119 - app.api.endpoints.backup - INFO - Eliminando tabla: assessments
2025-05-25 14:55:42,146 - app.api.endpoints.backup - INFO - Eliminando tabla: diagnosis_indicators
2025-05-25 14:55:42,173 - app.api.endpoints.backup - INFO - Eliminando tabla: diagnosis_indicators_qualitative
2025-05-25 14:55:42,184 - app.api.endpoints.backup - INFO - Eliminando tabla: diagnosis_indicators_quantitative
2025-05-25 14:55:42,195 - app.api.endpoints.backup - INFO - Eliminando tabla: dimensions
2025-05-25 14:55:42,211 - app.api.endpoints.backup - INFO - Eliminando tabla: goals
2025-05-25 14:55:42,224 - app.api.endpoints.backup - INFO - Eliminando tabla: heritage_resource_social_networks
2025-05-25 14:55:42,240 - app.api.endpoints.backup - INFO - Eliminando tabla: heritage_resource_typologies
2025-05-25 14:55:42,251 - app.api.endpoints.backup - INFO - Eliminando tabla: heritage_resources
2025-05-25 14:55:42,270 - app.api.endpoints.backup - INFO - Eliminando tabla: material_topics
2025-05-25 14:55:42,287 - app.api.endpoints.backup - INFO - Eliminando tabla: ods
2025-05-25 14:55:42,302 - app.api.endpoints.backup - INFO - Eliminando tabla: performance_indicators
2025-05-25 14:55:42,325 - app.api.endpoints.backup - INFO - Eliminando tabla: performance_indicators_qualitative
2025-05-25 14:55:42,341 - app.api.endpoints.backup - INFO - Eliminando tabla: performance_indicators_quantitative
2025-05-25 14:55:42,376 - app.api.endpoints.backup - INFO - Eliminando tabla: report_agreements
2025-05-25 14:55:42,394 - app.api.endpoints.backup - INFO - Eliminando tabla: report_bibliographies
2025-05-25 14:55:42,415 - app.api.endpoints.backup - INFO - Eliminando tabla: report_logos
2025-05-25 14:55:42,431 - app.api.endpoints.backup - INFO - Eliminando tabla: report_norms
2025-05-25 14:55:42,445 - app.api.endpoints.backup - INFO - Eliminando tabla: report_photos
2025-05-25 14:55:42,458 - app.api.endpoints.backup - INFO - Eliminando tabla: secondary_ods_actions
2025-05-25 14:55:42,473 - app.api.endpoints.backup - INFO - Eliminando tabla: secondary_ods_material_topics
2025-05-25 14:55:42,485 - app.api.endpoints.backup - INFO - Eliminando tabla: specific_objectives
2025-05-25 14:55:42,497 - app.api.endpoints.backup - INFO - Eliminando tabla: stakeholders
2025-05-25 14:55:42,512 - app.api.endpoints.backup - INFO - Eliminando tabla: sustainability_reports
2025-05-25 14:55:42,526 - app.api.endpoints.backup - INFO - Eliminando tabla: users
2025-05-25 15:00:58,872 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:00:58,873 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 15:00:58,874 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_150058.sql
2025-05-25 15:00:58,877 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 15:00:58,879 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 15:00:58,881 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_150058.sql  True
2025-05-25 15:00:58,882 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 15:00:58,884 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 15:00:58,885 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 15:00:58,885 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 15:00:58,886 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 15:00:58,886 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 15:00:58,887 - app.api.endpoints.backup - INFO - Obteniendo lista de tablas existentes...
2025-05-25 15:00:58,889 - app.api.endpoints.backup - INFO - Tablas existentes: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 15:00:58,890 - app.api.endpoints.backup - INFO - Eliminando tablas existentes...
2025-05-25 15:00:58,926 - app.api.endpoints.backup - INFO - Eliminando tabla: sustainability_team_members
2025-05-25 15:02:59,022 - app.api.endpoints.backup - WARNING - Error al eliminar tabla sustainability_team_members: (2013, 'Lost connection to MySQL server during query (timed out)')
2025-05-25 15:02:59,023 - app.api.endpoints.backup - INFO - Intentando truncar tabla sustainability_team_members antes de eliminar...
2025-05-25 15:02:59,024 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla sustainability_team_members: (0, '')
2025-05-25 15:02:59,024 - app.api.endpoints.backup - INFO - Eliminando tabla: users
2025-05-25 15:02:59,024 - app.api.endpoints.backup - WARNING - Error al eliminar tabla users: (0, '')
2025-05-25 15:02:59,025 - app.api.endpoints.backup - INFO - Intentando truncar tabla users antes de eliminar...
2025-05-25 15:02:59,025 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla users: (0, '')
2025-05-25 15:02:59,026 - app.api.endpoints.backup - INFO - Eliminando tabla: secondary_ods_material_topics
2025-05-25 15:02:59,026 - app.api.endpoints.backup - WARNING - Error al eliminar tabla secondary_ods_material_topics: (0, '')
2025-05-25 15:02:59,026 - app.api.endpoints.backup - INFO - Intentando truncar tabla secondary_ods_material_topics antes de eliminar...
2025-05-25 15:02:59,027 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla secondary_ods_material_topics: (0, '')
2025-05-25 15:02:59,027 - app.api.endpoints.backup - INFO - Eliminando tabla: secondary_ods_actions
2025-05-25 15:02:59,027 - app.api.endpoints.backup - WARNING - Error al eliminar tabla secondary_ods_actions: (0, '')
2025-05-25 15:02:59,027 - app.api.endpoints.backup - INFO - Intentando truncar tabla secondary_ods_actions antes de eliminar...
2025-05-25 15:02:59,027 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla secondary_ods_actions: (0, '')
2025-05-25 15:02:59,028 - app.api.endpoints.backup - INFO - Eliminando tabla: report_photos
2025-05-25 15:02:59,028 - app.api.endpoints.backup - WARNING - Error al eliminar tabla report_photos: (0, '')
2025-05-25 15:02:59,028 - app.api.endpoints.backup - INFO - Intentando truncar tabla report_photos antes de eliminar...
2025-05-25 15:02:59,029 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla report_photos: (0, '')
2025-05-25 15:02:59,029 - app.api.endpoints.backup - INFO - Eliminando tabla: report_norms
2025-05-25 15:02:59,029 - app.api.endpoints.backup - WARNING - Error al eliminar tabla report_norms: (0, '')
2025-05-25 15:02:59,029 - app.api.endpoints.backup - INFO - Intentando truncar tabla report_norms antes de eliminar...
2025-05-25 15:02:59,030 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla report_norms: (0, '')
2025-05-25 15:02:59,030 - app.api.endpoints.backup - INFO - Eliminando tabla: report_logos
2025-05-25 15:02:59,030 - app.api.endpoints.backup - WARNING - Error al eliminar tabla report_logos: (0, '')
2025-05-25 15:02:59,030 - app.api.endpoints.backup - INFO - Intentando truncar tabla report_logos antes de eliminar...
2025-05-25 15:02:59,031 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla report_logos: (0, '')
2025-05-25 15:02:59,031 - app.api.endpoints.backup - INFO - Eliminando tabla: report_bibliographies
2025-05-25 15:02:59,031 - app.api.endpoints.backup - WARNING - Error al eliminar tabla report_bibliographies: (0, '')
2025-05-25 15:02:59,031 - app.api.endpoints.backup - INFO - Intentando truncar tabla report_bibliographies antes de eliminar...
2025-05-25 15:02:59,032 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla report_bibliographies: (0, '')
2025-05-25 15:02:59,032 - app.api.endpoints.backup - INFO - Eliminando tabla: report_agreements
2025-05-25 15:02:59,032 - app.api.endpoints.backup - WARNING - Error al eliminar tabla report_agreements: (0, '')
2025-05-25 15:02:59,033 - app.api.endpoints.backup - INFO - Intentando truncar tabla report_agreements antes de eliminar...
2025-05-25 15:02:59,033 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla report_agreements: (0, '')
2025-05-25 15:02:59,033 - app.api.endpoints.backup - INFO - Eliminando tabla: performance_indicators_quantitative
2025-05-25 15:02:59,033 - app.api.endpoints.backup - WARNING - Error al eliminar tabla performance_indicators_quantitative: (0, '')
2025-05-25 15:02:59,034 - app.api.endpoints.backup - INFO - Intentando truncar tabla performance_indicators_quantitative antes de eliminar...
2025-05-25 15:02:59,034 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla performance_indicators_quantitative: (0, '')
2025-05-25 15:02:59,034 - app.api.endpoints.backup - INFO - Eliminando tabla: performance_indicators_qualitative
2025-05-25 15:02:59,034 - app.api.endpoints.backup - WARNING - Error al eliminar tabla performance_indicators_qualitative: (0, '')
2025-05-25 15:02:59,035 - app.api.endpoints.backup - INFO - Intentando truncar tabla performance_indicators_qualitative antes de eliminar...
2025-05-25 15:02:59,035 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla performance_indicators_qualitative: (0, '')
2025-05-25 15:02:59,035 - app.api.endpoints.backup - INFO - Eliminando tabla: performance_indicators
2025-05-25 15:02:59,035 - app.api.endpoints.backup - WARNING - Error al eliminar tabla performance_indicators: (0, '')
2025-05-25 15:02:59,036 - app.api.endpoints.backup - INFO - Intentando truncar tabla performance_indicators antes de eliminar...
2025-05-25 15:02:59,036 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla performance_indicators: (0, '')
2025-05-25 15:02:59,036 - app.api.endpoints.backup - INFO - Eliminando tabla: heritage_resource_typologies
2025-05-25 15:02:59,037 - app.api.endpoints.backup - WARNING - Error al eliminar tabla heritage_resource_typologies: (0, '')
2025-05-25 15:02:59,037 - app.api.endpoints.backup - INFO - Intentando truncar tabla heritage_resource_typologies antes de eliminar...
2025-05-25 15:02:59,037 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla heritage_resource_typologies: (0, '')
2025-05-25 15:02:59,037 - app.api.endpoints.backup - INFO - Eliminando tabla: heritage_resource_social_networks
2025-05-25 15:02:59,038 - app.api.endpoints.backup - WARNING - Error al eliminar tabla heritage_resource_social_networks: (0, '')
2025-05-25 15:02:59,038 - app.api.endpoints.backup - INFO - Intentando truncar tabla heritage_resource_social_networks antes de eliminar...
2025-05-25 15:02:59,038 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla heritage_resource_social_networks: (0, '')
2025-05-25 15:02:59,038 - app.api.endpoints.backup - INFO - Eliminando tabla: diagnosis_indicators_quantitative
2025-05-25 15:02:59,039 - app.api.endpoints.backup - WARNING - Error al eliminar tabla diagnosis_indicators_quantitative: (0, '')
2025-05-25 15:02:59,039 - app.api.endpoints.backup - INFO - Intentando truncar tabla diagnosis_indicators_quantitative antes de eliminar...
2025-05-25 15:02:59,039 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla diagnosis_indicators_quantitative: (0, '')
2025-05-25 15:02:59,040 - app.api.endpoints.backup - INFO - Eliminando tabla: diagnosis_indicators_qualitative
2025-05-25 15:02:59,040 - app.api.endpoints.backup - WARNING - Error al eliminar tabla diagnosis_indicators_qualitative: (0, '')
2025-05-25 15:02:59,040 - app.api.endpoints.backup - INFO - Intentando truncar tabla diagnosis_indicators_qualitative antes de eliminar...
2025-05-25 15:02:59,040 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla diagnosis_indicators_qualitative: (0, '')
2025-05-25 15:02:59,041 - app.api.endpoints.backup - INFO - Eliminando tabla: diagnosis_indicators
2025-05-25 15:02:59,041 - app.api.endpoints.backup - WARNING - Error al eliminar tabla diagnosis_indicators: (0, '')
2025-05-25 15:02:59,041 - app.api.endpoints.backup - INFO - Intentando truncar tabla diagnosis_indicators antes de eliminar...
2025-05-25 15:02:59,041 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla diagnosis_indicators: (0, '')
2025-05-25 15:02:59,042 - app.api.endpoints.backup - INFO - Eliminando tabla: assessments
2025-05-25 15:02:59,042 - app.api.endpoints.backup - WARNING - Error al eliminar tabla assessments: (0, '')
2025-05-25 15:02:59,043 - app.api.endpoints.backup - INFO - Intentando truncar tabla assessments antes de eliminar...
2025-05-25 15:02:59,043 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla assessments: (0, '')
2025-05-25 15:02:59,043 - app.api.endpoints.backup - INFO - Eliminando tabla: stakeholders
2025-05-25 15:02:59,044 - app.api.endpoints.backup - WARNING - Error al eliminar tabla stakeholders: (0, '')
2025-05-25 15:02:59,044 - app.api.endpoints.backup - INFO - Intentando truncar tabla stakeholders antes de eliminar...
2025-05-25 15:02:59,044 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla stakeholders: (0, '')
2025-05-25 15:02:59,045 - app.api.endpoints.backup - INFO - Eliminando tabla: alembic_version
2025-05-25 15:02:59,045 - app.api.endpoints.backup - WARNING - Error al eliminar tabla alembic_version: (0, '')
2025-05-25 15:02:59,045 - app.api.endpoints.backup - INFO - Intentando truncar tabla alembic_version antes de eliminar...
2025-05-25 15:02:59,045 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla alembic_version: (0, '')
2025-05-25 15:02:59,046 - app.api.endpoints.backup - INFO - Eliminando tabla: actions
2025-05-25 15:02:59,046 - app.api.endpoints.backup - WARNING - Error al eliminar tabla actions: (0, '')
2025-05-25 15:02:59,046 - app.api.endpoints.backup - INFO - Intentando truncar tabla actions antes de eliminar...
2025-05-25 15:02:59,047 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla actions: (0, '')
2025-05-25 15:02:59,047 - app.api.endpoints.backup - INFO - Eliminando tabla: specific_objectives
2025-05-25 15:02:59,047 - app.api.endpoints.backup - WARNING - Error al eliminar tabla specific_objectives: (0, '')
2025-05-25 15:02:59,047 - app.api.endpoints.backup - INFO - Intentando truncar tabla specific_objectives antes de eliminar...
2025-05-25 15:02:59,048 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla specific_objectives: (0, '')
2025-05-25 15:02:59,048 - app.api.endpoints.backup - INFO - Eliminando tabla: material_topics
2025-05-25 15:02:59,048 - app.api.endpoints.backup - WARNING - Error al eliminar tabla material_topics: (0, '')
2025-05-25 15:02:59,049 - app.api.endpoints.backup - INFO - Intentando truncar tabla material_topics antes de eliminar...
2025-05-25 15:02:59,049 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla material_topics: (0, '')
2025-05-25 15:02:59,049 - app.api.endpoints.backup - INFO - Eliminando tabla: sustainability_reports
2025-05-25 15:02:59,050 - app.api.endpoints.backup - WARNING - Error al eliminar tabla sustainability_reports: (0, '')
2025-05-25 15:02:59,051 - app.api.endpoints.backup - INFO - Intentando truncar tabla sustainability_reports antes de eliminar...
2025-05-25 15:02:59,051 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla sustainability_reports: (0, '')
2025-05-25 15:02:59,051 - app.api.endpoints.backup - INFO - Eliminando tabla: heritage_resources
2025-05-25 15:02:59,052 - app.api.endpoints.backup - WARNING - Error al eliminar tabla heritage_resources: (0, '')
2025-05-25 15:02:59,052 - app.api.endpoints.backup - INFO - Intentando truncar tabla heritage_resources antes de eliminar...
2025-05-25 15:02:59,052 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla heritage_resources: (0, '')
2025-05-25 15:02:59,052 - app.api.endpoints.backup - INFO - Eliminando tabla: goals
2025-05-25 15:02:59,053 - app.api.endpoints.backup - WARNING - Error al eliminar tabla goals: (0, '')
2025-05-25 15:02:59,053 - app.api.endpoints.backup - INFO - Intentando truncar tabla goals antes de eliminar...
2025-05-25 15:02:59,053 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla goals: (0, '')
2025-05-25 15:02:59,054 - app.api.endpoints.backup - INFO - Eliminando tabla: ods
2025-05-25 15:02:59,054 - app.api.endpoints.backup - WARNING - Error al eliminar tabla ods: (0, '')
2025-05-25 15:02:59,054 - app.api.endpoints.backup - INFO - Intentando truncar tabla ods antes de eliminar...
2025-05-25 15:02:59,055 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla ods: (0, '')
2025-05-25 15:02:59,055 - app.api.endpoints.backup - INFO - Eliminando tabla: dimensions
2025-05-25 15:02:59,056 - app.api.endpoints.backup - WARNING - Error al eliminar tabla dimensions: (0, '')
2025-05-25 15:02:59,056 - app.api.endpoints.backup - INFO - Intentando truncar tabla dimensions antes de eliminar...
2025-05-25 15:02:59,056 - app.api.endpoints.backup - ERROR - Error al truncar/eliminar tabla dimensions: (0, '')
2025-05-25 15:02:59,056 - app.api.endpoints.backup - INFO - Tablas existentes eliminadas
2025-05-25 15:02:59,057 - app.api.endpoints.backup - INFO - Leyendo archivo SQL...
2025-05-25 15:02:59,060 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 15:02:59,061 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 15:02:59,064 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 117
2025-05-25 15:02:59,065 - app.api.endpoints.backup - INFO - Ejecutando statement 1/117: CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 15:02:59,065 - app.api.endpoints.backup - WARNING - Conexi칩n perdida, reconectando...
2025-05-25 15:02:59,068 - app.api.endpoints.backup - ERROR - Error en statement 1 (intento 1/3): CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 15:02:59,069 - app.api.endpoints.backup - ERROR - Error: (1050, "Table 'dimensions' already exists")
2025-05-25 15:03:01,072 - app.api.endpoints.backup - ERROR - Error en statement 1 (intento 2/3): CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 15:03:01,073 - app.api.endpoints.backup - ERROR - Error: (1050, "Table 'dimensions' already exists")
2025-05-25 15:03:03,076 - app.api.endpoints.backup - ERROR - Error en statement 1 (intento 3/3): CREATE TABLE `dimensions` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`descriptio...
2025-05-25 15:03:03,077 - app.api.endpoints.backup - ERROR - Error: (1050, "Table 'dimensions' already exists")
2025-05-25 15:03:03,077 - app.api.endpoints.backup - ERROR - Se agotaron los reintentos para este statement
2025-05-25 15:03:03,077 - app.api.endpoints.backup - ERROR - Error de MySQL: (1050, "Table 'dimensions' already exists")
2025-05-25 15:03:03,078 - app.api.endpoints.backup - ERROR - Stack trace completo:
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 387, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1050, "Table 'dimensions' already exists")
2025-05-25 15:03:03,084 - app.api.endpoints.backup - INFO - Conexi칩n cerrada
2025-05-25 15:03:03,085 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: Error de MySQL: (1050, "Table 'dimensions' already exists")
2025-05-25 15:03:03,085 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 387, in _do_restore_file
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1050, "Table 'dimensions' already exists")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 481, in restore_backup
    await asyncio.to_thread(
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 420, in _do_restore_file
    raise RuntimeError(f"Error de MySQL: {str(e)}")
RuntimeError: Error de MySQL: (1050, "Table 'dimensions' already exists")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 495, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 15:03:03,094 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 15:05:18,548 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:05:18,548 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 15:05:18,549 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_150518.sql
2025-05-25 15:05:18,552 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 15:05:18,553 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 15:05:18,555 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_150518.sql  True
2025-05-25 15:05:18,556 - app.api.endpoints.backup - INFO - Leyendo archivo SQL para an치lisis de dependencias...
2025-05-25 15:05:18,582 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 15:05:18,586 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 15:05:18,588 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 15:05:18,588 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 15:05:18,589 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 15:05:18,589 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 15:05:18,589 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 15:05:18,590 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 117
2025-05-25 15:05:18,590 - app.api.endpoints.backup - INFO - Ejecutando statement 1/117: DROP TABLE IF EXISTS `actions`;...
2025-05-25 15:05:18,612 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 15:05:18,612 - app.api.endpoints.backup - INFO - Ejecutando statement 2/117: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 15:05:18,624 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 15:05:18,624 - app.api.endpoints.backup - INFO - Ejecutando statement 3/117: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 15:05:18,642 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 15:05:18,642 - app.api.endpoints.backup - INFO - Ejecutando statement 4/117: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 15:05:18,659 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 15:05:18,659 - app.api.endpoints.backup - INFO - Ejecutando statement 5/117: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 15:05:18,670 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 15:05:18,671 - app.api.endpoints.backup - INFO - Ejecutando statement 6/117: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 15:05:18,684 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 15:05:18,684 - app.api.endpoints.backup - INFO - Ejecutando statement 7/117: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 15:05:18,700 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 15:05:18,700 - app.api.endpoints.backup - INFO - Ejecutando statement 8/117: DROP TABLE IF EXISTS `goals`;...
2025-05-25 15:05:18,712 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 15:05:18,713 - app.api.endpoints.backup - INFO - Ejecutando statement 9/117: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 15:05:18,728 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 15:05:18,729 - app.api.endpoints.backup - INFO - Ejecutando statement 10/117: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 15:05:18,742 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 15:05:18,742 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 15:05:18,742 - app.api.endpoints.backup - INFO - Ejecutando statement 11/117: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 15:05:18,762 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 15:05:18,762 - app.api.endpoints.backup - INFO - Ejecutando statement 12/117: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 15:05:18,779 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 15:05:18,779 - app.api.endpoints.backup - INFO - Ejecutando statement 13/117: DROP TABLE IF EXISTS `ods`;...
2025-05-25 15:05:18,792 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 15:05:18,793 - app.api.endpoints.backup - INFO - Ejecutando statement 14/117: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 15:05:18,808 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 15:05:18,808 - app.api.endpoints.backup - INFO - Ejecutando statement 15/117: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 15:05:18,820 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 15:05:18,820 - app.api.endpoints.backup - INFO - Ejecutando statement 16/117: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 15:05:18,833 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 15:05:18,833 - app.api.endpoints.backup - INFO - Ejecutando statement 17/117: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 15:05:18,850 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 15:05:18,851 - app.api.endpoints.backup - INFO - Ejecutando statement 18/117: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 15:05:18,866 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 15:05:18,867 - app.api.endpoints.backup - INFO - Ejecutando statement 19/117: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 15:05:18,887 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 15:05:18,888 - app.api.endpoints.backup - INFO - Ejecutando statement 20/117: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 15:05:18,904 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 15:05:18,905 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 15:05:18,905 - app.api.endpoints.backup - INFO - Ejecutando statement 21/117: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 15:05:18,921 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 15:05:18,922 - app.api.endpoints.backup - INFO - Ejecutando statement 22/117: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 15:05:18,939 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 15:05:18,940 - app.api.endpoints.backup - INFO - Ejecutando statement 23/117: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 15:05:18,956 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 15:05:18,956 - app.api.endpoints.backup - INFO - Ejecutando statement 24/117: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 15:05:18,968 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 15:05:18,969 - app.api.endpoints.backup - INFO - Ejecutando statement 25/117: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 15:05:18,982 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 15:05:18,983 - app.api.endpoints.backup - INFO - Ejecutando statement 26/117: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 15:05:18,999 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 15:05:19,000 - app.api.endpoints.backup - INFO - Ejecutando statement 27/117: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 15:05:19,003 - app.api.endpoints.backup - INFO - Statement 27 ejecutado correctamente
2025-05-25 15:05:19,004 - app.api.endpoints.backup - INFO - Ejecutando statement 28/117: DROP TABLE IF EXISTS `users`;...
2025-05-25 15:08:30,456 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:08:30,456 - app.api.endpoints.backup - INFO - Archivo recibido: prueba2.sql
2025-05-25 15:08:30,457 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_150830.sql
2025-05-25 15:08:30,459 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 15:08:30,460 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 15:08:30,461 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_150830.sql  True
2025-05-25 15:08:30,463 - app.api.endpoints.backup - INFO - Leyendo archivo SQL para an치lisis de dependencias...
2025-05-25 15:08:30,478 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 15:08:30,482 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 15:08:30,485 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 15:08:30,485 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 15:08:30,486 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 15:08:30,486 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 15:08:30,487 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 15:08:30,487 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 117
2025-05-25 15:08:30,487 - app.api.endpoints.backup - INFO - Ejecutando statement 1/117: DROP TABLE IF EXISTS `actions`;...
2025-05-25 15:08:30,507 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 15:08:30,507 - app.api.endpoints.backup - INFO - Ejecutando statement 2/117: DROP TABLE IF EXISTS `alembic_version`;...
2025-05-25 15:08:30,519 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 15:08:30,520 - app.api.endpoints.backup - INFO - Ejecutando statement 3/117: DROP TABLE IF EXISTS `assessments`;...
2025-05-25 15:08:30,534 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 15:08:30,535 - app.api.endpoints.backup - INFO - Ejecutando statement 4/117: DROP TABLE IF EXISTS `diagnosis_indicators`;...
2025-05-25 15:08:30,552 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 15:08:30,552 - app.api.endpoints.backup - INFO - Ejecutando statement 5/117: DROP TABLE IF EXISTS `diagnosis_indicators_qualitative`;...
2025-05-25 15:08:30,563 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 15:08:30,564 - app.api.endpoints.backup - INFO - Ejecutando statement 6/117: DROP TABLE IF EXISTS `diagnosis_indicators_quantitative`;...
2025-05-25 15:08:30,581 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 15:08:30,582 - app.api.endpoints.backup - INFO - Ejecutando statement 7/117: DROP TABLE IF EXISTS `dimensions`;...
2025-05-25 15:08:30,595 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 15:08:30,596 - app.api.endpoints.backup - INFO - Ejecutando statement 8/117: DROP TABLE IF EXISTS `goals`;...
2025-05-25 15:08:30,612 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 15:08:30,612 - app.api.endpoints.backup - INFO - Ejecutando statement 9/117: DROP TABLE IF EXISTS `heritage_resource_social_networks`;...
2025-05-25 15:08:30,633 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 15:08:30,634 - app.api.endpoints.backup - INFO - Ejecutando statement 10/117: DROP TABLE IF EXISTS `heritage_resource_typologies`;...
2025-05-25 15:08:30,648 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 15:08:30,649 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 15:08:30,649 - app.api.endpoints.backup - INFO - Ejecutando statement 11/117: DROP TABLE IF EXISTS `heritage_resources`;...
2025-05-25 15:08:30,666 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 15:08:30,666 - app.api.endpoints.backup - INFO - Ejecutando statement 12/117: DROP TABLE IF EXISTS `material_topics`;...
2025-05-25 15:08:30,683 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 15:08:30,683 - app.api.endpoints.backup - INFO - Ejecutando statement 13/117: DROP TABLE IF EXISTS `ods`;...
2025-05-25 15:08:30,699 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 15:08:30,699 - app.api.endpoints.backup - INFO - Ejecutando statement 14/117: DROP TABLE IF EXISTS `performance_indicators`;...
2025-05-25 15:08:30,713 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 15:08:30,713 - app.api.endpoints.backup - INFO - Ejecutando statement 15/117: DROP TABLE IF EXISTS `performance_indicators_qualitative`;...
2025-05-25 15:08:30,726 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 15:08:30,727 - app.api.endpoints.backup - INFO - Ejecutando statement 16/117: DROP TABLE IF EXISTS `performance_indicators_quantitative`;...
2025-05-25 15:08:30,741 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 15:08:30,741 - app.api.endpoints.backup - INFO - Ejecutando statement 17/117: DROP TABLE IF EXISTS `report_agreements`;...
2025-05-25 15:08:30,755 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 15:08:30,755 - app.api.endpoints.backup - INFO - Ejecutando statement 18/117: DROP TABLE IF EXISTS `report_bibliographies`;...
2025-05-25 15:08:30,770 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 15:08:30,770 - app.api.endpoints.backup - INFO - Ejecutando statement 19/117: DROP TABLE IF EXISTS `report_logos`;...
2025-05-25 15:08:30,784 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 15:08:30,785 - app.api.endpoints.backup - INFO - Ejecutando statement 20/117: DROP TABLE IF EXISTS `report_norms`;...
2025-05-25 15:08:30,801 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 15:08:30,802 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 15:08:30,803 - app.api.endpoints.backup - INFO - Ejecutando statement 21/117: DROP TABLE IF EXISTS `report_photos`;...
2025-05-25 15:08:30,815 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 15:08:30,816 - app.api.endpoints.backup - INFO - Ejecutando statement 22/117: DROP TABLE IF EXISTS `secondary_ods_actions`;...
2025-05-25 15:08:30,830 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 15:08:30,831 - app.api.endpoints.backup - INFO - Ejecutando statement 23/117: DROP TABLE IF EXISTS `secondary_ods_material_topics`;...
2025-05-25 15:08:30,843 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 15:08:30,843 - app.api.endpoints.backup - INFO - Ejecutando statement 24/117: DROP TABLE IF EXISTS `specific_objectives`;...
2025-05-25 15:08:30,856 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 15:08:30,856 - app.api.endpoints.backup - INFO - Ejecutando statement 25/117: DROP TABLE IF EXISTS `stakeholders`;...
2025-05-25 15:08:30,871 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 15:08:30,871 - app.api.endpoints.backup - INFO - Ejecutando statement 26/117: DROP TABLE IF EXISTS `sustainability_reports`;...
2025-05-25 15:08:30,885 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 15:08:30,885 - app.api.endpoints.backup - INFO - Ejecutando statement 27/117: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 15:11:18,542 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:11:18,543 - app.api.endpoints.backup - INFO - Obteniendo lista de tablas ordenadas por dependencias...
2025-05-25 15:11:18,561 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqldump -h db -P 3306 -u root -pcontrasenaprueba sustainability_db sustainability_team_members users secondary_ods_material_topics secondary_ods_actions report_photos report_norms report_logos report_bibliographies report_agreements performance_indicators_quantitative performance_indicators_qualitative performance_indicators heritage_resource_typologies heritage_resource_social_networks diagnosis_indicators_quantitative diagnosis_indicators_qualitative diagnosis_indicators assessments stakeholders alembic_version actions specific_objectives material_topics sustainability_reports heritage_resources goals ods dimensions
2025-05-25 15:11:18,721 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 15:12:45,530 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:12:45,531 - app.api.endpoints.backup - INFO - Archivo recibido: backup.sql
2025-05-25 15:12:45,532 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_151245.sql
2025-05-25 15:12:45,535 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 15:12:45,535 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 15:12:45,537 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_151245.sql  True
2025-05-25 15:12:45,538 - app.api.endpoints.backup - INFO - Leyendo archivo SQL para an치lisis de dependencias...
2025-05-25 15:12:45,550 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 15:12:45,553 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 15:12:45,556 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 15:12:45,556 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 15:12:45,557 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 15:12:45,557 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 15:12:45,558 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 15:12:45,558 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 114
2025-05-25 15:12:45,558 - app.api.endpoints.backup - INFO - Ejecutando statement 1/114: DROP TABLE IF EXISTS `sustainability_team_members`;...
2025-05-25 15:31:53,568 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:31:53,569 - app.api.endpoints.backup - INFO - Obteniendo lista de tablas ordenadas por dependencias...
2025-05-25 15:31:53,594 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqldump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --set-gtid-purged=OFF sustainability_db users secondary_ods_material_topics secondary_ods_actions report_photos report_norms report_logos report_bibliographies report_agreements performance_indicators_quantitative performance_indicators_qualitative performance_indicators heritage_resource_typologies heritage_resource_social_networks diagnosis_indicators_quantitative diagnosis_indicators_qualitative diagnosis_indicators assessments stakeholders alembic_version actions specific_objectives material_topics sustainability_reports heritage_resources goals ods dimensions
2025-05-25 15:31:53,774 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 15:33:50,459 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:33:50,460 - app.api.endpoints.backup - INFO - Archivo recibido: nuevo.sql
2025-05-25 15:33:50,460 - app.api.endpoints.backup - INFO - Guardando archivo en: /app/backups/restore_20250525_153350.sql
2025-05-25 15:33:50,463 - app.api.endpoints.backup - INFO - Archivo guardado correctamente
2025-05-25 15:33:50,463 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n...
2025-05-25 15:33:50,467 - app.api.endpoints.backup - INFO - 쮼xiste el fichero? /app/backups/restore_20250525_153350.sql  True
2025-05-25 15:33:50,468 - app.api.endpoints.backup - INFO - Leyendo archivo SQL para an치lisis de dependencias...
2025-05-25 15:33:50,480 - app.api.endpoints.backup - INFO - Archivo SQL le칤do correctamente
2025-05-25 15:33:50,484 - app.api.endpoints.backup - INFO - Conectando a MySQL en db:3306...
2025-05-25 15:33:50,486 - app.api.endpoints.backup - INFO - Conexi칩n establecida
2025-05-25 15:33:50,487 - app.api.endpoints.backup - INFO - Probando conexi칩n...
2025-05-25 15:33:50,488 - app.api.endpoints.backup - INFO - Versi칩n de MySQL: 8.0.42
2025-05-25 15:33:50,488 - app.api.endpoints.backup - INFO - Desactivando restricciones de clave for치nea...
2025-05-25 15:33:50,488 - app.api.endpoints.backup - INFO - Restricciones desactivadas
2025-05-25 15:33:50,489 - app.api.endpoints.backup - INFO - Total de statements a ejecutar: 110
2025-05-25 15:33:50,489 - app.api.endpoints.backup - INFO - Ejecutando statement 1/110: DROP TABLE IF EXISTS `users`;...
2025-05-25 15:41:56,193 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:41:56,195 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqldump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --set-gtid-purged=OFF sustainability_db
2025-05-25 15:41:56,378 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 15:42:43,187 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:42:43,187 - app.api.endpoints.backup - INFO - Archivo recibido: nuevo.sql
2025-05-25 15:47:40,236 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:47:40,237 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events sustainability_db
2025-05-25 15:47:40,413 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 15:48:37,950 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:48:37,950 - app.api.endpoints.backup - INFO - Archivo recibido: nuevo2.sql
2025-05-25 15:48:37,989 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1050 (42S01) at line 17: Table 'actions' already exists

2025-05-25 15:48:37,990 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 432, in restore_backup
    await asyncio.to_thread(_run)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 428, in _run
    raise RuntimeError(err.decode())
RuntimeError: mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1050 (42S01) at line 17: Table 'actions' already exists


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 441, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 15:55:58,362 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:55:58,365 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --add-drop-table sustainability_db
2025-05-25 15:55:58,548 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 15:56:18,469 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 15:56:18,469 - app.api.endpoints.backup - INFO - Archivo recibido: nuevo2.sql
2025-05-25 15:56:18,473 - app.api.endpoints.backup - ERROR - Error en la restauraci칩n: mysql: [Warning] Using a password on the command line interface can be insecure.

2025-05-25 15:56:18,473 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: 
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 436, in restore_backup
    await asyncio.to_thread(_run)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 432, in _run
    raise RuntimeError(err.decode())
RuntimeError: mysql: [Warning] Using a password on the command line interface can be insecure.


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 445, in restore_backup
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException
2025-05-25 16:04:08,842 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:04:08,843 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --add-drop-table sustainability_db
2025-05-25 16:04:09,016 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 16:04:15,894 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:04:15,894 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25.sql
2025-05-25 16:08:05,319 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:08:05,320 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25.sql
2025-05-25 16:14:17,757 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:14:17,759 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --add-drop-table sustainability_db
2025-05-25 16:14:17,919 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 16:14:37,065 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:14:37,066 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25.sql
2025-05-25 16:17:45,898 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:17:45,899 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --add-drop-table sustainability_db
2025-05-25 16:17:46,071 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 16:18:06,327 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:18:06,328 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25.sql
2025-05-25 16:18:06,329 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25.sql
2025-05-25 16:18:06,330 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n del dump
2025-05-25 16:21:54,839 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:21:54,839 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25.sql
2025-05-25 16:21:54,840 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25.sql
2025-05-25 16:21:54,842 - app.api.endpoints.backup - INFO - Limpiando base de datos sustainability_db
2025-05-25 16:24:37,288 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:24:37,290 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --add-drop-table sustainability_db
2025-05-25 16:24:37,495 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 16:25:11,161 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:25:11,162 - app.api.endpoints.backup - INFO - Archivo recibido: nuevo2.sql
2025-05-25 16:25:11,162 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/nuevo2.sql
2025-05-25 16:25:11,163 - app.api.endpoints.backup - INFO - Limpiando base de datos sustainability_db
2025-05-25 16:28:54,412 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:28:54,413 - app.api.endpoints.backup - INFO - Intentando backup con: /usr/bin/mysqlpump -h db -P 3306 -u root -pcontrasenaprueba --single-transaction --routines --triggers --events --add-drop-table sustainability_db
2025-05-25 16:28:54,588 - app.api.endpoints.backup - INFO - Backup creado exitosamente con mysqldump directo
2025-05-25 16:29:13,995 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:29:13,995 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25.sql
2025-05-25 16:29:13,996 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25.sql
2025-05-25 16:29:13,997 - app.api.endpoints.backup - INFO - Analizando dependencias del dump...
2025-05-25 16:29:14,001 - app.api.endpoints.backup - INFO - Ejecutando 137 statements en orden...
2025-05-25 16:29:14,004 - app.api.endpoints.backup - INFO - Ejecutando statement 1/137
2025-05-25 16:29:14,004 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`actions`;
2025-05-25 16:29:14,020 - app.api.endpoints.backup - INFO - Statement 1 ejecutado correctamente
2025-05-25 16:29:14,020 - app.api.endpoints.backup - INFO - Ejecutando statement 2/137
2025-05-25 16:29:14,021 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`alembic_version`;
2025-05-25 16:29:14,032 - app.api.endpoints.backup - INFO - Statement 2 ejecutado correctamente
2025-05-25 16:29:14,032 - app.api.endpoints.backup - INFO - Ejecutando statement 3/137
2025-05-25 16:29:14,032 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`assessments`;
2025-05-25 16:29:14,046 - app.api.endpoints.backup - INFO - Statement 3 ejecutado correctamente
2025-05-25 16:29:14,046 - app.api.endpoints.backup - INFO - Ejecutando statement 4/137
2025-05-25 16:29:14,047 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`diagnosis_indicators`;
2025-05-25 16:29:14,063 - app.api.endpoints.backup - INFO - Statement 4 ejecutado correctamente
2025-05-25 16:29:14,064 - app.api.endpoints.backup - INFO - Ejecutando statement 5/137
2025-05-25 16:29:14,064 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`diagnosis_indicators_qualitative`;
2025-05-25 16:29:14,076 - app.api.endpoints.backup - INFO - Statement 5 ejecutado correctamente
2025-05-25 16:29:14,076 - app.api.endpoints.backup - INFO - Ejecutando statement 6/137
2025-05-25 16:29:14,077 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`diagnosis_indicators_quantitative`;
2025-05-25 16:29:14,088 - app.api.endpoints.backup - INFO - Statement 6 ejecutado correctamente
2025-05-25 16:29:14,089 - app.api.endpoints.backup - INFO - Ejecutando statement 7/137
2025-05-25 16:29:14,089 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`dimensions`;
2025-05-25 16:29:14,104 - app.api.endpoints.backup - INFO - Statement 7 ejecutado correctamente
2025-05-25 16:29:14,105 - app.api.endpoints.backup - INFO - Ejecutando statement 8/137
2025-05-25 16:29:14,105 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`goals`;
2025-05-25 16:29:14,119 - app.api.endpoints.backup - INFO - Statement 8 ejecutado correctamente
2025-05-25 16:29:14,119 - app.api.endpoints.backup - INFO - Ejecutando statement 9/137
2025-05-25 16:29:14,120 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`heritage_resource_social_networks`;
2025-05-25 16:29:14,133 - app.api.endpoints.backup - INFO - Statement 9 ejecutado correctamente
2025-05-25 16:29:14,133 - app.api.endpoints.backup - INFO - Ejecutando statement 10/137
2025-05-25 16:29:14,133 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`heritage_resource_typologies`;
2025-05-25 16:29:14,149 - app.api.endpoints.backup - INFO - Statement 10 ejecutado correctamente
2025-05-25 16:29:14,150 - app.api.endpoints.backup - INFO - Commit realizado en statement 10
2025-05-25 16:29:14,151 - app.api.endpoints.backup - INFO - Ejecutando statement 11/137
2025-05-25 16:29:14,151 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`heritage_resources`;
2025-05-25 16:29:14,164 - app.api.endpoints.backup - INFO - Statement 11 ejecutado correctamente
2025-05-25 16:29:14,164 - app.api.endpoints.backup - INFO - Ejecutando statement 12/137
2025-05-25 16:29:14,164 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`material_topics`;
2025-05-25 16:29:14,182 - app.api.endpoints.backup - INFO - Statement 12 ejecutado correctamente
2025-05-25 16:29:14,182 - app.api.endpoints.backup - INFO - Ejecutando statement 13/137
2025-05-25 16:29:14,183 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`ods`;
2025-05-25 16:29:14,197 - app.api.endpoints.backup - INFO - Statement 13 ejecutado correctamente
2025-05-25 16:29:14,197 - app.api.endpoints.backup - INFO - Ejecutando statement 14/137
2025-05-25 16:29:14,198 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`performance_indicators`;
2025-05-25 16:29:14,212 - app.api.endpoints.backup - INFO - Statement 14 ejecutado correctamente
2025-05-25 16:29:14,212 - app.api.endpoints.backup - INFO - Ejecutando statement 15/137
2025-05-25 16:29:14,212 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`performance_indicators_qualitative`;
2025-05-25 16:29:14,225 - app.api.endpoints.backup - INFO - Statement 15 ejecutado correctamente
2025-05-25 16:29:14,225 - app.api.endpoints.backup - INFO - Ejecutando statement 16/137
2025-05-25 16:29:14,225 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`performance_indicators_quantitative`;
2025-05-25 16:29:14,237 - app.api.endpoints.backup - INFO - Statement 16 ejecutado correctamente
2025-05-25 16:29:14,237 - app.api.endpoints.backup - INFO - Ejecutando statement 17/137
2025-05-25 16:29:14,237 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`report_agreements`;
2025-05-25 16:29:14,251 - app.api.endpoints.backup - INFO - Statement 17 ejecutado correctamente
2025-05-25 16:29:14,252 - app.api.endpoints.backup - INFO - Ejecutando statement 18/137
2025-05-25 16:29:14,252 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`report_bibliographies`;
2025-05-25 16:29:14,270 - app.api.endpoints.backup - INFO - Statement 18 ejecutado correctamente
2025-05-25 16:29:14,270 - app.api.endpoints.backup - INFO - Ejecutando statement 19/137
2025-05-25 16:29:14,270 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`report_logos`;
2025-05-25 16:29:14,284 - app.api.endpoints.backup - INFO - Statement 19 ejecutado correctamente
2025-05-25 16:29:14,285 - app.api.endpoints.backup - INFO - Ejecutando statement 20/137
2025-05-25 16:29:14,285 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`report_norms`;
2025-05-25 16:29:14,299 - app.api.endpoints.backup - INFO - Statement 20 ejecutado correctamente
2025-05-25 16:29:14,300 - app.api.endpoints.backup - INFO - Commit realizado en statement 20
2025-05-25 16:29:14,301 - app.api.endpoints.backup - INFO - Ejecutando statement 21/137
2025-05-25 16:29:14,301 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`report_photos`;
2025-05-25 16:29:14,314 - app.api.endpoints.backup - INFO - Statement 21 ejecutado correctamente
2025-05-25 16:29:14,315 - app.api.endpoints.backup - INFO - Ejecutando statement 22/137
2025-05-25 16:29:14,315 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`secondary_ods_actions`;
2025-05-25 16:29:14,329 - app.api.endpoints.backup - INFO - Statement 22 ejecutado correctamente
2025-05-25 16:29:14,329 - app.api.endpoints.backup - INFO - Ejecutando statement 23/137
2025-05-25 16:29:14,329 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`secondary_ods_material_topics`;
2025-05-25 16:29:14,340 - app.api.endpoints.backup - INFO - Statement 23 ejecutado correctamente
2025-05-25 16:29:14,341 - app.api.endpoints.backup - INFO - Ejecutando statement 24/137
2025-05-25 16:29:14,341 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`specific_objectives`;
2025-05-25 16:29:14,353 - app.api.endpoints.backup - INFO - Statement 24 ejecutado correctamente
2025-05-25 16:29:14,353 - app.api.endpoints.backup - INFO - Ejecutando statement 25/137
2025-05-25 16:29:14,354 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`stakeholders`;
2025-05-25 16:29:14,369 - app.api.endpoints.backup - INFO - Statement 25 ejecutado correctamente
2025-05-25 16:29:14,369 - app.api.endpoints.backup - INFO - Ejecutando statement 26/137
2025-05-25 16:29:14,370 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`sustainability_reports`;
2025-05-25 16:29:14,383 - app.api.endpoints.backup - INFO - Statement 26 ejecutado correctamente
2025-05-25 16:29:14,384 - app.api.endpoints.backup - INFO - Ejecutando statement 27/137
2025-05-25 16:29:14,384 - app.api.endpoints.backup - INFO - Statement: DROP TABLE IF EXISTS `sustainability_db`.`sustainability_team_members`;
2025-05-25 16:45:25,562 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:45:25,564 - app.api.endpoints.backup - INFO - Conectando a MySQL para analizar dependencias...
2025-05-25 16:45:25,567 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 16:45:25,570 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 16:45:25,570 - app.api.endpoints.backup - INFO - Orden de tablas: ['assessments', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'sustainability_team_members', 'alembic_version', 'stakeholders', 'diagnosis_indicators', 'performance_indicators', 'users', 'actions', 'specific_objectives', 'material_topics', 'goals', 'sustainability_reports', 'ods', 'heritage_resources', 'dimensions']
2025-05-25 16:45:25,570 - app.api.endpoints.backup - INFO - Creando dump de tabla: assessments
2025-05-25 16:45:25,642 - app.api.endpoints.backup - INFO - Creando dump de tabla: diagnosis_indicators_qualitative
2025-05-25 16:45:25,686 - app.api.endpoints.backup - INFO - Creando dump de tabla: diagnosis_indicators_quantitative
2025-05-25 16:45:25,735 - app.api.endpoints.backup - INFO - Creando dump de tabla: heritage_resource_social_networks
2025-05-25 16:45:25,789 - app.api.endpoints.backup - INFO - Creando dump de tabla: heritage_resource_typologies
2025-05-25 16:45:25,841 - app.api.endpoints.backup - INFO - Creando dump de tabla: performance_indicators_qualitative
2025-05-25 16:45:25,887 - app.api.endpoints.backup - INFO - Creando dump de tabla: performance_indicators_quantitative
2025-05-25 16:45:25,935 - app.api.endpoints.backup - INFO - Creando dump de tabla: report_agreements
2025-05-25 16:45:25,984 - app.api.endpoints.backup - INFO - Creando dump de tabla: report_bibliographies
2025-05-25 16:45:26,033 - app.api.endpoints.backup - INFO - Creando dump de tabla: report_logos
2025-05-25 16:45:26,079 - app.api.endpoints.backup - INFO - Creando dump de tabla: report_norms
2025-05-25 16:45:26,123 - app.api.endpoints.backup - INFO - Creando dump de tabla: report_photos
2025-05-25 16:45:26,164 - app.api.endpoints.backup - INFO - Creando dump de tabla: secondary_ods_actions
2025-05-25 16:45:26,211 - app.api.endpoints.backup - INFO - Creando dump de tabla: secondary_ods_material_topics
2025-05-25 16:45:26,256 - app.api.endpoints.backup - INFO - Creando dump de tabla: sustainability_team_members
2025-05-25 16:45:26,300 - app.api.endpoints.backup - INFO - Creando dump de tabla: alembic_version
2025-05-25 16:45:26,349 - app.api.endpoints.backup - INFO - Creando dump de tabla: stakeholders
2025-05-25 16:45:26,394 - app.api.endpoints.backup - INFO - Creando dump de tabla: diagnosis_indicators
2025-05-25 16:45:26,458 - app.api.endpoints.backup - INFO - Creando dump de tabla: performance_indicators
2025-05-25 16:45:26,522 - app.api.endpoints.backup - INFO - Creando dump de tabla: users
2025-05-25 16:45:26,569 - app.api.endpoints.backup - INFO - Creando dump de tabla: actions
2025-05-25 16:45:26,615 - app.api.endpoints.backup - INFO - Creando dump de tabla: specific_objectives
2025-05-25 16:45:26,660 - app.api.endpoints.backup - INFO - Creando dump de tabla: material_topics
2025-05-25 16:45:26,702 - app.api.endpoints.backup - INFO - Creando dump de tabla: goals
2025-05-25 16:45:26,750 - app.api.endpoints.backup - INFO - Creando dump de tabla: sustainability_reports
2025-05-25 16:45:26,797 - app.api.endpoints.backup - INFO - Creando dump de tabla: ods
2025-05-25 16:45:26,844 - app.api.endpoints.backup - INFO - Creando dump de tabla: heritage_resources
2025-05-25 16:45:26,887 - app.api.endpoints.backup - INFO - Creando dump de tabla: dimensions
2025-05-25 16:45:26,932 - app.api.endpoints.backup - INFO - Backup ordenado creado exitosamente
2025-05-25 16:46:22,206 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:46:22,206 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (1).sql
2025-05-25 16:46:22,208 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (1).sql
2025-05-25 16:46:22,208 - app.api.endpoints.backup - INFO - Recreando base de datos sustainability_db
2025-05-25 16:55:33,213 - app.api.endpoints.backup - INFO - Iniciando creaci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:55:33,214 - app.api.endpoints.backup - INFO - Conectando a MySQL para analizar dependencias...
2025-05-25 16:55:33,217 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 16:55:33,219 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 16:55:33,220 - app.api.endpoints.backup - INFO - Orden de tablas: ['assessments', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'sustainability_team_members', 'alembic_version', 'stakeholders', 'diagnosis_indicators', 'performance_indicators', 'users', 'actions', 'specific_objectives', 'material_topics', 'goals', 'sustainability_reports', 'ods', 'heritage_resources', 'dimensions']
2025-05-25 16:55:33,221 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: dimensions
2025-05-25 16:55:33,221 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resources
2025-05-25 16:55:33,221 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: ods
2025-05-25 16:55:33,222 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_reports
2025-05-25 16:55:33,222 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: goals
2025-05-25 16:55:33,223 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: material_topics
2025-05-25 16:55:33,223 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: specific_objectives
2025-05-25 16:55:33,224 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: actions
2025-05-25 16:55:33,224 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: users
2025-05-25 16:55:33,224 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators
2025-05-25 16:55:33,225 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators
2025-05-25 16:55:33,225 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: stakeholders
2025-05-25 16:55:33,225 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: alembic_version
2025-05-25 16:55:33,225 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_team_members
2025-05-25 16:55:33,226 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_material_topics
2025-05-25 16:55:33,226 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_actions
2025-05-25 16:55:33,226 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_photos
2025-05-25 16:55:33,226 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_norms
2025-05-25 16:55:33,227 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_logos
2025-05-25 16:55:33,227 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_bibliographies
2025-05-25 16:55:33,227 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_agreements
2025-05-25 16:55:33,227 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_quantitative
2025-05-25 16:55:33,228 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_qualitative
2025-05-25 16:55:33,228 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_typologies
2025-05-25 16:55:33,228 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_social_networks
2025-05-25 16:55:33,229 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_quantitative
2025-05-25 16:55:33,229 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_qualitative
2025-05-25 16:55:33,229 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: assessments
2025-05-25 16:55:33,229 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: assessments
2025-05-25 16:55:33,291 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: diagnosis_indicators_qualitative
2025-05-25 16:55:33,333 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: diagnosis_indicators_quantitative
2025-05-25 16:55:33,378 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resource_social_networks
2025-05-25 16:55:33,424 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resource_typologies
2025-05-25 16:55:33,470 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: performance_indicators_qualitative
2025-05-25 16:55:33,512 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: performance_indicators_quantitative
2025-05-25 16:55:33,555 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_agreements
2025-05-25 16:55:33,598 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_bibliographies
2025-05-25 16:55:33,655 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_logos
2025-05-25 16:55:33,710 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_norms
2025-05-25 16:55:33,762 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_photos
2025-05-25 16:55:33,807 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: secondary_ods_actions
2025-05-25 16:55:33,852 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: secondary_ods_material_topics
2025-05-25 16:55:33,893 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: sustainability_team_members
2025-05-25 16:55:33,933 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: alembic_version
2025-05-25 16:55:33,973 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: stakeholders
2025-05-25 16:55:34,017 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: diagnosis_indicators
2025-05-25 16:55:34,059 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: performance_indicators
2025-05-25 16:55:34,103 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: users
2025-05-25 16:55:34,145 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: actions
2025-05-25 16:55:34,185 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: specific_objectives
2025-05-25 16:55:34,229 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: material_topics
2025-05-25 16:55:34,268 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: goals
2025-05-25 16:55:34,312 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: sustainability_reports
2025-05-25 16:55:34,353 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: ods
2025-05-25 16:55:34,393 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resources
2025-05-25 16:55:34,438 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: dimensions
2025-05-25 16:55:34,478 - app.api.endpoints.backup - INFO - Backup ordenado creado exitosamente
2025-05-25 16:56:22,941 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:56:22,942 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 16:56:22,943 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 16:56:22,944 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 16:56:22,975 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 16:56:22,976 - app.api.endpoints.backup - INFO - Iniciando importaci칩n de datos...
2025-05-25 16:56:22,978 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: flush of closed file
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 262, in restore_backup
    await asyncio.to_thread(_restore)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 247, in _restore
    stdout, stderr = proc.communicate()
  File "/usr/local/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/local/lib/python3.10/subprocess.py", line 1973, in _communicate
    self.stdin.flush()
ValueError: flush of closed file
2025-05-25 16:56:22,987 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 16:58:54,464 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 16:58:54,465 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 16:58:54,466 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 16:58:54,467 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 16:58:54,501 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 16:58:54,502 - app.api.endpoints.backup - INFO - Iniciando importaci칩n de datos...
2025-05-25 17:04:10,470 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:04:10,470 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 17:04:10,471 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 17:04:10,473 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:04:10,506 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:04:10,511 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:04:10,513 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:04:10,514 - app.api.endpoints.backup - INFO - Orden de tablas: ['assessments', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'sustainability_team_members', 'alembic_version', 'stakeholders', 'diagnosis_indicators', 'performance_indicators', 'users', 'actions', 'specific_objectives', 'material_topics', 'goals', 'sustainability_reports', 'ods', 'heritage_resources', 'dimensions']
2025-05-25 17:04:10,514 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:04:10,515 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:04:10,515 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:04:10,703 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada
2025-05-25 17:04:10,704 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:04:10,766 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada
2025-05-25 17:04:10,766 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:04:10,823 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada
2025-05-25 17:04:10,824 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:04:10,861 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada
2025-05-25 17:04:10,861 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:04:10,888 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada
2025-05-25 17:04:10,889 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:04:10,922 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada
2025-05-25 17:04:10,922 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:04:10,951 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada
2025-05-25 17:04:10,952 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:04:10,984 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada
2025-05-25 17:04:10,985 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `users`
2025-05-25 17:06:50,903 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 350, in restore_backup
    await asyncio.to_thread(_restore)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 260, in _restore
    cursor.execute(f"TRUNCATE TABLE `{table}`")
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 744, in _read_packet
    packet_header = self._read_bytes(4)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 798, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-05-25 17:06:50,911 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 17:08:17,121 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:08:17,122 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 17:08:17,123 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 17:08:17,124 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:08:17,160 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:08:17,165 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:08:17,168 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:08:17,168 - app.api.endpoints.backup - INFO - Orden de tablas: ['assessments', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'sustainability_team_members', 'alembic_version', 'stakeholders', 'diagnosis_indicators', 'performance_indicators', 'users', 'actions', 'specific_objectives', 'material_topics', 'goals', 'sustainability_reports', 'ods', 'heritage_resources', 'dimensions']
2025-05-25 17:08:17,169 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:08:17,170 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:08:17,171 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:08:17,227 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada
2025-05-25 17:08:17,229 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:08:17,272 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada
2025-05-25 17:08:17,273 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:08:17,310 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada
2025-05-25 17:08:17,310 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:08:17,366 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada
2025-05-25 17:08:17,367 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:08:17,408 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada
2025-05-25 17:08:17,409 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:08:17,445 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada
2025-05-25 17:08:17,445 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:08:17,481 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada
2025-05-25 17:08:17,481 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:08:17,517 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada
2025-05-25 17:08:17,518 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `users`
2025-05-25 17:13:19,413 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:13:19,414 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 17:13:19,416 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 17:13:19,418 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:13:19,452 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:13:19,458 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:13:19,460 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:13:19,461 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:13:19,461 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:13:19,462 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:13:19,463 - app.api.endpoints.backup - INFO - Orden para TRUNCATE (hijos  padres): ['performance_indicators_quantitative', 'performance_indicators_qualitative', 'secondary_ods_actions', 'performance_indicators', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'actions', 'secondary_ods_material_topics', 'diagnosis_indicators', 'assessments', 'specific_objectives', 'material_topics', 'goals', 'sustainability_team_members', 'report_photos', 'report_norms', 'report_logos', 'report_bibliographies', 'report_agreements', 'stakeholders', 'ods', 'sustainability_reports', 'heritage_resource_typologies', 'heritage_resource_social_networks', 'alembic_version', 'users', 'dimensions', 'heritage_resources']
2025-05-25 17:13:19,463 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_quantitative`
2025-05-25 17:13:19,494 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_quantitative` limpiada
2025-05-25 17:13:19,494 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_qualitative`
2025-05-25 17:13:19,518 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_qualitative` limpiada
2025-05-25 17:13:19,519 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_actions`
2025-05-25 17:13:19,549 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_actions` limpiada
2025-05-25 17:13:19,550 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators`
2025-05-25 17:13:19,585 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators` limpiada
2025-05-25 17:13:19,586 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_quantitative`
2025-05-25 17:13:19,612 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_quantitative` limpiada
2025-05-25 17:13:19,612 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_qualitative`
2025-05-25 17:13:19,636 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_qualitative` limpiada
2025-05-25 17:13:19,637 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:13:19,670 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada
2025-05-25 17:13:19,671 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_material_topics`
2025-05-25 17:13:19,700 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_material_topics` limpiada
2025-05-25 17:13:19,701 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators`
2025-05-25 17:13:19,739 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators` limpiada
2025-05-25 17:13:19,740 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `assessments`
2025-05-25 17:13:19,772 - app.api.endpoints.backup - INFO - 九 Tabla `assessments` limpiada
2025-05-25 17:13:19,773 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:13:19,803 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada
2025-05-25 17:13:19,804 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:13:19,840 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada
2025-05-25 17:13:19,840 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:13:19,869 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada
2025-05-25 17:13:19,869 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_team_members`
2025-05-25 17:13:19,907 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_team_members` limpiada
2025-05-25 17:13:19,907 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_photos`
2025-05-25 17:13:19,937 - app.api.endpoints.backup - INFO - 九 Tabla `report_photos` limpiada
2025-05-25 17:13:19,938 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_norms`
2025-05-25 17:13:19,967 - app.api.endpoints.backup - INFO - 九 Tabla `report_norms` limpiada
2025-05-25 17:13:19,968 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_logos`
2025-05-25 17:13:20,000 - app.api.endpoints.backup - INFO - 九 Tabla `report_logos` limpiada
2025-05-25 17:13:20,000 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_bibliographies`
2025-05-25 17:13:20,030 - app.api.endpoints.backup - INFO - 九 Tabla `report_bibliographies` limpiada
2025-05-25 17:13:20,030 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_agreements`
2025-05-25 17:13:20,059 - app.api.endpoints.backup - INFO - 九 Tabla `report_agreements` limpiada
2025-05-25 17:13:20,059 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `stakeholders`
2025-05-25 17:13:20,088 - app.api.endpoints.backup - INFO - 九 Tabla `stakeholders` limpiada
2025-05-25 17:13:20,088 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:13:20,125 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada
2025-05-25 17:13:20,125 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:13:20,159 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada
2025-05-25 17:13:20,159 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_typologies`
2025-05-25 17:13:20,202 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_typologies` limpiada
2025-05-25 17:13:20,203 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_social_networks`
2025-05-25 17:13:20,256 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_social_networks` limpiada
2025-05-25 17:13:20,257 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `alembic_version`
2025-05-25 17:13:20,294 - app.api.endpoints.backup - INFO - 九 Tabla `alembic_version` limpiada
2025-05-25 17:13:20,294 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `users`
2025-05-25 17:17:18,925 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:17:18,926 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 17:17:18,927 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 17:17:18,928 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:17:18,963 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:17:18,968 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:17:18,971 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:17:18,972 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:17:18,972 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:17:18,973 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:17:18,974 - app.api.endpoints.backup - INFO - Orden para TRUNCATE (hijos  padres): ['performance_indicators_quantitative', 'performance_indicators_qualitative', 'secondary_ods_actions', 'performance_indicators', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'actions', 'secondary_ods_material_topics', 'diagnosis_indicators', 'assessments', 'specific_objectives', 'material_topics', 'goals', 'sustainability_team_members', 'report_photos', 'report_norms', 'report_logos', 'report_bibliographies', 'report_agreements', 'stakeholders', 'ods', 'sustainability_reports', 'heritage_resource_typologies', 'heritage_resource_social_networks', 'alembic_version', 'users', 'dimensions', 'heritage_resources']
2025-05-25 17:17:18,974 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_quantitative`
2025-05-25 17:17:19,095 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:17:19,096 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_qualitative`
2025-05-25 17:17:19,175 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:17:19,176 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_actions`
2025-05-25 17:17:19,385 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_actions` limpiada con TRUNCATE
2025-05-25 17:17:19,386 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators`
2025-05-25 17:17:19,512 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators` limpiada con TRUNCATE
2025-05-25 17:17:19,512 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_quantitative`
2025-05-25 17:17:19,606 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:17:19,606 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_qualitative`
2025-05-25 17:17:19,700 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:17:19,700 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:17:19,813 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada con TRUNCATE
2025-05-25 17:17:19,813 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_material_topics`
2025-05-25 17:17:19,921 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_material_topics` limpiada con TRUNCATE
2025-05-25 17:17:19,921 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators`
2025-05-25 17:17:20,039 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators` limpiada con TRUNCATE
2025-05-25 17:17:20,040 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `assessments`
2025-05-25 17:17:20,170 - app.api.endpoints.backup - INFO - 九 Tabla `assessments` limpiada con TRUNCATE
2025-05-25 17:17:20,171 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:17:20,342 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada con TRUNCATE
2025-05-25 17:17:20,342 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:17:20,472 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada con TRUNCATE
2025-05-25 17:17:20,473 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:17:20,572 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada con TRUNCATE
2025-05-25 17:17:20,573 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_team_members`
2025-05-25 17:17:20,701 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_team_members` limpiada con TRUNCATE
2025-05-25 17:17:20,701 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_photos`
2025-05-25 17:17:20,812 - app.api.endpoints.backup - INFO - 九 Tabla `report_photos` limpiada con TRUNCATE
2025-05-25 17:17:20,812 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_norms`
2025-05-25 17:17:20,926 - app.api.endpoints.backup - INFO - 九 Tabla `report_norms` limpiada con TRUNCATE
2025-05-25 17:17:20,926 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_logos`
2025-05-25 17:17:21,031 - app.api.endpoints.backup - INFO - 九 Tabla `report_logos` limpiada con TRUNCATE
2025-05-25 17:17:21,031 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_bibliographies`
2025-05-25 17:17:21,132 - app.api.endpoints.backup - INFO - 九 Tabla `report_bibliographies` limpiada con TRUNCATE
2025-05-25 17:17:21,132 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_agreements`
2025-05-25 17:17:21,240 - app.api.endpoints.backup - INFO - 九 Tabla `report_agreements` limpiada con TRUNCATE
2025-05-25 17:17:21,240 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `stakeholders`
2025-05-25 17:17:21,399 - app.api.endpoints.backup - INFO - 九 Tabla `stakeholders` limpiada con TRUNCATE
2025-05-25 17:17:21,400 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:17:21,532 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada con TRUNCATE
2025-05-25 17:17:21,533 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:17:21,652 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada con TRUNCATE
2025-05-25 17:17:21,652 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_typologies`
2025-05-25 17:17:21,779 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_typologies` limpiada con TRUNCATE
2025-05-25 17:17:21,780 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_social_networks`
2025-05-25 17:17:21,920 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_social_networks` limpiada con TRUNCATE
2025-05-25 17:17:21,920 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `alembic_version`
2025-05-25 17:17:22,015 - app.api.endpoints.backup - INFO - 九 Tabla `alembic_version` limpiada con TRUNCATE
2025-05-25 17:17:22,015 - app.api.endpoints.backup - INFO - DELETE FROM `users` (tabla especial)
2025-05-25 17:17:22,016 - app.api.endpoints.backup - INFO - 九 Tabla `users` limpiada con DELETE
2025-05-25 17:17:22,017 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:17:22,142 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada con TRUNCATE
2025-05-25 17:17:22,143 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:17:22,288 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada con TRUNCATE
2025-05-25 17:17:22,289 - app.api.endpoints.backup - INFO - === PASO 2: Procesando archivo SQL ===
2025-05-25 17:17:22,290 - app.api.endpoints.backup - INFO - === PASO 3: Ejecutando 2 INSERT statements ===
2025-05-25 17:17:22,290 - app.api.endpoints.backup - INFO - Orden para INSERT (padres  hijos): ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:17:22,290 - app.api.endpoints.backup - INFO - [1/2] Ejecutando INSERT en tabla `alembic_version`
2025-05-25 17:17:22,291 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `alembic_version` (`version_num`) VALUES ('8e597e8d9c1b');
2025-05-25 17:17:22,292 - app.api.endpoints.backup - INFO - 九 INSERT 1 ejecutado correctamente en tabla `alembic_version`
2025-05-25 17:17:22,292 - app.api.endpoints.backup - INFO - [2/2] Ejecutando INSERT en tabla `users`
2025-05-25 17:17:22,293 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `users` (`id`, `email`, `password`, `admin`, `name`, `surname`, `phone_number`, `reset_token`, `reset_token_expiration`, `reset_token_state`) VALUES (1,'i12gafej@uco.es','$2b$12$hNxsfDKOVP...
2025-05-25 17:17:22,293 - app.api.endpoints.backup - INFO - 九 INSERT 2 ejecutado correctamente en tabla `users`
2025-05-25 17:17:22,310 - app.api.endpoints.backup - INFO - 九 Restauraci칩n de datos completada exitosamente
2025-05-25 17:17:22,311 - app.api.endpoints.backup - INFO - Backup restaurado exitosamente
2025-05-25 17:17:22,311 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 17:18:01,053 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:18:01,054 - app.api.endpoints.backup - INFO - Archivo recibido: backup_2025-05-25 (2).sql
2025-05-25 17:18:01,054 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/backup_2025-05-25 (2).sql
2025-05-25 17:18:01,055 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:18:01,088 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:18:01,093 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:18:01,095 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:18:01,095 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:18:01,095 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:18:01,096 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:18:01,097 - app.api.endpoints.backup - INFO - Orden para TRUNCATE (hijos  padres): ['performance_indicators_quantitative', 'performance_indicators_qualitative', 'secondary_ods_actions', 'performance_indicators', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'actions', 'secondary_ods_material_topics', 'diagnosis_indicators', 'assessments', 'specific_objectives', 'material_topics', 'goals', 'sustainability_team_members', 'report_photos', 'report_norms', 'report_logos', 'report_bibliographies', 'report_agreements', 'stakeholders', 'ods', 'sustainability_reports', 'heritage_resource_typologies', 'heritage_resource_social_networks', 'alembic_version', 'users', 'dimensions', 'heritage_resources']
2025-05-25 17:18:01,097 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_quantitative`
2025-05-25 17:18:01,194 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:18:01,195 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_qualitative`
2025-05-25 17:18:01,334 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:18:01,334 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_actions`
2025-05-25 17:18:01,471 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_actions` limpiada con TRUNCATE
2025-05-25 17:18:01,471 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators`
2025-05-25 17:18:01,580 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators` limpiada con TRUNCATE
2025-05-25 17:18:01,581 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_quantitative`
2025-05-25 17:18:01,677 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:18:01,677 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_qualitative`
2025-05-25 17:18:01,756 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:18:01,756 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:18:01,868 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada con TRUNCATE
2025-05-25 17:18:01,869 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_material_topics`
2025-05-25 17:18:01,971 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_material_topics` limpiada con TRUNCATE
2025-05-25 17:18:01,972 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators`
2025-05-25 17:18:02,075 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators` limpiada con TRUNCATE
2025-05-25 17:18:02,075 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `assessments`
2025-05-25 17:18:02,195 - app.api.endpoints.backup - INFO - 九 Tabla `assessments` limpiada con TRUNCATE
2025-05-25 17:18:02,196 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:18:02,343 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada con TRUNCATE
2025-05-25 17:18:02,344 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:18:02,479 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada con TRUNCATE
2025-05-25 17:18:02,480 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:18:02,578 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada con TRUNCATE
2025-05-25 17:18:02,578 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_team_members`
2025-05-25 17:18:02,693 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_team_members` limpiada con TRUNCATE
2025-05-25 17:18:02,694 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_photos`
2025-05-25 17:18:02,799 - app.api.endpoints.backup - INFO - 九 Tabla `report_photos` limpiada con TRUNCATE
2025-05-25 17:18:02,799 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_norms`
2025-05-25 17:18:02,906 - app.api.endpoints.backup - INFO - 九 Tabla `report_norms` limpiada con TRUNCATE
2025-05-25 17:18:02,906 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_logos`
2025-05-25 17:18:03,017 - app.api.endpoints.backup - INFO - 九 Tabla `report_logos` limpiada con TRUNCATE
2025-05-25 17:18:03,018 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_bibliographies`
2025-05-25 17:18:03,118 - app.api.endpoints.backup - INFO - 九 Tabla `report_bibliographies` limpiada con TRUNCATE
2025-05-25 17:18:03,119 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_agreements`
2025-05-25 17:18:03,239 - app.api.endpoints.backup - INFO - 九 Tabla `report_agreements` limpiada con TRUNCATE
2025-05-25 17:18:03,239 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `stakeholders`
2025-05-25 17:18:03,378 - app.api.endpoints.backup - INFO - 九 Tabla `stakeholders` limpiada con TRUNCATE
2025-05-25 17:18:03,378 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:18:03,506 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada con TRUNCATE
2025-05-25 17:18:03,506 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:18:03,625 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada con TRUNCATE
2025-05-25 17:18:03,626 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_typologies`
2025-05-25 17:18:03,745 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_typologies` limpiada con TRUNCATE
2025-05-25 17:18:03,746 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_social_networks`
2025-05-25 17:18:03,887 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_social_networks` limpiada con TRUNCATE
2025-05-25 17:18:03,888 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `alembic_version`
2025-05-25 17:18:04,001 - app.api.endpoints.backup - INFO - 九 Tabla `alembic_version` limpiada con TRUNCATE
2025-05-25 17:18:04,002 - app.api.endpoints.backup - INFO - DELETE FROM `users` (tabla especial)
2025-05-25 17:18:04,003 - app.api.endpoints.backup - INFO - 九 Tabla `users` limpiada con DELETE
2025-05-25 17:18:04,003 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:18:04,127 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada con TRUNCATE
2025-05-25 17:18:04,128 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:18:04,254 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada con TRUNCATE
2025-05-25 17:18:04,254 - app.api.endpoints.backup - INFO - === PASO 2: Procesando archivo SQL ===
2025-05-25 17:18:04,256 - app.api.endpoints.backup - INFO - === PASO 3: Ejecutando 2 INSERT statements ===
2025-05-25 17:18:04,256 - app.api.endpoints.backup - INFO - Orden para INSERT (padres  hijos): ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:18:04,256 - app.api.endpoints.backup - INFO - [1/2] Ejecutando INSERT en tabla `alembic_version`
2025-05-25 17:18:04,256 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `alembic_version` (`version_num`) VALUES ('8e597e8d9c1b');
2025-05-25 17:18:04,257 - app.api.endpoints.backup - INFO - 九 INSERT 1 ejecutado correctamente en tabla `alembic_version`
2025-05-25 17:18:04,258 - app.api.endpoints.backup - INFO - [2/2] Ejecutando INSERT en tabla `users`
2025-05-25 17:18:04,258 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `users` (`id`, `email`, `password`, `admin`, `name`, `surname`, `phone_number`, `reset_token`, `reset_token_expiration`, `reset_token_state`) VALUES (1,'i12gafej@uco.es','$2b$12$hNxsfDKOVP...
2025-05-25 17:18:04,259 - app.api.endpoints.backup - INFO - 九 INSERT 2 ejecutado correctamente en tabla `users`
2025-05-25 17:18:04,276 - app.api.endpoints.backup - INFO - 九 Restauraci칩n de datos completada exitosamente
2025-05-25 17:18:04,277 - app.api.endpoints.backup - INFO - Backup restaurado exitosamente
2025-05-25 17:18:04,277 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 19:23:41,193 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-25 19:23:41,196 - app.api.endpoints.backup - INFO - Conectando a MySQL para analizar dependencias...
2025-05-25 19:23:41,211 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 19:23:41,215 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 19:23:41,216 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 19:23:41,217 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_quantitative
2025-05-25 19:23:41,218 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_qualitative
2025-05-25 19:23:41,218 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_actions
2025-05-25 19:23:41,219 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators
2025-05-25 19:23:41,219 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_qualitative
2025-05-25 19:23:41,220 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_quantitative
2025-05-25 19:23:41,221 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: actions
2025-05-25 19:23:41,228 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_material_topics
2025-05-25 19:23:41,229 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators
2025-05-25 19:23:41,230 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: assessments
2025-05-25 19:23:41,231 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: specific_objectives
2025-05-25 19:23:41,232 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: material_topics
2025-05-25 19:23:41,235 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: goals
2025-05-25 19:23:41,236 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_team_members
2025-05-25 19:23:41,237 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_photos
2025-05-25 19:23:41,238 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_norms
2025-05-25 19:23:41,239 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_logos
2025-05-25 19:23:41,241 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_bibliographies
2025-05-25 19:23:41,242 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_agreements
2025-05-25 19:23:41,245 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: stakeholders
2025-05-25 19:23:41,246 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: ods
2025-05-25 19:23:41,247 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_reports
2025-05-25 19:23:41,248 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_typologies
2025-05-25 19:23:41,249 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_social_networks
2025-05-25 19:23:41,250 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: alembic_version
2025-05-25 19:23:41,252 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: users
2025-05-25 19:23:41,254 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: dimensions
2025-05-25 19:23:41,256 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resources
2025-05-25 19:23:41,258 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resources
2025-05-25 19:23:41,315 - app.api.endpoints.backup - ERROR - Error al crear el backup: [WinError 2] El sistema no puede encontrar el archivo especificado
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 144, in create_backup
    backup_data = await asyncio.to_thread(_create_ordered_backup)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 135, in _create_ordered_backup
    backup_data = dump_data_only(host, port, user, password, database, ordered_tables)
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 562, in dump_data_only
    res = subprocess.run(cmd, capture_output=True, check=True)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 503, in run
    with Popen(*popenargs, **kwargs) as process:
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 971, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 1456, in _execute_child
    hp, ht, pid, tid = _winapi.CreateProcess(executable, args,
FileNotFoundError: [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-25 19:29:33,214 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-25 19:29:33,215 - app.api.endpoints.backup - INFO - Intentando conectar a MySQL directamente...
2025-05-25 19:29:33,220 - app.api.endpoints.backup - INFO - Conexi蚤 directa a MySQL exitosa
2025-05-25 19:29:33,222 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 19:29:33,224 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 19:29:33,225 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 19:29:33,230 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_quantitative
2025-05-25 19:29:33,234 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_qualitative
2025-05-25 19:29:33,235 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_actions
2025-05-25 19:29:33,236 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators
2025-05-25 19:29:33,237 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_qualitative
2025-05-25 19:29:33,239 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_quantitative
2025-05-25 19:29:33,242 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: actions
2025-05-25 19:29:33,243 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_material_topics
2025-05-25 19:29:33,245 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators
2025-05-25 19:29:33,247 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: assessments
2025-05-25 19:29:33,249 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: specific_objectives
2025-05-25 19:29:33,251 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: material_topics
2025-05-25 19:29:33,252 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: goals
2025-05-25 19:29:33,253 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_team_members
2025-05-25 19:29:33,255 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_photos
2025-05-25 19:29:33,256 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_norms
2025-05-25 19:29:33,260 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_logos
2025-05-25 19:29:33,262 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_bibliographies
2025-05-25 19:29:33,263 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_agreements
2025-05-25 19:29:33,263 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: stakeholders
2025-05-25 19:29:33,264 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: ods
2025-05-25 19:29:33,264 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_reports
2025-05-25 19:29:33,265 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_typologies
2025-05-25 19:29:33,266 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_social_networks
2025-05-25 19:29:33,269 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: alembic_version
2025-05-25 19:29:33,270 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: users
2025-05-25 19:29:33,271 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: dimensions
2025-05-25 19:29:33,272 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resources
2025-05-25 19:29:33,274 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resources
2025-05-25 19:29:33,311 - app.api.endpoints.backup - ERROR - Error al crear el backup: [WinError 2] El sistema no puede encontrar el archivo especificado
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 215, in create_backup
    backup_data = await asyncio.to_thread(_create_ordered_backup)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 205, in _create_ordered_backup
    backup_data = dump_data_only(host, port, user, password, database, ordered_tables)
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 633, in dump_data_only
    res = subprocess.run(cmd, capture_output=True, check=True)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 503, in run
    with Popen(*popenargs, **kwargs) as process:
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 971, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 1456, in _execute_child
    hp, ht, pid, tid = _winapi.CreateProcess(executable, args,
FileNotFoundError: [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-25 19:30:10,873 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-25 19:30:10,874 - app.api.endpoints.backup - INFO - Intentando conectar a MySQL directamente...
2025-05-25 19:30:10,881 - app.api.endpoints.backup - INFO - Conexi蚤 directa a MySQL exitosa
2025-05-25 19:30:10,894 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 19:30:10,899 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 19:30:10,901 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 19:30:10,902 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_quantitative
2025-05-25 19:30:10,903 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_qualitative
2025-05-25 19:30:10,904 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_actions
2025-05-25 19:30:10,905 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators
2025-05-25 19:30:10,906 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_qualitative
2025-05-25 19:30:10,906 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_quantitative
2025-05-25 19:30:10,907 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: actions
2025-05-25 19:30:10,907 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_material_topics
2025-05-25 19:30:10,908 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators
2025-05-25 19:30:10,909 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: assessments
2025-05-25 19:30:10,913 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: specific_objectives
2025-05-25 19:30:10,914 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: material_topics
2025-05-25 19:30:10,915 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: goals
2025-05-25 19:30:10,915 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_team_members
2025-05-25 19:30:10,916 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_photos
2025-05-25 19:30:10,916 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_norms
2025-05-25 19:30:10,917 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_logos
2025-05-25 19:30:10,918 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_bibliographies
2025-05-25 19:30:10,918 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_agreements
2025-05-25 19:30:10,919 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: stakeholders
2025-05-25 19:30:10,919 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: ods
2025-05-25 19:30:10,920 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_reports
2025-05-25 19:30:10,920 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_typologies
2025-05-25 19:30:10,921 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_social_networks
2025-05-25 19:30:10,921 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: alembic_version
2025-05-25 19:30:10,924 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: users
2025-05-25 19:30:10,924 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: dimensions
2025-05-25 19:30:10,925 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resources
2025-05-25 19:30:10,926 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resources
2025-05-25 19:30:10,966 - app.api.endpoints.backup - ERROR - Error al crear el backup: [WinError 2] El sistema no puede encontrar el archivo especificado
Traceback (most recent call last):
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 215, in create_backup
    backup_data = await asyncio.to_thread(_create_ordered_backup)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 205, in _create_ordered_backup
    backup_data = dump_data_only(host, port, user, password, database, ordered_tables)
  File "C:\Users\USUARIO\Downloads\cosas uni\tfg\App\backend\app\api\endpoints\backup.py", line 633, in dump_data_only
    res = subprocess.run(cmd, capture_output=True, check=True)
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 503, in run
    with Popen(*popenargs, **kwargs) as process:
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 971, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\lib\subprocess.py", line 1456, in _execute_child
    hp, ht, pid, tid = _winapi.CreateProcess(executable, args,
FileNotFoundError: [WinError 2] El sistema no puede encontrar el archivo especificado
2025-05-25 19:31:08,407 - app.api.endpoints.backup - INFO - Iniciando creaci蚤 de backup por usuario: i12gafej@uco.es
2025-05-25 19:31:08,413 - app.api.endpoints.backup - INFO - Intentando conectar a MySQL directamente...
2025-05-25 19:31:08,420 - app.api.endpoints.backup - INFO - Conexi蚤 directa a MySQL exitosa
2025-05-25 19:31:08,422 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 19:31:08,426 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 19:31:08,427 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 19:31:08,428 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_quantitative
2025-05-25 19:31:08,429 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators_qualitative
2025-05-25 19:31:08,430 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_actions
2025-05-25 19:31:08,430 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: performance_indicators
2025-05-25 19:31:08,431 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_qualitative
2025-05-25 19:31:08,431 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators_quantitative
2025-05-25 19:31:08,432 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: actions
2025-05-25 19:31:08,433 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: secondary_ods_material_topics
2025-05-25 19:31:08,436 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: diagnosis_indicators
2025-05-25 19:31:08,436 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: assessments
2025-05-25 19:31:08,437 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: specific_objectives
2025-05-25 19:31:08,437 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: material_topics
2025-05-25 19:31:08,438 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: goals
2025-05-25 19:31:08,439 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_team_members
2025-05-25 19:31:08,439 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_photos
2025-05-25 19:31:08,440 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_norms
2025-05-25 19:31:08,440 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_logos
2025-05-25 19:31:08,441 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_bibliographies
2025-05-25 19:31:08,441 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: report_agreements
2025-05-25 19:31:08,442 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: stakeholders
2025-05-25 19:31:08,442 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: ods
2025-05-25 19:31:08,443 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: sustainability_reports
2025-05-25 19:31:08,448 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_typologies
2025-05-25 19:31:08,448 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resource_social_networks
2025-05-25 19:31:08,449 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: alembic_version
2025-05-25 19:31:08,449 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: users
2025-05-25 19:31:08,450 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: dimensions
2025-05-25 19:31:08,451 - app.api.endpoints.backup - INFO - Agregando TRUNCATE para tabla: heritage_resources
2025-05-25 19:31:08,476 - app.api.endpoints.backup - WARNING - mysqldump no encontrado, intentando con Docker...
2025-05-25 19:31:08,659 - app.api.endpoints.backup - INFO - Usando Docker con contenedor: mysql-container
2025-05-25 19:31:08,661 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resources
2025-05-25 19:31:08,913 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: dimensions
2025-05-25 19:31:09,015 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: users
2025-05-25 19:31:09,095 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: alembic_version
2025-05-25 19:31:09,176 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resource_social_networks
2025-05-25 19:31:09,258 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: heritage_resource_typologies
2025-05-25 19:31:09,338 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: sustainability_reports
2025-05-25 19:31:09,428 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: ods
2025-05-25 19:31:09,516 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: stakeholders
2025-05-25 19:31:09,613 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_agreements
2025-05-25 19:31:09,700 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_bibliographies
2025-05-25 19:31:09,797 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_logos
2025-05-25 19:31:09,891 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_norms
2025-05-25 19:31:09,976 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: report_photos
2025-05-25 19:31:10,057 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: sustainability_team_members
2025-05-25 19:31:10,139 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: goals
2025-05-25 19:31:10,222 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: material_topics
2025-05-25 19:31:10,304 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: specific_objectives
2025-05-25 19:31:10,384 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: assessments
2025-05-25 19:31:10,466 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: diagnosis_indicators
2025-05-25 19:31:10,553 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: secondary_ods_material_topics
2025-05-25 19:31:10,636 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: actions
2025-05-25 19:31:10,733 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: diagnosis_indicators_quantitative
2025-05-25 19:31:10,818 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: diagnosis_indicators_qualitative
2025-05-25 19:31:10,907 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: performance_indicators
2025-05-25 19:31:11,002 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: secondary_ods_actions
2025-05-25 19:31:11,084 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: performance_indicators_qualitative
2025-05-25 19:31:11,168 - app.api.endpoints.backup - INFO - Creando dump de datos para tabla: performance_indicators_quantitative
2025-05-25 19:31:11,260 - app.api.endpoints.backup - INFO - Backup ordenado creado exitosamente
2025-05-25 17:32:44,607 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:32:44,607 - app.api.endpoints.backup - INFO - Archivo recibido: todo.sql
2025-05-25 17:32:44,608 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/todo.sql
2025-05-25 17:32:44,609 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:32:44,639 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:32:44,643 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:32:44,646 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:32:44,646 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:32:44,647 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:32:44,648 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:32:44,648 - app.api.endpoints.backup - INFO - Orden para TRUNCATE (hijos  padres): ['performance_indicators_quantitative', 'performance_indicators_qualitative', 'secondary_ods_actions', 'performance_indicators', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'actions', 'secondary_ods_material_topics', 'diagnosis_indicators', 'assessments', 'specific_objectives', 'material_topics', 'goals', 'sustainability_team_members', 'report_photos', 'report_norms', 'report_logos', 'report_bibliographies', 'report_agreements', 'stakeholders', 'ods', 'sustainability_reports', 'heritage_resource_typologies', 'heritage_resource_social_networks', 'alembic_version', 'users', 'dimensions', 'heritage_resources']
2025-05-25 17:32:44,648 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_quantitative`
2025-05-25 17:32:44,672 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:32:44,672 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_qualitative`
2025-05-25 17:32:44,693 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:32:44,693 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_actions`
2025-05-25 17:32:44,722 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_actions` limpiada con TRUNCATE
2025-05-25 17:32:44,723 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators`
2025-05-25 17:32:44,750 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators` limpiada con TRUNCATE
2025-05-25 17:32:44,751 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_quantitative`
2025-05-25 17:32:44,771 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:32:44,771 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_qualitative`
2025-05-25 17:32:44,794 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:32:44,795 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:32:44,843 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada con TRUNCATE
2025-05-25 17:32:44,843 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_material_topics`
2025-05-25 17:32:44,870 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_material_topics` limpiada con TRUNCATE
2025-05-25 17:32:44,871 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators`
2025-05-25 17:32:44,896 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators` limpiada con TRUNCATE
2025-05-25 17:32:44,897 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `assessments`
2025-05-25 17:32:44,923 - app.api.endpoints.backup - INFO - 九 Tabla `assessments` limpiada con TRUNCATE
2025-05-25 17:32:44,923 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:32:44,950 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada con TRUNCATE
2025-05-25 17:32:44,951 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:32:44,986 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada con TRUNCATE
2025-05-25 17:32:44,987 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:32:45,019 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada con TRUNCATE
2025-05-25 17:32:45,020 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_team_members`
2025-05-25 17:32:45,051 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_team_members` limpiada con TRUNCATE
2025-05-25 17:32:45,051 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_photos`
2025-05-25 17:32:45,075 - app.api.endpoints.backup - INFO - 九 Tabla `report_photos` limpiada con TRUNCATE
2025-05-25 17:32:45,076 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_norms`
2025-05-25 17:32:45,101 - app.api.endpoints.backup - INFO - 九 Tabla `report_norms` limpiada con TRUNCATE
2025-05-25 17:32:45,101 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_logos`
2025-05-25 17:32:45,124 - app.api.endpoints.backup - INFO - 九 Tabla `report_logos` limpiada con TRUNCATE
2025-05-25 17:32:45,125 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_bibliographies`
2025-05-25 17:32:45,149 - app.api.endpoints.backup - INFO - 九 Tabla `report_bibliographies` limpiada con TRUNCATE
2025-05-25 17:32:45,149 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_agreements`
2025-05-25 17:32:45,174 - app.api.endpoints.backup - INFO - 九 Tabla `report_agreements` limpiada con TRUNCATE
2025-05-25 17:32:45,174 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `stakeholders`
2025-05-25 17:32:45,199 - app.api.endpoints.backup - INFO - 九 Tabla `stakeholders` limpiada con TRUNCATE
2025-05-25 17:32:45,200 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:32:45,229 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada con TRUNCATE
2025-05-25 17:32:45,229 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:32:45,259 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada con TRUNCATE
2025-05-25 17:32:45,259 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_typologies`
2025-05-25 17:32:45,284 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_typologies` limpiada con TRUNCATE
2025-05-25 17:32:45,284 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_social_networks`
2025-05-25 17:32:45,312 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_social_networks` limpiada con TRUNCATE
2025-05-25 17:32:45,312 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `alembic_version`
2025-05-25 17:32:45,335 - app.api.endpoints.backup - INFO - 九 Tabla `alembic_version` limpiada con TRUNCATE
2025-05-25 17:32:45,335 - app.api.endpoints.backup - INFO - DELETE FROM `users` (tabla especial)
2025-05-25 17:32:45,336 - app.api.endpoints.backup - INFO - 九 Tabla `users` limpiada con DELETE
2025-05-25 17:32:45,336 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:32:45,365 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada con TRUNCATE
2025-05-25 17:32:45,365 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:32:45,392 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada con TRUNCATE
2025-05-25 17:32:45,393 - app.api.endpoints.backup - INFO - === PASO 2: Procesando archivo SQL ===
2025-05-25 17:32:45,451 - app.api.endpoints.backup - INFO - === PASO 3: Ejecutando 27 INSERT statements ===
2025-05-25 17:32:45,452 - app.api.endpoints.backup - INFO - Orden para INSERT (padres  hijos): ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:32:45,452 - app.api.endpoints.backup - INFO - [1/27] Ejecutando INSERT en tabla `heritage_resources`
2025-05-25 17:32:45,453 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resources` (`id`, `name`, `ownership`, `management_model`, `postal_address`, `web_address`, `phone_number`) VALUES (15,'Mezquita-Catedral de C칩rdoba','Cabildo Catedral de C칩rdoba...
2025-05-25 17:32:45,454 - app.api.endpoints.backup - INFO - 九 INSERT 1 ejecutado correctamente en tabla `heritage_resources`
2025-05-25 17:32:45,454 - app.api.endpoints.backup - INFO - [2/27] Ejecutando INSERT en tabla `dimensions`
2025-05-25 17:32:45,455 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `dimensions` (`id`, `name`, `description`) VALUES (3,'Personas','Poner fin a la pobreza y el hambre en todas sus formas y asegurar la dignidad e igualdad de todas las personas.'),(4,'Plane...
2025-05-25 17:32:45,456 - app.api.endpoints.backup - INFO - 九 INSERT 2 ejecutado correctamente en tabla `dimensions`
2025-05-25 17:32:45,456 - app.api.endpoints.backup - INFO - [3/27] Ejecutando INSERT en tabla `users`
2025-05-25 17:32:45,456 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `users` (`id`, `email`, `password`, `admin`, `name`, `surname`, `phone_number`, `reset_token`, `reset_token_expiration`, `reset_token_state`) VALUES (1,'i12gafej@uco.es','$2b$12$7Jpca3J/l....
2025-05-25 17:32:45,458 - app.api.endpoints.backup - INFO - 九 INSERT 3 ejecutado correctamente en tabla `users`
2025-05-25 17:32:45,458 - app.api.endpoints.backup - INFO - [4/27] Ejecutando INSERT en tabla `alembic_version`
2025-05-25 17:32:45,458 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `alembic_version` (`version_num`) VALUES ('8e597e8d9c1b');
2025-05-25 17:32:45,459 - app.api.endpoints.backup - INFO - 九 INSERT 4 ejecutado correctamente en tabla `alembic_version`
2025-05-25 17:32:45,460 - app.api.endpoints.backup - INFO - [5/27] Ejecutando INSERT en tabla `heritage_resource_social_networks`
2025-05-25 17:32:45,460 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resource_social_networks` (`id`, `resource_id`, `social_network`, `url`) VALUES (20,15,'Facebook','https://www.facebook.com/CabildoCatedraldeCordoba/'),(21,15,'Instagram','https:...
2025-05-25 17:32:45,462 - app.api.endpoints.backup - INFO - 九 INSERT 5 ejecutado correctamente en tabla `heritage_resource_social_networks`
2025-05-25 17:32:45,462 - app.api.endpoints.backup - INFO - [6/27] Ejecutando INSERT en tabla `heritage_resource_typologies`
2025-05-25 17:32:45,462 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resource_typologies` (`id`, `resource_id`, `typology`) VALUES (43,18,'Patrimonio Cultural'),(44,22,'Patrimonio verde urbano'),(46,23,'Patrimonio casa-patio'),(49,15,'Patrimonio c...
2025-05-25 17:32:45,464 - app.api.endpoints.backup - INFO - 九 INSERT 6 ejecutado correctamente en tabla `heritage_resource_typologies`
2025-05-25 17:32:45,464 - app.api.endpoints.backup - INFO - [7/27] Ejecutando INSERT en tabla `sustainability_reports`
2025-05-25 17:32:45,464 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `sustainability_reports` (`id`, `heritage_resource_id`, `year`, `state`, `observation`, `cover_photo`, `commitment_letter`, `mission`, `vision`, `values`, `org_chart_text`, `org_chart_figu...
2025-05-25 17:32:45,485 - app.api.endpoints.backup - INFO - 九 INSERT 7 ejecutado correctamente en tabla `sustainability_reports`
2025-05-25 17:32:45,485 - app.api.endpoints.backup - INFO - [8/27] Ejecutando INSERT en tabla `ods`
2025-05-25 17:32:45,485 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `ods` (`id`, `name`, `description`, `dimension_id`) VALUES (1,'Fin de la Pobreza','Poner fin a la pobreza en todas sus formas en todo el mundo.',3),(2,'Hambre Cero','Poner fin al hambre, l...
2025-05-25 17:32:45,487 - app.api.endpoints.backup - INFO - 九 INSERT 8 ejecutado correctamente en tabla `ods`
2025-05-25 17:32:45,487 - app.api.endpoints.backup - INFO - [9/27] Ejecutando INSERT en tabla `stakeholders`
2025-05-25 17:32:45,487 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `stakeholders` (`id`, `name`, `description`, `type`, `report_id`) VALUES (84,'Persona empleada ','Empleados del recurso patrimonial','internal',36),(85,'Empresa proveedora ','Empresa proov...
2025-05-25 17:32:45,488 - app.api.endpoints.backup - INFO - 九 INSERT 9 ejecutado correctamente en tabla `stakeholders`
2025-05-25 17:32:45,489 - app.api.endpoints.backup - INFO - [10/27] Ejecutando INSERT en tabla `report_bibliographies`
2025-05-25 17:32:45,489 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_bibliographies` (`id`, `reference`, `report_id`) VALUES (7,'CUCO Club de C칩rdoba para la UNESCO & Universidad de C칩rdoba. (2024). Gu칤a para la acci칩n del recurso patrimonial en los...
2025-05-25 17:32:45,490 - app.api.endpoints.backup - INFO - 九 INSERT 10 ejecutado correctamente en tabla `report_bibliographies`
2025-05-25 17:32:45,490 - app.api.endpoints.backup - INFO - [11/27] Ejecutando INSERT en tabla `report_logos`
2025-05-25 17:32:45,490 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_logos` (`id`, `logo`, `report_id`) VALUES (18,'C:\\Users\\USUARIO\\Downloads\\cosas uni\\tfg\\App\\backend\\static\\uploads\\logos/report_42_logo_8c82935a-a3f5-4c60-b493-c2096ee918...
2025-05-25 17:32:45,491 - app.api.endpoints.backup - INFO - 九 INSERT 11 ejecutado correctamente en tabla `report_logos`
2025-05-25 17:32:45,491 - app.api.endpoints.backup - INFO - [12/27] Ejecutando INSERT en tabla `report_norms`
2025-05-25 17:32:45,491 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_norms` (`id`, `norm`, `report_id`) VALUES (372,'Convenci칩n para la protecci칩n de los bienes culturales en caso de conflicto armado, de 14 de mayo de 1954.\n\nhttps://www.unesco.org...
2025-05-25 17:32:45,499 - app.api.endpoints.backup - INFO - 九 INSERT 12 ejecutado correctamente en tabla `report_norms`
2025-05-25 17:32:45,500 - app.api.endpoints.backup - INFO - [13/27] Ejecutando INSERT en tabla `report_photos`
2025-05-25 17:32:45,500 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_photos` (`id`, `photo`, `report_id`, `description`) VALUES (15,'/static/uploads/gallery/report_42_photo_9818dfc8-1ed0-4770-b136-ccdc6e88184f.jpg',42,'Capilla real de la Mezquita-Ca...
2025-05-25 17:32:45,503 - app.api.endpoints.backup - INFO - 九 INSERT 13 ejecutado correctamente en tabla `report_photos`
2025-05-25 17:32:45,503 - app.api.endpoints.backup - INFO - [14/27] Ejecutando INSERT en tabla `sustainability_team_members`
2025-05-25 17:32:45,503 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `sustainability_team_members` (`id`, `type`, `organization`, `report_id`, `user_id`) VALUES (74,'consultant','d',36,3),(75,'external_advisor','d',36,6),(76,'consultant','d',38,3),(77,'exte...
2025-05-25 17:32:45,504 - app.api.endpoints.backup - INFO - 九 INSERT 14 ejecutado correctamente en tabla `sustainability_team_members`
2025-05-25 17:32:45,505 - app.api.endpoints.backup - INFO - [15/27] Ejecutando INSERT en tabla `goals`
2025-05-25 17:32:45,505 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `goals` (`ods_id`, `goal_number`, `description`) VALUES (1,'1','Para 2030, erradicar la pobreza extrema para todas las personas en el mundo, actualmente medida por un ingreso por persona i...
2025-05-25 17:32:45,513 - app.api.endpoints.backup - INFO - 九 INSERT 15 ejecutado correctamente en tabla `goals`
2025-05-25 17:32:45,514 - app.api.endpoints.backup - INFO - [16/27] Ejecutando INSERT en tabla `material_topics`
2025-05-25 17:32:45,514 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `material_topics` (`id`, `name`, `description`, `priority`, `main_objective`, `goal_ods_id`, `goal_number`, `report_id`) VALUES (202,'Difusi칩n y sensibilizaci칩n','Comprende las diferentes ...
2025-05-25 17:32:45,521 - app.api.endpoints.backup - INFO - 九 INSERT 16 ejecutado correctamente en tabla `material_topics`
2025-05-25 17:32:45,522 - app.api.endpoints.backup - INFO - [17/27] Ejecutando INSERT en tabla `specific_objectives`
2025-05-25 17:32:45,522 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `specific_objectives` (`id`, `description`, `responsible`, `material_topic_id`) VALUES (182,'Objetivo Asunto Difusi칩n y sensibilizaci칩n',NULL,202),(183,'Objetivo Asunto Formaci칩n',NULL,203...
2025-05-25 17:32:45,524 - app.api.endpoints.backup - INFO - 九 INSERT 17 ejecutado correctamente en tabla `specific_objectives`
2025-05-25 17:32:45,524 - app.api.endpoints.backup - INFO - [18/27] Ejecutando INSERT en tabla `assessments`
2025-05-25 17:32:45,524 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `assessments` (`id`, `score`, `material_topic_id`, `stakeholder_id`) VALUES (369,4,292,129),(370,4,293,129),(371,4,294,129),(372,4,295,129),(373,4,296,129),(374,4,297,129),(375,4,298,129),...
2025-05-25 17:32:45,525 - app.api.endpoints.backup - INFO - 九 INSERT 18 ejecutado correctamente en tabla `assessments`
2025-05-25 17:32:45,526 - app.api.endpoints.backup - INFO - [19/27] Ejecutando INSERT en tabla `diagnosis_indicators`
2025-05-25 17:32:45,526 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `diagnosis_indicators` (`id`, `name`, `type`, `material_topic_id`) VALUES (755,'쯉u recurso tiene o participa en alg칰n plan o estrategia de divulgaci칩n y educaci칩n en sostenibilidad basada...
2025-05-25 17:32:45,539 - app.api.endpoints.backup - INFO - 九 INSERT 19 ejecutado correctamente en tabla `diagnosis_indicators`
2025-05-25 17:32:45,540 - app.api.endpoints.backup - INFO - [20/27] Ejecutando INSERT en tabla `secondary_ods_material_topics`
2025-05-25 17:32:45,540 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `secondary_ods_material_topics` (`ods_id`, `material_topic_id`) VALUES (12,202),(13,202),(1,203),(5,203),(8,203),(12,203),(13,203),(16,203),(6,204),(7,204),(9,204),(11,204),(12,204),(13,20...
2025-05-25 17:32:45,543 - app.api.endpoints.backup - INFO - 九 INSERT 20 ejecutado correctamente en tabla `secondary_ods_material_topics`
2025-05-25 17:32:45,544 - app.api.endpoints.backup - INFO - [21/27] Ejecutando INSERT en tabla `actions`
2025-05-25 17:32:45,544 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `actions` (`id`, `description`, `difficulty`, `ods_id`, `specific_objective_id`, `execution_time`) VALUES (173,'Acci칩n Asunto Difusi칩n y sensibilizaci칩n',NULL,NULL,182,NULL),(174,'Acci칩n A...
2025-05-25 17:32:45,551 - app.api.endpoints.backup - INFO - 九 INSERT 21 ejecutado correctamente en tabla `actions`
2025-05-25 17:32:45,551 - app.api.endpoints.backup - INFO - [22/27] Ejecutando INSERT en tabla `diagnosis_indicators_quantitative`
2025-05-25 17:32:45,551 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `diagnosis_indicators_quantitative` (`diagnosis_indicator_id`, `numeric_response`, `unit`) VALUES (759,0.00,'Unidad'),(760,0.00,'Unidad'),(761,0.00,'Unidad'),(762,0.00,'Unidad'),(763,0.00,...
2025-05-25 17:32:45,553 - app.api.endpoints.backup - ERROR - 仇 Error en INSERT 22: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
2025-05-25 17:32:45,553 - app.api.endpoints.backup - ERROR - Statement problem치tico: INSERT INTO `diagnosis_indicators_quantitative` (`diagnosis_indicator_id`, `numeric_response`, `unit`) VALUES (759,0.00,'Unidad'),(760,0.00,'Unidad'),(761,0.00,'Unidad'),(762,0.00,'Unidad'),(763,0.00,'Unidad'),(764,0.00,'Unidad'),(765,0.00,'Unidad'),(769,0.00,'Unidad'),(770,0.00,'Unidad'),(771,0.00,'Unidad'),(774,0.00,'Unidad'),(775,0.00,'Unidad'),(776,0.00,'Unidad'),(777,0.00,'Unidad'),(778,0.00,'Unidad'),(779,0.00,'Unidad'),(782,0.00,'Unidad'),(785,0.00,'Unidad'),(786,0.00,'Unidad'),(787,0.00,'Unidad'),(789,0.00,'Unidad'),(792,0.00,'Unidad'),(793,0.00,'Unidad'),(794,0.00,'Unidad'),(797,0.00,'Unidad'),(799,0.00,'Unidad'),(802,0.00,'Unidad'),(803,0.00,'Unidad'),(804,0.00,'Unidad'),(809,0.00,'Unidad'),(810,0.00,'Unidad'),(811,0.00,'Unidad'),(815,0.00,'Unidad'),(816,0.00,'Unidad'),(821,0.00,'Unidad'),(822,0.00,'Unidad'),(823,0.00,'Unidad'),(825,0.00,'Unidad'),(826,0.00,'Unidad'),(827,0.00,'Unidad'),(828,0.00,'Unidad'),(829,0.00,'Unidad'),(831,0.00,'Unidad'),(832,0.00,'Unidad'),(835,0.00,'Unidad'),(836,0.00,'Unidad'),(837,0.00,'Unidad'),(840,0.00,'Unidad'),(841,0.00,'Unidad'),(842,0.00,'Unidad'),(846,0.00,'Unidad'),(847,0.00,'Unidad'),(855,0.00,'Unidad'),(856,0.00,'Unidad'),(857,0.00,'Unidad'),(860,0.00,'Unidad'),(861,0.00,'Unidad'),(866,0.00,'Unidad'),(867,0.00,'Unidad'),(868,0.00,'Unidad'),(869,0.00,'Unidad'),(870,0.00,'Unidad'),(872,0.00,'Unidad'),(877,0.00,'Unidad'),(878,0.00,'Unidad'),(889,0.00,'Unidad'),(892,0.00,'Unidad'),(893,0.00,'Unidad'),(896,0.00,'Unidad'),(899,0.00,'Unidad'),(900,0.00,'Unidad'),(904,0.00,'Unidad'),(906,0.00,'Unidad'),(909,0.00,'Unidad'),(910,0.00,'Unidad'),(911,0.00,'Unidad'),(916,0.00,'Unidad'),(922,0.00,'Unidad'),(928,0.00,'Unidad'),(929,0.00,'Unidad'),(930,0.00,'Unidad'),(936,0.00,'Unidad'),(938,0.00,'Unidad'),(939,0.00,'Unidad'),(942,0.00,'Unidad'),(943,0.00,'Unidad'),(944,0.00,'Unidad'),(953,0.00,'Unidad'),(954,0.00,'Unidad'),(962,0.00,'Unidad'),(963,0.00,'Unidad'),(964,0.00,'Unidad'),(967,0.00,'Unidad'),(968,0.00,'Unidad'),(973,0.00,'Unidad'),(974,0.00,'Unidad'),(975,0.00,'Unidad'),(976,0.00,'Unidad'),(977,0.00,'Unidad'),(978,0.00,'Unidad'),(979,0.00,'Unidad'),(983,0.00,'Unidad'),(984,0.00,'Unidad'),(985,0.00,'Unidad'),(988,0.00,'Unidad'),(989,0.00,'Unidad'),(990,0.00,'Unidad'),(991,0.00,'Unidad'),(992,0.00,'Unidad'),(993,0.00,'Unidad'),(996,0.00,'Unidad'),(999,0.00,'Unidad'),(1000,0.00,'Unidad'),(1001,0.00,'Unidad'),(1006,0.00,'Unidad'),(1007,0.00,'Unidad'),(1008,0.00,'Unidad'),(1013,0.00,'Unidad'),(1016,0.00,'Unidad'),(1017,0.00,'Unidad'),(1018,0.00,'Unidad'),(1023,0.00,'Unidad'),(1024,0.00,'Unidad'),(1025,0.00,'Unidad'),(1029,0.00,'Unidad'),(1030,0.00,'Unidad'),(1035,0.00,'Unidad'),(1036,0.00,'Unidad'),(1039,0.00,'Unidad'),(1040,0.00,'Unidad'),(1041,0.00,'Unidad'),(1042,0.00,'Unidad'),(1043,0.00,'Unidad'),(1045,0.00,'Unidad'),(1046,0.00,'Unidad'),(1049,0.00,'Unidad'),(1050,0.00,'Unidad'),(1051,0.00,'Unidad'),(1054,0.00,'Unidad'),(1055,0.00,'Unidad'),(1056,0.00,'Unidad'),(1060,0.00,'Unidad'),(1061,0.00,'Unidad'),(1069,0.00,'Unidad'),(1070,0.00,'Unidad'),(1071,0.00,'Unidad'),(1074,0.00,'Unidad'),(1075,0.00,'Unidad'),(1077,0.00,'%'),(1078,0.00,''),(1080,0.00,''),(1081,0.00,''),(1082,0.00,''),(1083,0.00,''),(1084,0.00,''),(1085,0.00,''),(1086,0.00,''),(1087,0.00,''),(1088,0.00,''),(1090,0.00,''),(1091,0.00,''),(1092,0.00,''),(1093,0.00,''),(1094,0.00,''),(1095,0.00,''),(1096,0.00,''),(1097,0.00,''),(1100,0.00,''),(1101,0.00,''),(1102,0.00,''),(1104,0.00,''),(1105,0.00,''),(1108,0.00,''),(1236,0.00,'Unidad'),(1237,0.00,'Unidad'),(1238,0.00,'Unidad'),(1239,0.00,'Unidad'),(1240,0.00,'Unidad'),(1241,0.00,'Unidad'),(1242,0.00,'Unidad'),(1246,0.00,'Unidad'),(1247,0.00,'Unidad'),(1248,0.00,'Unidad'),(1251,0.00,'Unidad'),(1252,0.00,'Unidad'),(1253,0.00,'Unidad'),(1254,0.00,'Unidad'),(1255,0.00,'Unidad'),(1256,0.00,'Unidad'),(1259,0.00,'Unidad'),(1262,0.00,'Unidad'),(1263,0.00,'Unidad'),(1264,0.00,'Unidad'),(1266,0.00,'Unidad'),(1269,0.00,'Unidad'),(1270,0.00,'Unidad'),(1271,0.00,'Unidad'),(1274,0.00,'Unidad'),(1276,0.00,'Unidad'),(1279,0.00,'Unidad'),(1280,0.00,'Unidad'),(1281,0.00,'Unidad'),(1286,0.00,'Unidad'),(1287,0.00,'Unidad'),(1288,0.00,'Unidad'),(1292,0.00,'Unidad'),(1293,0.00,'Unidad'),(1298,0.00,'Unidad'),(1299,0.00,'Unidad'),(1300,0.00,'Unidad'),(1302,0.00,'Unidad'),(1303,0.00,'Unidad'),(1304,0.00,'Unidad'),(1305,0.00,'Unidad'),(1306,0.00,'Unidad'),(1308,0.00,'Unidad'),(1309,0.00,'Unidad'),(1312,0.00,'Unidad'),(1313,0.00,'Unidad'),(1314,0.00,'Unidad'),(1317,0.00,'Unidad'),(1318,0.00,'Unidad'),(1319,0.00,'Unidad'),(1323,0.00,'Unidad'),(1324,0.00,'Unidad'),(1332,0.00,'Unidad'),(1333,0.00,'Unidad'),(1334,0.00,'Unidad'),(1337,0.00,'Unidad'),(1338,0.00,'Unidad');
2025-05-25 17:32:45,553 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 428, in restore_backup
    await asyncio.to_thread(_restore)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 401, in _restore
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
2025-05-25 17:32:45,560 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 17:35:54,507 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:35:54,507 - app.api.endpoints.backup - INFO - Archivo recibido: todo.sql
2025-05-25 17:35:54,508 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/todo.sql
2025-05-25 17:35:54,510 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:35:54,549 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:35:54,554 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:35:54,557 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:35:54,558 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:35:54,558 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:35:54,559 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:35:54,560 - app.api.endpoints.backup - INFO - Orden para TRUNCATE (hijos  padres): ['performance_indicators_quantitative', 'performance_indicators_qualitative', 'secondary_ods_actions', 'performance_indicators', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'actions', 'secondary_ods_material_topics', 'diagnosis_indicators', 'assessments', 'specific_objectives', 'material_topics', 'goals', 'sustainability_team_members', 'report_photos', 'report_norms', 'report_logos', 'report_bibliographies', 'report_agreements', 'stakeholders', 'ods', 'sustainability_reports', 'heritage_resource_typologies', 'heritage_resource_social_networks', 'alembic_version', 'users', 'dimensions', 'heritage_resources']
2025-05-25 17:35:54,560 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_quantitative`
2025-05-25 17:35:54,596 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:35:54,596 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_qualitative`
2025-05-25 17:35:54,623 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:35:54,624 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_actions`
2025-05-25 17:35:54,657 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_actions` limpiada con TRUNCATE
2025-05-25 17:35:54,657 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators`
2025-05-25 17:35:54,687 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators` limpiada con TRUNCATE
2025-05-25 17:35:54,687 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_quantitative`
2025-05-25 17:35:54,715 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:35:54,715 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_qualitative`
2025-05-25 17:35:54,745 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:35:54,745 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:35:54,786 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada con TRUNCATE
2025-05-25 17:35:54,787 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_material_topics`
2025-05-25 17:35:54,815 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_material_topics` limpiada con TRUNCATE
2025-05-25 17:35:54,816 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators`
2025-05-25 17:35:54,849 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators` limpiada con TRUNCATE
2025-05-25 17:35:54,849 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `assessments`
2025-05-25 17:35:54,885 - app.api.endpoints.backup - INFO - 九 Tabla `assessments` limpiada con TRUNCATE
2025-05-25 17:35:54,885 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:35:54,917 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada con TRUNCATE
2025-05-25 17:35:54,917 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:35:54,963 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada con TRUNCATE
2025-05-25 17:35:54,963 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:35:54,988 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada con TRUNCATE
2025-05-25 17:35:54,988 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_team_members`
2025-05-25 17:35:55,027 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_team_members` limpiada con TRUNCATE
2025-05-25 17:35:55,027 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_photos`
2025-05-25 17:35:55,089 - app.api.endpoints.backup - INFO - 九 Tabla `report_photos` limpiada con TRUNCATE
2025-05-25 17:35:55,089 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_norms`
2025-05-25 17:35:55,123 - app.api.endpoints.backup - INFO - 九 Tabla `report_norms` limpiada con TRUNCATE
2025-05-25 17:35:55,124 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_logos`
2025-05-25 17:35:55,158 - app.api.endpoints.backup - INFO - 九 Tabla `report_logos` limpiada con TRUNCATE
2025-05-25 17:35:55,159 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_bibliographies`
2025-05-25 17:35:55,186 - app.api.endpoints.backup - INFO - 九 Tabla `report_bibliographies` limpiada con TRUNCATE
2025-05-25 17:35:55,186 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_agreements`
2025-05-25 17:35:55,215 - app.api.endpoints.backup - INFO - 九 Tabla `report_agreements` limpiada con TRUNCATE
2025-05-25 17:35:55,216 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `stakeholders`
2025-05-25 17:35:55,245 - app.api.endpoints.backup - INFO - 九 Tabla `stakeholders` limpiada con TRUNCATE
2025-05-25 17:35:55,246 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:35:55,278 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada con TRUNCATE
2025-05-25 17:35:55,278 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:35:55,310 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada con TRUNCATE
2025-05-25 17:35:55,311 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_typologies`
2025-05-25 17:35:55,357 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_typologies` limpiada con TRUNCATE
2025-05-25 17:35:55,357 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_social_networks`
2025-05-25 17:35:55,390 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_social_networks` limpiada con TRUNCATE
2025-05-25 17:35:55,390 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `alembic_version`
2025-05-25 17:35:55,413 - app.api.endpoints.backup - INFO - 九 Tabla `alembic_version` limpiada con TRUNCATE
2025-05-25 17:35:55,414 - app.api.endpoints.backup - INFO - DELETE FROM `users` (tabla especial)
2025-05-25 17:35:55,415 - app.api.endpoints.backup - INFO - 九 Tabla `users` limpiada con DELETE
2025-05-25 17:35:55,416 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:35:55,445 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada con TRUNCATE
2025-05-25 17:35:55,446 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:35:55,478 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada con TRUNCATE
2025-05-25 17:35:55,478 - app.api.endpoints.backup - INFO - === PASO 2: Procesando archivo SQL ===
2025-05-25 17:35:55,540 - app.api.endpoints.backup - INFO - === PASO 3: Ejecutando 27 INSERT statements ===
2025-05-25 17:35:55,540 - app.api.endpoints.backup - INFO - Orden para INSERT (padres  hijos): ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:35:55,541 - app.api.endpoints.backup - INFO - [1/27] Ejecutando INSERT en tabla `heritage_resources`
2025-05-25 17:35:55,541 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resources` (`id`, `name`, `ownership`, `management_model`, `postal_address`, `web_address`, `phone_number`) VALUES (15,'Mezquita-Catedral de C칩rdoba','Cabildo Catedral de C칩rdoba...
2025-05-25 17:35:55,543 - app.api.endpoints.backup - INFO - 九 INSERT 1 ejecutado correctamente en tabla `heritage_resources`
2025-05-25 17:35:55,543 - app.api.endpoints.backup - INFO - [2/27] Ejecutando INSERT en tabla `dimensions`
2025-05-25 17:35:55,543 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `dimensions` (`id`, `name`, `description`) VALUES (3,'Personas','Poner fin a la pobreza y el hambre en todas sus formas y asegurar la dignidad e igualdad de todas las personas.'),(4,'Plane...
2025-05-25 17:35:55,545 - app.api.endpoints.backup - INFO - 九 INSERT 2 ejecutado correctamente en tabla `dimensions`
2025-05-25 17:35:55,545 - app.api.endpoints.backup - INFO - [3/27] Ejecutando INSERT en tabla `users`
2025-05-25 17:35:55,545 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `users` (`id`, `email`, `password`, `admin`, `name`, `surname`, `phone_number`, `reset_token`, `reset_token_expiration`, `reset_token_state`) VALUES (1,'i12gafej@uco.es','$2b$12$7Jpca3J/l....
2025-05-25 17:35:55,547 - app.api.endpoints.backup - INFO - 九 INSERT 3 ejecutado correctamente en tabla `users`
2025-05-25 17:35:55,547 - app.api.endpoints.backup - INFO - [4/27] Ejecutando INSERT en tabla `alembic_version`
2025-05-25 17:35:55,547 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `alembic_version` (`version_num`) VALUES ('8e597e8d9c1b');
2025-05-25 17:35:55,549 - app.api.endpoints.backup - INFO - 九 INSERT 4 ejecutado correctamente en tabla `alembic_version`
2025-05-25 17:35:55,550 - app.api.endpoints.backup - INFO - [5/27] Ejecutando INSERT en tabla `heritage_resource_social_networks`
2025-05-25 17:35:55,550 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resource_social_networks` (`id`, `resource_id`, `social_network`, `url`) VALUES (20,15,'Facebook','https://www.facebook.com/CabildoCatedraldeCordoba/'),(21,15,'Instagram','https:...
2025-05-25 17:35:55,551 - app.api.endpoints.backup - INFO - 九 INSERT 5 ejecutado correctamente en tabla `heritage_resource_social_networks`
2025-05-25 17:35:55,552 - app.api.endpoints.backup - INFO - [6/27] Ejecutando INSERT en tabla `heritage_resource_typologies`
2025-05-25 17:35:55,552 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resource_typologies` (`id`, `resource_id`, `typology`) VALUES (43,18,'Patrimonio Cultural'),(44,22,'Patrimonio verde urbano'),(46,23,'Patrimonio casa-patio'),(49,15,'Patrimonio c...
2025-05-25 17:35:55,553 - app.api.endpoints.backup - INFO - 九 INSERT 6 ejecutado correctamente en tabla `heritage_resource_typologies`
2025-05-25 17:35:55,554 - app.api.endpoints.backup - INFO - [7/27] Ejecutando INSERT en tabla `sustainability_reports`
2025-05-25 17:35:55,554 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `sustainability_reports` (`id`, `heritage_resource_id`, `year`, `state`, `observation`, `cover_photo`, `commitment_letter`, `mission`, `vision`, `values`, `org_chart_text`, `org_chart_figu...
2025-05-25 17:35:55,573 - app.api.endpoints.backup - INFO - 九 INSERT 7 ejecutado correctamente en tabla `sustainability_reports`
2025-05-25 17:35:55,574 - app.api.endpoints.backup - INFO - [8/27] Ejecutando INSERT en tabla `ods`
2025-05-25 17:35:55,574 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `ods` (`id`, `name`, `description`, `dimension_id`) VALUES (1,'Fin de la Pobreza','Poner fin a la pobreza en todas sus formas en todo el mundo.',3),(2,'Hambre Cero','Poner fin al hambre, l...
2025-05-25 17:35:55,576 - app.api.endpoints.backup - INFO - 九 INSERT 8 ejecutado correctamente en tabla `ods`
2025-05-25 17:35:55,576 - app.api.endpoints.backup - INFO - [9/27] Ejecutando INSERT en tabla `stakeholders`
2025-05-25 17:35:55,576 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `stakeholders` (`id`, `name`, `description`, `type`, `report_id`) VALUES (84,'Persona empleada ','Empleados del recurso patrimonial','internal',36),(85,'Empresa proveedora ','Empresa proov...
2025-05-25 17:35:55,578 - app.api.endpoints.backup - INFO - 九 INSERT 9 ejecutado correctamente en tabla `stakeholders`
2025-05-25 17:35:55,578 - app.api.endpoints.backup - INFO - [10/27] Ejecutando INSERT en tabla `report_bibliographies`
2025-05-25 17:35:55,579 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_bibliographies` (`id`, `reference`, `report_id`) VALUES (7,'CUCO Club de C칩rdoba para la UNESCO & Universidad de C칩rdoba. (2024). Gu칤a para la acci칩n del recurso patrimonial en los...
2025-05-25 17:35:55,580 - app.api.endpoints.backup - INFO - 九 INSERT 10 ejecutado correctamente en tabla `report_bibliographies`
2025-05-25 17:35:55,581 - app.api.endpoints.backup - INFO - [11/27] Ejecutando INSERT en tabla `report_logos`
2025-05-25 17:35:55,582 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_logos` (`id`, `logo`, `report_id`) VALUES (18,'C:\\Users\\USUARIO\\Downloads\\cosas uni\\tfg\\App\\backend\\static\\uploads\\logos/report_42_logo_8c82935a-a3f5-4c60-b493-c2096ee918...
2025-05-25 17:35:55,584 - app.api.endpoints.backup - INFO - 九 INSERT 11 ejecutado correctamente en tabla `report_logos`
2025-05-25 17:35:55,584 - app.api.endpoints.backup - INFO - [12/27] Ejecutando INSERT en tabla `report_norms`
2025-05-25 17:35:55,585 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_norms` (`id`, `norm`, `report_id`) VALUES (372,'Convenci칩n para la protecci칩n de los bienes culturales en caso de conflicto armado, de 14 de mayo de 1954.\n\nhttps://www.unesco.org...
2025-05-25 17:35:55,595 - app.api.endpoints.backup - INFO - 九 INSERT 12 ejecutado correctamente en tabla `report_norms`
2025-05-25 17:35:55,595 - app.api.endpoints.backup - INFO - [13/27] Ejecutando INSERT en tabla `report_photos`
2025-05-25 17:35:55,595 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_photos` (`id`, `photo`, `report_id`, `description`) VALUES (15,'/static/uploads/gallery/report_42_photo_9818dfc8-1ed0-4770-b136-ccdc6e88184f.jpg',42,'Capilla real de la Mezquita-Ca...
2025-05-25 17:35:55,597 - app.api.endpoints.backup - INFO - 九 INSERT 13 ejecutado correctamente en tabla `report_photos`
2025-05-25 17:35:55,598 - app.api.endpoints.backup - INFO - [14/27] Ejecutando INSERT en tabla `sustainability_team_members`
2025-05-25 17:35:55,598 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `sustainability_team_members` (`id`, `type`, `organization`, `report_id`, `user_id`) VALUES (74,'consultant','d',36,3),(75,'external_advisor','d',36,6),(76,'consultant','d',38,3),(77,'exte...
2025-05-25 17:35:55,600 - app.api.endpoints.backup - INFO - 九 INSERT 14 ejecutado correctamente en tabla `sustainability_team_members`
2025-05-25 17:35:55,601 - app.api.endpoints.backup - INFO - [15/27] Ejecutando INSERT en tabla `goals`
2025-05-25 17:35:55,602 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `goals` (`ods_id`, `goal_number`, `description`) VALUES (1,'1','Para 2030, erradicar la pobreza extrema para todas las personas en el mundo, actualmente medida por un ingreso por persona i...
2025-05-25 17:35:55,612 - app.api.endpoints.backup - INFO - 九 INSERT 15 ejecutado correctamente en tabla `goals`
2025-05-25 17:35:55,613 - app.api.endpoints.backup - INFO - [16/27] Ejecutando INSERT en tabla `material_topics`
2025-05-25 17:35:55,613 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `material_topics` (`id`, `name`, `description`, `priority`, `main_objective`, `goal_ods_id`, `goal_number`, `report_id`) VALUES (202,'Difusi칩n y sensibilizaci칩n','Comprende las diferentes ...
2025-05-25 17:35:55,623 - app.api.endpoints.backup - INFO - 九 INSERT 16 ejecutado correctamente en tabla `material_topics`
2025-05-25 17:35:55,623 - app.api.endpoints.backup - INFO - [17/27] Ejecutando INSERT en tabla `specific_objectives`
2025-05-25 17:35:55,624 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `specific_objectives` (`id`, `description`, `responsible`, `material_topic_id`) VALUES (182,'Objetivo Asunto Difusi칩n y sensibilizaci칩n',NULL,202),(183,'Objetivo Asunto Formaci칩n',NULL,203...
2025-05-25 17:35:55,626 - app.api.endpoints.backup - INFO - 九 INSERT 17 ejecutado correctamente en tabla `specific_objectives`
2025-05-25 17:35:55,627 - app.api.endpoints.backup - INFO - [18/27] Ejecutando INSERT en tabla `assessments`
2025-05-25 17:35:55,627 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `assessments` (`id`, `score`, `material_topic_id`, `stakeholder_id`) VALUES (369,4,292,129),(370,4,293,129),(371,4,294,129),(372,4,295,129),(373,4,296,129),(374,4,297,129),(375,4,298,129),...
2025-05-25 17:35:55,629 - app.api.endpoints.backup - INFO - 九 INSERT 18 ejecutado correctamente en tabla `assessments`
2025-05-25 17:35:55,630 - app.api.endpoints.backup - INFO - [19/27] Ejecutando INSERT en tabla `diagnosis_indicators`
2025-05-25 17:35:55,630 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `diagnosis_indicators` (`id`, `name`, `type`, `material_topic_id`) VALUES (755,'쯉u recurso tiene o participa en alg칰n plan o estrategia de divulgaci칩n y educaci칩n en sostenibilidad basada...
2025-05-25 17:35:55,646 - app.api.endpoints.backup - INFO - 九 INSERT 19 ejecutado correctamente en tabla `diagnosis_indicators`
2025-05-25 17:35:55,646 - app.api.endpoints.backup - INFO - [20/27] Ejecutando INSERT en tabla `secondary_ods_material_topics`
2025-05-25 17:35:55,647 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `secondary_ods_material_topics` (`ods_id`, `material_topic_id`) VALUES (12,202),(13,202),(1,203),(5,203),(8,203),(12,203),(13,203),(16,203),(6,204),(7,204),(9,204),(11,204),(12,204),(13,20...
2025-05-25 17:35:55,654 - app.api.endpoints.backup - INFO - 九 INSERT 20 ejecutado correctamente en tabla `secondary_ods_material_topics`
2025-05-25 17:35:55,655 - app.api.endpoints.backup - INFO - [21/27] Ejecutando INSERT en tabla `actions`
2025-05-25 17:35:55,655 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `actions` (`id`, `description`, `difficulty`, `ods_id`, `specific_objective_id`, `execution_time`) VALUES (173,'Acci칩n Asunto Difusi칩n y sensibilizaci칩n',NULL,NULL,182,NULL),(174,'Acci칩n A...
2025-05-25 17:35:55,664 - app.api.endpoints.backup - INFO - 九 INSERT 21 ejecutado correctamente en tabla `actions`
2025-05-25 17:35:55,664 - app.api.endpoints.backup - INFO - [22/27] Ejecutando INSERT en tabla `diagnosis_indicators_quantitative`
2025-05-25 17:35:55,665 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `diagnosis_indicators_quantitative` (`diagnosis_indicator_id`, `numeric_response`, `unit`) VALUES (759,0.00,'Unidad'),(760,0.00,'Unidad'),(761,0.00,'Unidad'),(762,0.00,'Unidad'),(763,0.00,...
2025-05-25 17:35:55,666 - app.api.endpoints.backup - ERROR - 仇 Error en INSERT 22: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
2025-05-25 17:35:55,667 - app.api.endpoints.backup - ERROR - Statement problem치tico: INSERT INTO `diagnosis_indicators_quantitative` (`diagnosis_indicator_id`, `numeric_response`, `unit`) VALUES (759,0.00,'Unidad'),(760,0.00,'Unidad'),(761,0.00,'Unidad'),(762,0.00,'Unidad'),(763,0.00,'Unidad'),(764,0.00,'Unidad'),(765,0.00,'Unidad'),(769,0.00,'Unidad'),(770,0.00,'Unidad'),(771,0.00,'Unidad'),(774,0.00,'Unidad'),(775,0.00,'Unidad'),(776,0.00,'Unidad'),(777,0.00,'Unidad'),(778,0.00,'Unidad'),(779,0.00,'Unidad'),(782,0.00,'Unidad'),(785,0.00,'Unidad'),(786,0.00,'Unidad'),(787,0.00,'Unidad'),(789,0.00,'Unidad'),(792,0.00,'Unidad'),(793,0.00,'Unidad'),(794,0.00,'Unidad'),(797,0.00,'Unidad'),(799,0.00,'Unidad'),(802,0.00,'Unidad'),(803,0.00,'Unidad'),(804,0.00,'Unidad'),(809,0.00,'Unidad'),(810,0.00,'Unidad'),(811,0.00,'Unidad'),(815,0.00,'Unidad'),(816,0.00,'Unidad'),(821,0.00,'Unidad'),(822,0.00,'Unidad'),(823,0.00,'Unidad'),(825,0.00,'Unidad'),(826,0.00,'Unidad'),(827,0.00,'Unidad'),(828,0.00,'Unidad'),(829,0.00,'Unidad'),(831,0.00,'Unidad'),(832,0.00,'Unidad'),(835,0.00,'Unidad'),(836,0.00,'Unidad'),(837,0.00,'Unidad'),(840,0.00,'Unidad'),(841,0.00,'Unidad'),(842,0.00,'Unidad'),(846,0.00,'Unidad'),(847,0.00,'Unidad'),(855,0.00,'Unidad'),(856,0.00,'Unidad'),(857,0.00,'Unidad'),(860,0.00,'Unidad'),(861,0.00,'Unidad'),(866,0.00,'Unidad'),(867,0.00,'Unidad'),(868,0.00,'Unidad'),(869,0.00,'Unidad'),(870,0.00,'Unidad'),(872,0.00,'Unidad'),(877,0.00,'Unidad'),(878,0.00,'Unidad'),(889,0.00,'Unidad'),(892,0.00,'Unidad'),(893,0.00,'Unidad'),(896,0.00,'Unidad'),(899,0.00,'Unidad'),(900,0.00,'Unidad'),(904,0.00,'Unidad'),(906,0.00,'Unidad'),(909,0.00,'Unidad'),(910,0.00,'Unidad'),(911,0.00,'Unidad'),(916,0.00,'Unidad'),(922,0.00,'Unidad'),(928,0.00,'Unidad'),(929,0.00,'Unidad'),(930,0.00,'Unidad'),(936,0.00,'Unidad'),(938,0.00,'Unidad'),(939,0.00,'Unidad'),(942,0.00,'Unidad'),(943,0.00,'Unidad'),(944,0.00,'Unidad'),(953,0.00,'Unidad'),(954,0.00,'Unidad'),(962,0.00,'Unidad'),(963,0.00,'Unidad'),(964,0.00,'Unidad'),(967,0.00,'Unidad'),(968,0.00,'Unidad'),(973,0.00,'Unidad'),(974,0.00,'Unidad'),(975,0.00,'Unidad'),(976,0.00,'Unidad'),(977,0.00,'Unidad'),(978,0.00,'Unidad'),(979,0.00,'Unidad'),(983,0.00,'Unidad'),(984,0.00,'Unidad'),(985,0.00,'Unidad'),(988,0.00,'Unidad'),(989,0.00,'Unidad'),(990,0.00,'Unidad'),(991,0.00,'Unidad'),(992,0.00,'Unidad'),(993,0.00,'Unidad'),(996,0.00,'Unidad'),(999,0.00,'Unidad'),(1000,0.00,'Unidad'),(1001,0.00,'Unidad'),(1006,0.00,'Unidad'),(1007,0.00,'Unidad'),(1008,0.00,'Unidad'),(1013,0.00,'Unidad'),(1016,0.00,'Unidad'),(1017,0.00,'Unidad'),(1018,0.00,'Unidad'),(1023,0.00,'Unidad'),(1024,0.00,'Unidad'),(1025,0.00,'Unidad'),(1029,0.00,'Unidad'),(1030,0.00,'Unidad'),(1035,0.00,'Unidad'),(1036,0.00,'Unidad'),(1039,0.00,'Unidad'),(1040,0.00,'Unidad'),(1041,0.00,'Unidad'),(1042,0.00,'Unidad'),(1043,0.00,'Unidad'),(1045,0.00,'Unidad'),(1046,0.00,'Unidad'),(1049,0.00,'Unidad'),(1050,0.00,'Unidad'),(1051,0.00,'Unidad'),(1054,0.00,'Unidad'),(1055,0.00,'Unidad'),(1056,0.00,'Unidad'),(1060,0.00,'Unidad'),(1061,0.00,'Unidad'),(1069,0.00,'Unidad'),(1070,0.00,'Unidad'),(1071,0.00,'Unidad'),(1074,0.00,'Unidad'),(1075,0.00,'Unidad'),(1077,0.00,'%'),(1078,0.00,''),(1080,0.00,''),(1081,0.00,''),(1082,0.00,''),(1083,0.00,''),(1084,0.00,''),(1085,0.00,''),(1086,0.00,''),(1087,0.00,''),(1088,0.00,''),(1090,0.00,''),(1091,0.00,''),(1092,0.00,''),(1093,0.00,''),(1094,0.00,''),(1095,0.00,''),(1096,0.00,''),(1097,0.00,''),(1100,0.00,''),(1101,0.00,''),(1102,0.00,''),(1104,0.00,''),(1105,0.00,''),(1108,0.00,''),(1236,0.00,'Unidad'),(1237,0.00,'Unidad'),(1238,0.00,'Unidad'),(1239,0.00,'Unidad'),(1240,0.00,'Unidad'),(1241,0.00,'Unidad'),(1242,0.00,'Unidad'),(1246,0.00,'Unidad'),(1247,0.00,'Unidad'),(1248,0.00,'Unidad'),(1251,0.00,'Unidad'),(1252,0.00,'Unidad'),(1253,0.00,'Unidad'),(1254,0.00,'Unidad'),(1255,0.00,'Unidad'),(1256,0.00,'Unidad'),(1259,0.00,'Unidad'),(1262,0.00,'Unidad'),(1263,0.00,'Unidad'),(1264,0.00,'Unidad'),(1266,0.00,'Unidad'),(1269,0.00,'Unidad'),(1270,0.00,'Unidad'),(1271,0.00,'Unidad'),(1274,0.00,'Unidad'),(1276,0.00,'Unidad'),(1279,0.00,'Unidad'),(1280,0.00,'Unidad'),(1281,0.00,'Unidad'),(1286,0.00,'Unidad'),(1287,0.00,'Unidad'),(1288,0.00,'Unidad'),(1292,0.00,'Unidad'),(1293,0.00,'Unidad'),(1298,0.00,'Unidad'),(1299,0.00,'Unidad'),(1300,0.00,'Unidad'),(1302,0.00,'Unidad'),(1303,0.00,'Unidad'),(1304,0.00,'Unidad'),(1305,0.00,'Unidad'),(1306,0.00,'Unidad'),(1308,0.00,'Unidad'),(1309,0.00,'Unidad'),(1312,0.00,'Unidad'),(1313,0.00,'Unidad'),(1314,0.00,'Unidad'),(1317,0.00,'Unidad'),(1318,0.00,'Unidad'),(1319,0.00,'Unidad'),(1323,0.00,'Unidad'),(1324,0.00,'Unidad'),(1332,0.00,'Unidad'),(1333,0.00,'Unidad'),(1334,0.00,'Unidad'),(1337,0.00,'Unidad'),(1338,0.00,'Unidad');
2025-05-25 17:35:55,667 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 357, in restore_backup
    await asyncio.to_thread(_restore)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 330, in _restore
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
2025-05-25 17:35:55,682 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
2025-05-25 17:41:53,862 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de backup por usuario: i12gafej@uco.es
2025-05-25 17:41:53,863 - app.api.endpoints.backup - INFO - Archivo recibido: todo.sql
2025-05-25 17:41:53,864 - app.api.endpoints.backup - INFO - Archivo guardado en: /tmp/todo.sql
2025-05-25 17:41:53,866 - app.api.endpoints.backup - INFO - Iniciando restauraci칩n de datos (sin tocar estructura)...
2025-05-25 17:41:53,903 - app.api.endpoints.backup - INFO - Base de datos 'sustainability_db' confirmada
2025-05-25 17:41:53,908 - app.api.endpoints.backup - INFO - Tablas encontradas: ['actions', 'alembic_version', 'assessments', 'diagnosis_indicators', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'dimensions', 'goals', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'heritage_resources', 'material_topics', 'ods', 'performance_indicators', 'performance_indicators_qualitative', 'performance_indicators_quantitative', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'secondary_ods_actions', 'secondary_ods_material_topics', 'specific_objectives', 'stakeholders', 'sustainability_reports', 'sustainability_team_members', 'users']
2025-05-25 17:41:53,912 - app.api.endpoints.backup - INFO - Dependencias encontradas: {'actions': ['ods', 'specific_objectives'], 'ods': ['dimensions'], 'specific_objectives': ['material_topics'], 'assessments': ['material_topics', 'stakeholders'], 'material_topics': ['goals', 'sustainability_reports'], 'stakeholders': ['sustainability_reports'], 'diagnosis_indicators': ['material_topics'], 'diagnosis_indicators_qualitative': ['diagnosis_indicators'], 'diagnosis_indicators_quantitative': ['diagnosis_indicators'], 'goals': ['ods'], 'heritage_resource_social_networks': ['heritage_resources'], 'heritage_resources': [], 'heritage_resource_typologies': ['heritage_resources'], 'sustainability_reports': ['heritage_resources'], 'dimensions': [], 'performance_indicators': ['actions'], 'performance_indicators_qualitative': ['performance_indicators'], 'performance_indicators_quantitative': ['performance_indicators'], 'report_agreements': ['sustainability_reports'], 'report_bibliographies': ['sustainability_reports'], 'report_logos': ['sustainability_reports'], 'report_norms': ['sustainability_reports'], 'report_photos': ['sustainability_reports'], 'secondary_ods_actions': ['actions', 'ods', 'specific_objectives'], 'secondary_ods_material_topics': ['material_topics', 'ods'], 'sustainability_team_members': ['sustainability_reports', 'users'], 'users': []}
2025-05-25 17:41:53,912 - app.api.endpoints.backup - INFO - Orden de tablas: ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:41:53,913 - app.api.endpoints.backup - INFO - Configurando MySQL para restauraci칩n...
2025-05-25 17:41:53,914 - app.api.endpoints.backup - INFO - === PASO 1: Limpiando tablas (TRUNCATE) ===
2025-05-25 17:41:53,914 - app.api.endpoints.backup - INFO - Orden para TRUNCATE (hijos  padres): ['performance_indicators_quantitative', 'performance_indicators_qualitative', 'secondary_ods_actions', 'performance_indicators', 'diagnosis_indicators_quantitative', 'diagnosis_indicators_qualitative', 'actions', 'secondary_ods_material_topics', 'diagnosis_indicators', 'assessments', 'specific_objectives', 'material_topics', 'goals', 'sustainability_team_members', 'report_photos', 'report_norms', 'report_logos', 'report_bibliographies', 'report_agreements', 'stakeholders', 'ods', 'sustainability_reports', 'heritage_resource_typologies', 'heritage_resource_social_networks', 'alembic_version', 'users', 'dimensions', 'heritage_resources']
2025-05-25 17:41:53,914 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_quantitative`
2025-05-25 17:41:53,946 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:41:53,947 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators_qualitative`
2025-05-25 17:41:53,972 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:41:53,973 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_actions`
2025-05-25 17:41:54,006 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_actions` limpiada con TRUNCATE
2025-05-25 17:41:54,007 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `performance_indicators`
2025-05-25 17:41:54,038 - app.api.endpoints.backup - INFO - 九 Tabla `performance_indicators` limpiada con TRUNCATE
2025-05-25 17:41:54,038 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_quantitative`
2025-05-25 17:41:54,065 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_quantitative` limpiada con TRUNCATE
2025-05-25 17:41:54,065 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators_qualitative`
2025-05-25 17:41:54,094 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators_qualitative` limpiada con TRUNCATE
2025-05-25 17:41:54,095 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `actions`
2025-05-25 17:41:54,131 - app.api.endpoints.backup - INFO - 九 Tabla `actions` limpiada con TRUNCATE
2025-05-25 17:41:54,131 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `secondary_ods_material_topics`
2025-05-25 17:41:54,163 - app.api.endpoints.backup - INFO - 九 Tabla `secondary_ods_material_topics` limpiada con TRUNCATE
2025-05-25 17:41:54,163 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `diagnosis_indicators`
2025-05-25 17:41:54,193 - app.api.endpoints.backup - INFO - 九 Tabla `diagnosis_indicators` limpiada con TRUNCATE
2025-05-25 17:41:54,194 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `assessments`
2025-05-25 17:41:54,225 - app.api.endpoints.backup - INFO - 九 Tabla `assessments` limpiada con TRUNCATE
2025-05-25 17:41:54,226 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `specific_objectives`
2025-05-25 17:41:54,255 - app.api.endpoints.backup - INFO - 九 Tabla `specific_objectives` limpiada con TRUNCATE
2025-05-25 17:41:54,256 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `material_topics`
2025-05-25 17:41:54,297 - app.api.endpoints.backup - INFO - 九 Tabla `material_topics` limpiada con TRUNCATE
2025-05-25 17:41:54,297 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `goals`
2025-05-25 17:41:54,324 - app.api.endpoints.backup - INFO - 九 Tabla `goals` limpiada con TRUNCATE
2025-05-25 17:41:54,324 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_team_members`
2025-05-25 17:41:54,355 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_team_members` limpiada con TRUNCATE
2025-05-25 17:41:54,355 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_photos`
2025-05-25 17:41:54,388 - app.api.endpoints.backup - INFO - 九 Tabla `report_photos` limpiada con TRUNCATE
2025-05-25 17:41:54,389 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_norms`
2025-05-25 17:41:54,416 - app.api.endpoints.backup - INFO - 九 Tabla `report_norms` limpiada con TRUNCATE
2025-05-25 17:41:54,416 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_logos`
2025-05-25 17:41:54,447 - app.api.endpoints.backup - INFO - 九 Tabla `report_logos` limpiada con TRUNCATE
2025-05-25 17:41:54,447 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_bibliographies`
2025-05-25 17:41:54,476 - app.api.endpoints.backup - INFO - 九 Tabla `report_bibliographies` limpiada con TRUNCATE
2025-05-25 17:41:54,477 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `report_agreements`
2025-05-25 17:41:54,504 - app.api.endpoints.backup - INFO - 九 Tabla `report_agreements` limpiada con TRUNCATE
2025-05-25 17:41:54,505 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `stakeholders`
2025-05-25 17:41:54,534 - app.api.endpoints.backup - INFO - 九 Tabla `stakeholders` limpiada con TRUNCATE
2025-05-25 17:41:54,535 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `ods`
2025-05-25 17:41:54,567 - app.api.endpoints.backup - INFO - 九 Tabla `ods` limpiada con TRUNCATE
2025-05-25 17:41:54,568 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `sustainability_reports`
2025-05-25 17:41:54,600 - app.api.endpoints.backup - INFO - 九 Tabla `sustainability_reports` limpiada con TRUNCATE
2025-05-25 17:41:54,601 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_typologies`
2025-05-25 17:41:54,632 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_typologies` limpiada con TRUNCATE
2025-05-25 17:41:54,632 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resource_social_networks`
2025-05-25 17:41:54,680 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resource_social_networks` limpiada con TRUNCATE
2025-05-25 17:41:54,681 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `alembic_version`
2025-05-25 17:41:54,706 - app.api.endpoints.backup - INFO - 九 Tabla `alembic_version` limpiada con TRUNCATE
2025-05-25 17:41:54,707 - app.api.endpoints.backup - INFO - DELETE FROM `users` (tabla especial)
2025-05-25 17:41:54,709 - app.api.endpoints.backup - INFO - 九 Tabla `users` limpiada con DELETE
2025-05-25 17:41:54,709 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `dimensions`
2025-05-25 17:41:54,753 - app.api.endpoints.backup - INFO - 九 Tabla `dimensions` limpiada con TRUNCATE
2025-05-25 17:41:54,754 - app.api.endpoints.backup - INFO - TRUNCATE TABLE `heritage_resources`
2025-05-25 17:41:54,792 - app.api.endpoints.backup - INFO - 九 Tabla `heritage_resources` limpiada con TRUNCATE
2025-05-25 17:41:54,792 - app.api.endpoints.backup - INFO - === PASO 2: Procesando archivo SQL ===
2025-05-25 17:41:54,858 - app.api.endpoints.backup - INFO - === PASO 3: Ejecutando 27 INSERT statements ===
2025-05-25 17:41:54,859 - app.api.endpoints.backup - INFO - Orden para INSERT (padres  hijos): ['heritage_resources', 'dimensions', 'users', 'alembic_version', 'heritage_resource_social_networks', 'heritage_resource_typologies', 'sustainability_reports', 'ods', 'stakeholders', 'report_agreements', 'report_bibliographies', 'report_logos', 'report_norms', 'report_photos', 'sustainability_team_members', 'goals', 'material_topics', 'specific_objectives', 'assessments', 'diagnosis_indicators', 'secondary_ods_material_topics', 'actions', 'diagnosis_indicators_qualitative', 'diagnosis_indicators_quantitative', 'performance_indicators', 'secondary_ods_actions', 'performance_indicators_qualitative', 'performance_indicators_quantitative']
2025-05-25 17:41:54,860 - app.api.endpoints.backup - INFO - [1/27] Ejecutando INSERT en tabla `heritage_resources`
2025-05-25 17:41:54,860 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resources` (`id`, `name`, `ownership`, `management_model`, `postal_address`, `web_address`, `phone_number`) VALUES (15,'Mezquita-Catedral de C칩rdoba','Cabildo Catedral de C칩rdoba...
2025-05-25 17:41:54,862 - app.api.endpoints.backup - INFO - 九 INSERT 1 ejecutado correctamente en tabla `heritage_resources`
2025-05-25 17:41:54,862 - app.api.endpoints.backup - INFO - [2/27] Ejecutando INSERT en tabla `dimensions`
2025-05-25 17:41:54,863 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `dimensions` (`id`, `name`, `description`) VALUES (3,'Personas','Poner fin a la pobreza y el hambre en todas sus formas y asegurar la dignidad e igualdad de todas las personas.'),(4,'Plane...
2025-05-25 17:41:54,865 - app.api.endpoints.backup - INFO - 九 INSERT 2 ejecutado correctamente en tabla `dimensions`
2025-05-25 17:41:54,865 - app.api.endpoints.backup - INFO - [3/27] Ejecutando INSERT en tabla `users`
2025-05-25 17:41:54,866 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `users` (`id`, `email`, `password`, `admin`, `name`, `surname`, `phone_number`, `reset_token`, `reset_token_expiration`, `reset_token_state`) VALUES (1,'i12gafej@uco.es','$2b$12$7Jpca3J/l....
2025-05-25 17:41:54,867 - app.api.endpoints.backup - INFO - 九 INSERT 3 ejecutado correctamente en tabla `users`
2025-05-25 17:41:54,867 - app.api.endpoints.backup - INFO - [4/27] Ejecutando INSERT en tabla `alembic_version`
2025-05-25 17:41:54,868 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `alembic_version` (`version_num`) VALUES ('8e597e8d9c1b');
2025-05-25 17:41:54,870 - app.api.endpoints.backup - INFO - 九 INSERT 4 ejecutado correctamente en tabla `alembic_version`
2025-05-25 17:41:54,870 - app.api.endpoints.backup - INFO - [5/27] Ejecutando INSERT en tabla `heritage_resource_social_networks`
2025-05-25 17:41:54,871 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resource_social_networks` (`id`, `resource_id`, `social_network`, `url`) VALUES (20,15,'Facebook','https://www.facebook.com/CabildoCatedraldeCordoba/'),(21,15,'Instagram','https:...
2025-05-25 17:41:54,873 - app.api.endpoints.backup - INFO - 九 INSERT 5 ejecutado correctamente en tabla `heritage_resource_social_networks`
2025-05-25 17:41:54,873 - app.api.endpoints.backup - INFO - [6/27] Ejecutando INSERT en tabla `heritage_resource_typologies`
2025-05-25 17:41:54,873 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `heritage_resource_typologies` (`id`, `resource_id`, `typology`) VALUES (43,18,'Patrimonio Cultural'),(44,22,'Patrimonio verde urbano'),(46,23,'Patrimonio casa-patio'),(49,15,'Patrimonio c...
2025-05-25 17:41:54,875 - app.api.endpoints.backup - INFO - 九 INSERT 6 ejecutado correctamente en tabla `heritage_resource_typologies`
2025-05-25 17:41:54,876 - app.api.endpoints.backup - INFO - [7/27] Ejecutando INSERT en tabla `sustainability_reports`
2025-05-25 17:41:54,876 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `sustainability_reports` (`id`, `heritage_resource_id`, `year`, `state`, `observation`, `cover_photo`, `commitment_letter`, `mission`, `vision`, `values`, `org_chart_text`, `org_chart_figu...
2025-05-25 17:41:54,901 - app.api.endpoints.backup - INFO - 九 INSERT 7 ejecutado correctamente en tabla `sustainability_reports`
2025-05-25 17:41:54,902 - app.api.endpoints.backup - INFO - [8/27] Ejecutando INSERT en tabla `ods`
2025-05-25 17:41:54,902 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `ods` (`id`, `name`, `description`, `dimension_id`) VALUES (1,'Fin de la Pobreza','Poner fin a la pobreza en todas sus formas en todo el mundo.',3),(2,'Hambre Cero','Poner fin al hambre, l...
2025-05-25 17:41:54,904 - app.api.endpoints.backup - INFO - 九 INSERT 8 ejecutado correctamente en tabla `ods`
2025-05-25 17:41:54,905 - app.api.endpoints.backup - INFO - [9/27] Ejecutando INSERT en tabla `stakeholders`
2025-05-25 17:41:54,905 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `stakeholders` (`id`, `name`, `description`, `type`, `report_id`) VALUES (84,'Persona empleada ','Empleados del recurso patrimonial','internal',36),(85,'Empresa proveedora ','Empresa proov...
2025-05-25 17:41:54,907 - app.api.endpoints.backup - INFO - 九 INSERT 9 ejecutado correctamente en tabla `stakeholders`
2025-05-25 17:41:54,908 - app.api.endpoints.backup - INFO - [10/27] Ejecutando INSERT en tabla `report_bibliographies`
2025-05-25 17:41:54,908 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_bibliographies` (`id`, `reference`, `report_id`) VALUES (7,'CUCO Club de C칩rdoba para la UNESCO & Universidad de C칩rdoba. (2024). Gu칤a para la acci칩n del recurso patrimonial en los...
2025-05-25 17:41:54,910 - app.api.endpoints.backup - INFO - 九 INSERT 10 ejecutado correctamente en tabla `report_bibliographies`
2025-05-25 17:41:54,910 - app.api.endpoints.backup - INFO - [11/27] Ejecutando INSERT en tabla `report_logos`
2025-05-25 17:41:54,911 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_logos` (`id`, `logo`, `report_id`) VALUES (18,'C:\\Users\\USUARIO\\Downloads\\cosas uni\\tfg\\App\\backend\\static\\uploads\\logos/report_42_logo_8c82935a-a3f5-4c60-b493-c2096ee918...
2025-05-25 17:41:54,913 - app.api.endpoints.backup - INFO - 九 INSERT 11 ejecutado correctamente en tabla `report_logos`
2025-05-25 17:41:54,913 - app.api.endpoints.backup - INFO - [12/27] Ejecutando INSERT en tabla `report_norms`
2025-05-25 17:41:54,914 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_norms` (`id`, `norm`, `report_id`) VALUES (372,'Convenci칩n para la protecci칩n de los bienes culturales en caso de conflicto armado, de 14 de mayo de 1954.\n\nhttps://www.unesco.org...
2025-05-25 17:41:54,924 - app.api.endpoints.backup - INFO - 九 INSERT 12 ejecutado correctamente en tabla `report_norms`
2025-05-25 17:41:54,924 - app.api.endpoints.backup - INFO - [13/27] Ejecutando INSERT en tabla `report_photos`
2025-05-25 17:41:54,925 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `report_photos` (`id`, `photo`, `report_id`, `description`) VALUES (15,'/static/uploads/gallery/report_42_photo_9818dfc8-1ed0-4770-b136-ccdc6e88184f.jpg',42,'Capilla real de la Mezquita-Ca...
2025-05-25 17:41:54,927 - app.api.endpoints.backup - INFO - 九 INSERT 13 ejecutado correctamente en tabla `report_photos`
2025-05-25 17:41:54,928 - app.api.endpoints.backup - INFO - [14/27] Ejecutando INSERT en tabla `sustainability_team_members`
2025-05-25 17:41:54,928 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `sustainability_team_members` (`id`, `type`, `organization`, `report_id`, `user_id`) VALUES (74,'consultant','d',36,3),(75,'external_advisor','d',36,6),(76,'consultant','d',38,3),(77,'exte...
2025-05-25 17:41:54,931 - app.api.endpoints.backup - INFO - 九 INSERT 14 ejecutado correctamente en tabla `sustainability_team_members`
2025-05-25 17:41:54,931 - app.api.endpoints.backup - INFO - [15/27] Ejecutando INSERT en tabla `goals`
2025-05-25 17:41:54,932 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `goals` (`ods_id`, `goal_number`, `description`) VALUES (1,'1','Para 2030, erradicar la pobreza extrema para todas las personas en el mundo, actualmente medida por un ingreso por persona i...
2025-05-25 17:41:54,942 - app.api.endpoints.backup - INFO - 九 INSERT 15 ejecutado correctamente en tabla `goals`
2025-05-25 17:41:54,943 - app.api.endpoints.backup - INFO - [16/27] Ejecutando INSERT en tabla `material_topics`
2025-05-25 17:41:54,944 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `material_topics` (`id`, `name`, `description`, `priority`, `main_objective`, `goal_ods_id`, `goal_number`, `report_id`) VALUES (202,'Difusi칩n y sensibilizaci칩n','Comprende las diferentes ...
2025-05-25 17:41:54,954 - app.api.endpoints.backup - INFO - 九 INSERT 16 ejecutado correctamente en tabla `material_topics`
2025-05-25 17:41:54,955 - app.api.endpoints.backup - INFO - [17/27] Ejecutando INSERT en tabla `specific_objectives`
2025-05-25 17:41:54,955 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `specific_objectives` (`id`, `description`, `responsible`, `material_topic_id`) VALUES (182,'Objetivo Asunto Difusi칩n y sensibilizaci칩n',NULL,202),(183,'Objetivo Asunto Formaci칩n',NULL,203...
2025-05-25 17:41:54,959 - app.api.endpoints.backup - INFO - 九 INSERT 17 ejecutado correctamente en tabla `specific_objectives`
2025-05-25 17:41:54,960 - app.api.endpoints.backup - INFO - [18/27] Ejecutando INSERT en tabla `assessments`
2025-05-25 17:41:54,961 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `assessments` (`id`, `score`, `material_topic_id`, `stakeholder_id`) VALUES (369,4,292,129),(370,4,293,129),(371,4,294,129),(372,4,295,129),(373,4,296,129),(374,4,297,129),(375,4,298,129),...
2025-05-25 17:41:54,963 - app.api.endpoints.backup - INFO - 九 INSERT 18 ejecutado correctamente en tabla `assessments`
2025-05-25 17:41:54,964 - app.api.endpoints.backup - INFO - [19/27] Ejecutando INSERT en tabla `diagnosis_indicators`
2025-05-25 17:41:54,964 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `diagnosis_indicators` (`id`, `name`, `type`, `material_topic_id`) VALUES (755,'쯉u recurso tiene o participa en alg칰n plan o estrategia de divulgaci칩n y educaci칩n en sostenibilidad basada...
2025-05-25 17:41:54,983 - app.api.endpoints.backup - INFO - 九 INSERT 19 ejecutado correctamente en tabla `diagnosis_indicators`
2025-05-25 17:41:54,983 - app.api.endpoints.backup - INFO - [20/27] Ejecutando INSERT en tabla `secondary_ods_material_topics`
2025-05-25 17:41:54,985 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `secondary_ods_material_topics` (`ods_id`, `material_topic_id`) VALUES (12,202),(13,202),(1,203),(5,203),(8,203),(12,203),(13,203),(16,203),(6,204),(7,204),(9,204),(11,204),(12,204),(13,20...
2025-05-25 17:41:54,994 - app.api.endpoints.backup - INFO - 九 INSERT 20 ejecutado correctamente en tabla `secondary_ods_material_topics`
2025-05-25 17:41:54,995 - app.api.endpoints.backup - INFO - [21/27] Ejecutando INSERT en tabla `actions`
2025-05-25 17:41:54,996 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `actions` (`id`, `description`, `difficulty`, `ods_id`, `specific_objective_id`, `execution_time`) VALUES (173,'Acci칩n Asunto Difusi칩n y sensibilizaci칩n',NULL,NULL,182,NULL),(174,'Acci칩n A...
2025-05-25 17:41:55,010 - app.api.endpoints.backup - INFO - 九 INSERT 21 ejecutado correctamente en tabla `actions`
2025-05-25 17:41:55,011 - app.api.endpoints.backup - INFO - [22/27] Ejecutando INSERT en tabla `diagnosis_indicators_quantitative`
2025-05-25 17:41:55,012 - app.api.endpoints.backup - INFO - Statement: INSERT INTO `diagnosis_indicators_quantitative` (`diagnosis_indicator_id`, `numeric_response`, `unit`) VALUES (759,0.00,'Unidad'),(760,0.00,'Unidad'),(761,0.00,'Unidad'),(762,0.00,'Unidad'),(763,0.00,...
2025-05-25 17:41:55,014 - app.api.endpoints.backup - ERROR - 仇 Error en INSERT 22: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
2025-05-25 17:41:55,015 - app.api.endpoints.backup - ERROR - Statement problem치tico: INSERT INTO `diagnosis_indicators_quantitative` (`diagnosis_indicator_id`, `numeric_response`, `unit`) VALUES (759,0.00,'Unidad'),(760,0.00,'Unidad'),(761,0.00,'Unidad'),(762,0.00,'Unidad'),(763,0.00,'Unidad'),(764,0.00,'Unidad'),(765,0.00,'Unidad'),(769,0.00,'Unidad'),(770,0.00,'Unidad'),(771,0.00,'Unidad'),(774,0.00,'Unidad'),(775,0.00,'Unidad'),(776,0.00,'Unidad'),(777,0.00,'Unidad'),(778,0.00,'Unidad'),(779,0.00,'Unidad'),(782,0.00,'Unidad'),(785,0.00,'Unidad'),(786,0.00,'Unidad'),(787,0.00,'Unidad'),(789,0.00,'Unidad'),(792,0.00,'Unidad'),(793,0.00,'Unidad'),(794,0.00,'Unidad'),(797,0.00,'Unidad'),(799,0.00,'Unidad'),(802,0.00,'Unidad'),(803,0.00,'Unidad'),(804,0.00,'Unidad'),(809,0.00,'Unidad'),(810,0.00,'Unidad'),(811,0.00,'Unidad'),(815,0.00,'Unidad'),(816,0.00,'Unidad'),(821,0.00,'Unidad'),(822,0.00,'Unidad'),(823,0.00,'Unidad'),(825,0.00,'Unidad'),(826,0.00,'Unidad'),(827,0.00,'Unidad'),(828,0.00,'Unidad'),(829,0.00,'Unidad'),(831,0.00,'Unidad'),(832,0.00,'Unidad'),(835,0.00,'Unidad'),(836,0.00,'Unidad'),(837,0.00,'Unidad'),(840,0.00,'Unidad'),(841,0.00,'Unidad'),(842,0.00,'Unidad'),(846,0.00,'Unidad'),(847,0.00,'Unidad'),(855,0.00,'Unidad'),(856,0.00,'Unidad'),(857,0.00,'Unidad'),(860,0.00,'Unidad'),(861,0.00,'Unidad'),(866,0.00,'Unidad'),(867,0.00,'Unidad'),(868,0.00,'Unidad'),(869,0.00,'Unidad'),(870,0.00,'Unidad'),(872,0.00,'Unidad'),(877,0.00,'Unidad'),(878,0.00,'Unidad'),(889,0.00,'Unidad'),(892,0.00,'Unidad'),(893,0.00,'Unidad'),(896,0.00,'Unidad'),(899,0.00,'Unidad'),(900,0.00,'Unidad'),(904,0.00,'Unidad'),(906,0.00,'Unidad'),(909,0.00,'Unidad'),(910,0.00,'Unidad'),(911,0.00,'Unidad'),(916,0.00,'Unidad'),(922,0.00,'Unidad'),(928,0.00,'Unidad'),(929,0.00,'Unidad'),(930,0.00,'Unidad'),(936,0.00,'Unidad'),(938,0.00,'Unidad'),(939,0.00,'Unidad'),(942,0.00,'Unidad'),(943,0.00,'Unidad'),(944,0.00,'Unidad'),(953,0.00,'Unidad'),(954,0.00,'Unidad'),(962,0.00,'Unidad'),(963,0.00,'Unidad'),(964,0.00,'Unidad'),(967,0.00,'Unidad'),(968,0.00,'Unidad'),(973,0.00,'Unidad'),(974,0.00,'Unidad'),(975,0.00,'Unidad'),(976,0.00,'Unidad'),(977,0.00,'Unidad'),(978,0.00,'Unidad'),(979,0.00,'Unidad'),(983,0.00,'Unidad'),(984,0.00,'Unidad'),(985,0.00,'Unidad'),(988,0.00,'Unidad'),(989,0.00,'Unidad'),(990,0.00,'Unidad'),(991,0.00,'Unidad'),(992,0.00,'Unidad'),(993,0.00,'Unidad'),(996,0.00,'Unidad'),(999,0.00,'Unidad'),(1000,0.00,'Unidad'),(1001,0.00,'Unidad'),(1006,0.00,'Unidad'),(1007,0.00,'Unidad'),(1008,0.00,'Unidad'),(1013,0.00,'Unidad'),(1016,0.00,'Unidad'),(1017,0.00,'Unidad'),(1018,0.00,'Unidad'),(1023,0.00,'Unidad'),(1024,0.00,'Unidad'),(1025,0.00,'Unidad'),(1029,0.00,'Unidad'),(1030,0.00,'Unidad'),(1035,0.00,'Unidad'),(1036,0.00,'Unidad'),(1039,0.00,'Unidad'),(1040,0.00,'Unidad'),(1041,0.00,'Unidad'),(1042,0.00,'Unidad'),(1043,0.00,'Unidad'),(1045,0.00,'Unidad'),(1046,0.00,'Unidad'),(1049,0.00,'Unidad'),(1050,0.00,'Unidad'),(1051,0.00,'Unidad'),(1054,0.00,'Unidad'),(1055,0.00,'Unidad'),(1056,0.00,'Unidad'),(1060,0.00,'Unidad'),(1061,0.00,'Unidad'),(1069,0.00,'Unidad'),(1070,0.00,'Unidad'),(1071,0.00,'Unidad'),(1074,0.00,'Unidad'),(1075,0.00,'Unidad'),(1077,0.00,'%'),(1078,0.00,''),(1080,0.00,''),(1081,0.00,''),(1082,0.00,''),(1083,0.00,''),(1084,0.00,''),(1085,0.00,''),(1086,0.00,''),(1087,0.00,''),(1088,0.00,''),(1090,0.00,''),(1091,0.00,''),(1092,0.00,''),(1093,0.00,''),(1094,0.00,''),(1095,0.00,''),(1096,0.00,''),(1097,0.00,''),(1100,0.00,''),(1101,0.00,''),(1102,0.00,''),(1104,0.00,''),(1105,0.00,''),(1108,0.00,''),(1236,0.00,'Unidad'),(1237,0.00,'Unidad'),(1238,0.00,'Unidad'),(1239,0.00,'Unidad'),(1240,0.00,'Unidad'),(1241,0.00,'Unidad'),(1242,0.00,'Unidad'),(1246,0.00,'Unidad'),(1247,0.00,'Unidad'),(1248,0.00,'Unidad'),(1251,0.00,'Unidad'),(1252,0.00,'Unidad'),(1253,0.00,'Unidad'),(1254,0.00,'Unidad'),(1255,0.00,'Unidad'),(1256,0.00,'Unidad'),(1259,0.00,'Unidad'),(1262,0.00,'Unidad'),(1263,0.00,'Unidad'),(1264,0.00,'Unidad'),(1266,0.00,'Unidad'),(1269,0.00,'Unidad'),(1270,0.00,'Unidad'),(1271,0.00,'Unidad'),(1274,0.00,'Unidad'),(1276,0.00,'Unidad'),(1279,0.00,'Unidad'),(1280,0.00,'Unidad'),(1281,0.00,'Unidad'),(1286,0.00,'Unidad'),(1287,0.00,'Unidad'),(1288,0.00,'Unidad'),(1292,0.00,'Unidad'),(1293,0.00,'Unidad'),(1298,0.00,'Unidad'),(1299,0.00,'Unidad'),(1300,0.00,'Unidad'),(1302,0.00,'Unidad'),(1303,0.00,'Unidad'),(1304,0.00,'Unidad'),(1305,0.00,'Unidad'),(1306,0.00,'Unidad'),(1308,0.00,'Unidad'),(1309,0.00,'Unidad'),(1312,0.00,'Unidad'),(1313,0.00,'Unidad'),(1314,0.00,'Unidad'),(1317,0.00,'Unidad'),(1318,0.00,'Unidad'),(1319,0.00,'Unidad'),(1323,0.00,'Unidad'),(1324,0.00,'Unidad'),(1332,0.00,'Unidad'),(1333,0.00,'Unidad'),(1334,0.00,'Unidad'),(1337,0.00,'Unidad'),(1338,0.00,'Unidad');
2025-05-25 17:41:55,016 - app.api.endpoints.backup - ERROR - Error al restaurar el backup: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
Traceback (most recent call last):
  File "/app/app/api/endpoints/backup.py", line 357, in restore_backup
    await asyncio.to_thread(_restore)
  File "/usr/local/lib/python3.10/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
  File "/usr/local/lib/python3.10/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/app/app/api/endpoints/backup.py", line 330, in _restore
    cursor.execute(stmt)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'diagnosis_indicator_id' in 'field list'")
2025-05-25 17:41:55,032 - app.api.endpoints.backup - INFO - Archivo temporal eliminado
